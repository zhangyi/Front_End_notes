From: <ÓÉ Windows Internet Explorer 7 ±£´æ>
Subject: Named function expressions demystified
Date: Fri, 8 Oct 2010 18:13:57 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----=_NextPart_000_0000_01CB6714.93401B50"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5994

This is a multi-part message in MIME format.

------=_NextPart_000_0000_01CB6714.93401B50
Content-Type: text/html;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.cssrain.cn/demo/named%20function%20expression/Named%20function%20expressions%20demystified.htm

=EF=BB=BF<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" =
"http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML><HEAD><TITLE>Named function expressions demystified</TITLE>
<META http-equiv=3DContent-type content=3D"text/html; =
charset=3DUTF-8"><LINK=20
media=3Dscreen=20
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified_files/screen.css"=20
type=3Dtext/css rel=3Dstylesheet><LINK media=3Dscreen=20
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified_files/prettify.css"=20
type=3Dtext/css rel=3Dstylesheet>
<SCRIPT=20
src=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20f=
unction%20expressions%20demystified_files/prettify.js"=20
type=3Dtext/javascript></SCRIPT>

<META content=3D"MSHTML 6.00.6000.21228" name=3DGENERATOR></HEAD>
<BODY onload=3DprettyPrint();>
<DIV class=3Dcontainer>
<H1 style=3D"MARGIN-TOP: =
1em">=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=
=88Named function expressions demystified=EF=BC=89</H1>
<P=20
style=3D"MARGIN-TOP: =
1em">=E5=8E=9F=E6=96=87=E5=9C=B0=E5=9D=80http://yura.thinkweb2.com/named-=
function-expressions/</P>
<P style=3D"MARGIN-TOP: =
1em">=EF=BC=88=E5=A6=82=E5=8F=91=E7=8E=B0=E7=BF=BB=E8=AF=91=E9=97=AE=E9=A2=
=98=E5=8F=AF=E4=BB=A5=E5=8F=91=E9=82=AE=E4=BB=B6=E5=88=B0=E6=88=91=E7=9A=84=
=E4=BF=A1=E7=AE=B1 <STRONG>yangliang at=20
vip.qq.com</STRONG>=EF=BC=89 </P>
<P style=3D"TEXT-ALIGN: right">&nbsp;</P>
<P style=3D"TEXT-ALIGN: right"><EM>by <A title=3D""=20
href=3D"http://thinkweb2.com/projects/prototype/" linkindex=3D"0">Juriy =
"kangax"=20
Zaytsev</A></EM></P>
<OL>
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#introduction"=20
  linkindex=3D"1">=E7=AE=80=E4=BB=8B</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#expr-vs-decl"=20
  =
linkindex=3D"2">=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=92=8C=E5=
=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#named-expr"=20
  =
linkindex=3D"3">=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=
=BC=8F</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#names-in-debuggers"=20
  =
linkindex=3D"4">=E8=B0=83=E8=AF=95=E5=99=A8=E4=B8=AD=E7=9A=84=E5=87=BD=E6=
=95=B0=E5=90=8D</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#jscript-bugs"=20
  linkindex=3D"5">JScript bugs</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#jscript-memory-management"=20
  linkindex=3D"6">JScript =E5=86=85=E5=AD=98=E7=AE=A1=E7=90=86</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#tests"=20
  linkindex=3D"7">=E6=B5=8B=E8=AF=95</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#safari-bug"=20
  linkindex=3D"8">Safari bug</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#solution"=20
  linkindex=3D"9">=E8=A7=A3=E5=86=B3=E6=96=B9=E6=A1=88</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#alt-solution"=20
  =
linkindex=3D"10">=E5=8F=AF=E6=9B=BF=E4=BB=A3=E7=9A=84=E8=A7=A3=E5=86=B3=E6=
=96=B9=E6=A1=88</A>=20
  <LI><A=20
  =
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#credits"=20
  linkindex=3D"11">Credits</A> </LI></OL>
<H2 id=3Dintroduction>=E7=AE=80=E4=BB=8B <A =
name=3Dintroduction></A></H2>
<P>Surprisingly, a topic of named function expressions doesn=E2=80=99t =
seem to be=20
covered well enough on the web. This is probably why there are so many=20
misconceptions floating around. In this article, I=E2=80=99ll try to =
summarize both -=20
theoretical and practical aspects of these wonderful Javascript =
constructs; the=20
good, bad and ugly parts of them.</P>
<P>=E5=9C=A8=E4=BA=92=E8=81=94=E7=BD=91=E4=B8=8A=E5=BE=88=E9=9A=BE=E6=89=BE=
=E5=88=B0=E4=B8=80=E7=AF=87=E5=AF=B9=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=
=A1=A8=E8=BE=BE=E5=BC=8F=E8=AE=B2=E8=BF=B0=E7=9A=84=E6=AF=94=E8=BE=83=E5=85=
=A8=E9=9D=A2=E7=9A=84=E6=96=87=E7=AB=A0=E3=80=82=E8=BF=99=E4=B9=9F=E5=8F=AF=
=E8=83=BD=E6=98=AF=E4=B8=BA=E4=BB=80=E4=B9=88=E5=AF=B9=E6=AD=A4=E9=97=AE=E9=
=A2=98=E6=9C=89=E9=82=A3=E4=B9=88=E5=A4=9A=E7=9A=84=E8=AF=AF=E8=A7=A3=E7=9A=
=84=E5=8E=9F=E5=9B=A0=E3=80=82=E5=9C=A8=E8=BF=99=E7=AF=87=E6=96=87=E7=AB=A0=
=E4=B8=AD=EF=BC=8C=E6=88=91=E5=B0=86=E8=AF=95=E5=9B=BE=E4=BB=8E=E7=90=86=E8=
=AE=BA=E5=92=8C=E5=AE=9E=E8=B7=B5=E4=B8=A4=E4=B8=AA=E6=96=B9=E9=9D=A2=E6=80=
=BB=E7=BB=93=E8=BF=99=E4=BA=9B=E7=B2=BE=E5=BD=A9=E7=9A=84javascript=E7=BB=
=93=E6=9E=84=EF=BC=8C=E4=BB=96=E7=9A=84=E7=B2=BE=E5=8D=8E=E3=80=81=E9=B8=A1=
=E8=82=8B=E5=92=8C=E7=B3=9F=E7=B2=95=E3=80=82</P>
<P>In a nutshell, named function expressions are useful for one thing =
only -=20
<STRONG>descriptive function names in debuggers and profilers</STRONG>. =
Well,=20
there is also a possibility of using function names for recursion, but =
you will=20
soon see that this is often impractical nowadays. If you don=E2=80=99t =
care about=20
debugging experience, you have nothing to worry about. Otherwise, read =
on to see=20
some of the cross-browser glitches you would have to deal with and tips =
on how=20
work around them.</P>
<P>=E7=AE=80=E8=80=8C=E8=A8=80=E4=B9=8B=EF=BC=8C=E6=9C=89=E5=90=8D=E5=87=BD=
=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=8F=AA=E5=AF=B9=E4=B8=80=E4=BB=B6=E5=
=B7=A5=E4=BD=9C=E6=9C=89=E7=94=A8=EF=BC=8C=E5=9C=A8=E8=B0=83=E8=AF=95=E5=99=
=A8=E5=92=8C=E6=80=A7=E8=83=BD=E6=B5=8B=E8=AF=95=E5=99=A8=E4=B8=AD=E6=8F=8F=
=E8=BF=B0=E5=87=BD=E6=95=B0=E7=9A=84=E5=90=8D=E7=A7=B0=E3=80=82=E5=BD=93=E7=
=84=B6=E8=BF=98=E6=9C=89=E5=8F=AF=E8=83=BD=E5=9C=A8=E9=80=92=E5=BD=92=E8=B0=
=83=E7=94=A8=E4=B8=AD=E4=BD=BF=E7=94=A8=E5=87=BD=E6=95=B0=E5=90=8D=E7=A7=B0=
=EF=BC=8C=E4=BD=86=E6=98=AF=E4=BD=A0=E5=B0=86=E5=BE=88=E5=BF=AB=E7=9C=8B=E5=
=88=B0=E5=9C=A8=E5=BD=93=E4=B8=8B=E4=BB=96=E9=80=9A=E5=B8=B8=E4=B8=8D=E5=A4=
=A7=E5=AE=9E=E7=94=A8=E3=80=82=E5=A6=82=E6=9E=9C=E4=BD=A0=E4=B8=8D=E6=8B=85=
=E5=BF=83=E8=B0=83=E8=AF=95=E7=9A=84=E9=97=AE=E9=A2=98=EF=BC=8C=E9=82=A3=E4=
=B9=88=E4=BD=A0=E5=B0=B1=E4=B8=8D=E7=94=A8=E6=8B=85=E5=BF=83=E4=BA=86=EF=BC=
=8C=E7=94=9A=E8=87=B3=E4=B8=8D=E5=8E=BB=E4=BD=BF=E7=94=A8=E6=9C=89=E5=90=8D=
=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E3=80=82=E5=90=A6=E5=88=99=EF=
=BC=8C=E7=BB=A7=E7=BB=AD=E8=AF=BB=E4=B8=8B=E5=8E=BB=EF=BC=8C=E4=BD=A0=E5=B0=
=86=E7=9C=8B=E5=88=B0=E4=BD=A0=E5=8F=AF=E8=83=BD=E5=B7=B2=E7=BB=8F=E9=81=87=
=E5=88=B0=E7=9A=84=E8=B7=A8=E6=B5=8F=E8=A7=88=E5=99=A8=E9=97=AE=E9=A2=98=E5=
=92=8C=E4=B8=80=E4=BA=9B=E8=A7=A3=E5=86=B3=E8=BF=99=E4=BA=9B=E9=97=AE=E9=A2=
=98=E7=9A=84=E6=96=B9=E6=B3=95=E3=80=82</P>
<P>I=E2=80=99ll start with a general explanation of what function =
expressions are how=20
modern debuggers handle them. Feel free to skip to a <A=20
href=3D"http://www.cssrain.cn/demo/named%20function%20expression/Named%20=
function%20expressions%20demystified.htm#solution"=20
linkindex=3D"12">final solution</A>, which explains how to use these =
constructs=20
safely.</P>
<P>=E4=B8=8B=E9=9D=A2=E6=88=91=E4=BB=AC=E5=85=88=E6=9D=A5=E4=BB=8B=E7=BB=8D=
=E4=B8=80=E4=B8=8B=E4=BB=80=E4=B9=88=E6=98=AF=E5=87=BD=E6=95=B0=E8=A1=A8=E8=
=BE=BE=E5=BC=8F=EF=BC=8C=E5=92=8C=E7=8E=B0=E4=BB=A3=E7=9A=84=E8=B0=83=E8=AF=
=95=E5=99=A8=E5=A6=82=E4=BD=95=E5=A4=84=E7=90=86=E4=BB=96=E4=BB=AC=E5=91=A2=
=E3=80=82=E4=BD=A0=E4=B9=9F=E5=8F=AF=E4=BB=A5=E9=9A=8F=E6=97=B6=E8=B7=B3=E8=
=BD=AC=E5=88=B0=E6=9C=80=E5=90=8E=E7=9A=84=E8=A7=A3=E5=86=B3=E6=96=B9=E6=A1=
=88=EF=BC=8C=E9=82=A3=E9=87=8C=E5=B0=86=E8=AF=B4=E6=98=8E=E5=A6=82=E4=BD=95=
=E5=AE=89=E5=85=A8=E7=9A=84=E4=BD=BF=E7=94=A8=E8=BF=99=E4=BA=9B=E7=BB=93=E6=
=9E=84</P>
<H2 =
id=3Dfunction_expressions_vs_function_declarations>=E5=87=BD=E6=95=B0=E8=A1=
=A8=E8=BE=BE=E5=BC=8F=E5=92=8C=E5=87=BD=E6=95=B0=E5=AE=9A=E4=B9=89<A=20
name=3Dexpr-vs-decl></A></H2>
<P>One of the two most common ways to create a function object in =
ECMAScript is=20
by means of either <EM>Function Expression</EM> or <EM>Function=20
Declaration</EM>. The difference between two is <STRONG>rather=20
confusing</STRONG>. At least it was to me. The only thing ECMA specs =
make clear=20
is that <EM>Function Declaration</EM> must always have an =
<EM>Identifier</EM>=20
(or a function name, if you prefer), and <EM>Function Expression</EM> =
may omit=20
it:</P>
<P>=E5=9C=A8ECMAScript=E4=B8=AD=E6=9C=89=E4=B8=A4=E7=A7=8D=E7=AE=80=E5=8D=
=95=E7=9A=84=E5=88=9B=E5=BB=BA=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E7=9A=84=
=E6=96=B9=E6=B3=95=EF=BC=8C=E4=B8=80=E7=A7=8D=E6=98=AF=E5=87=BD=E6=95=B0=E8=
=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E4=B8=80=E7=A7=8D=E6=98=AF=E5=87=BD=E6=95=
=B0=E5=A3=B0=E6=98=8E=E3=80=82=E4=B8=A4=E8=80=85=E7=9A=84=E5=8C=BA=E5=88=AB=
=E8=AE=A9=E4=BA=BA=E6=AF=94=E8=BE=83=E5=9B=B0=E6=83=91=EF=BC=8C=E8=87=B3=E5=
=B0=91=E5=AF=B9=E6=88=91=E6=98=AF=E8=BF=99=E6=A0=B7=E3=80=82ECMS=E8=A7=84=
=E8=8C=83=E4=B8=AD=E5=94=AF=E4=B8=80=E6=BE=84=E6=B8=85=E4=BA=86=E7=9A=84=E6=
=98=AF=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E5=BF=85=E9=A1=BB=E5=90=AB=E6=9C=
=89=E4=B8=80=E4=B8=AA=E6=A0=87=E7=A4=BA=E7=AC=A6=EF=BC=88=E5=A6=82=E6=9E=9C=
=E4=BD=A0=E5=96=9C=E6=AC=A2=EF=BC=8C=E5=8F=AF=E4=BB=A5=E7=A7=B0=E4=BB=96=E4=
=B8=BA=E5=87=BD=E6=95=B0=E5=90=8D=EF=BC=89=EF=BC=8C=E4=BD=86=E6=98=AF=E5=87=
=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=8F=AF=E4=BB=A5=E7=9C=81=E7=95=A5=
=E4=BB=96=E3=80=82</P>
<BLOCKQUOTE>
  <P>FunctionDeclaration :<BR>function Identifier ( FormalParameterList=20
  <SUB>opt</SUB> ){ FunctionBody }</P>
  <P>FunctionExpression :<BR>function Identifier <SUB>opt</SUB> (=20
  FormalParameterList <SUB>opt</SUB> ){ FunctionBody }</P></BLOCKQUOTE>
<P>We can see that when identifier is omitted, that =
=E2=80=9Csomething=E2=80=9D can only be an=20
expression. But what if identifier is present? How can one tell whether =
it is a=20
function declaration or a function expression - they look identical =
after all?=20
It appears that ECMAScript differentiates between two based on a =
context. If a=20
<CODE>function foo(){}</CODE> is part of, say, assignment expression, it =
is=20
considered a function expression. If, on the other hand, <CODE>function=20
foo(){}</CODE> is contained in a function body or in a (top level of) =
program=20
itself - it is parsed as a function declaration.</P>
<P>=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=88=B0=EF=BC=8C=E5=BD=93=
=E6=A0=87=E7=A4=BA=E7=AC=A6=E8=A2=AB=E7=9C=81=E7=95=A5=E7=9A=84=E6=97=B6=E5=
=80=99=EF=BC=8C=E8=BF=99=E6=A0=B7=E7=9A=84=E7=BB=93=E6=9E=84=E5=8F=AA=E8=83=
=BD=E6=98=AF=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=
=E3=80=82=E4=BD=86=E6=98=AF=E5=BD=93=E6=A0=87=E7=A4=BA=E7=AC=A6=E5=87=BA=E7=
=8E=B0=E7=9A=84=E6=97=B6=E5=80=99=E6=83=85=E5=86=B5=E6=98=AF=E6=80=8E=E6=A0=
=B7=E7=9A=84=E5=91=A2=E3=80=82=E4=BB=96=E7=A9=B6=E7=AB=9F=E6=98=AF=E4=B8=80=
=E4=B8=AA=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E8=BF=98=E6=98=AF=E4=B8=80=E4=
=B8=AA=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=91=A2=EF=BC=8C=E4=BB=
=96=E4=BB=AC=E7=9C=8B=E4=B8=8A=E5=8E=BB=E6=98=AF=E5=AE=8C=E5=85=A8=E4=B8=80=
=E6=A0=B7=E7=9A=84=E3=80=82=E4=BD=86=E6=98=AFECMAScript=E6=98=AF=E9=80=9A=
=E8=BF=87=E4=B8=8A=E4=B8=8B=E6=96=87=E6=9D=A5=E5=8C=BA=E5=88=86=E4=B8=A4=E8=
=80=85=E7=9A=84=E3=80=82=E5=A6=82=E6=9E=9Cfunction=20
foo(){}=E6=98=AF=E4=B8=80=E4=B8=AA=E8=B5=8B=E5=80=BC=E8=A1=A8=E8=BE=BE=E5=
=BC=8F=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86=EF=BC=8C=E4=BB=96=E5=B0=B1=E8=A2=
=AB=E8=AE=A4=E4=B8=BA=E6=98=AF=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=
=E3=80=82=E7=9B=B8=E5=8F=8D=EF=BC=8C=E5=A6=82=E6=9E=9Cfunction=20
foo(){}=E5=8C=85=E5=90=AB=E5=9C=A8=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E4=
=BD=93=E4=B8=AD=EF=BC=8C=E6=88=96=E8=80=85=E5=9C=A8=E7=A8=8B=E5=BA=8F=E7=9A=
=84=E6=9C=80=E4=B8=8A=E5=B1=82=E7=9A=84=E4=BB=A3=E7=A0=81=E4=B8=AD=EF=BC=8C=
=E4=BB=96=E5=B0=B1=E8=A2=AB=E8=A7=A3=E9=87=8A=E6=88=90=E4=B8=BA=E4=B8=80=E4=
=B8=AA=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
foo</SPAN><SPAN class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>// =
=E5=A3=B0=E6=98=8E=EF=BC=8C=E5=9B=A0=E4=B8=BA=E4=BD=9C=E4=B8=BA=E6=9C=80=E4=
=B8=8A=E5=B1=82=E7=A8=8B=E5=BA=8F=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86decl=
aration, since it's part of a </SPAN><EM><SPAN =
class=3Dcom>Program</SPAN></EM><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> bar </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E5=9B=A0=E4=B8=BA=E6=98=AF=E5=A4=8D=E5=
=88=B6=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86expr=
ession, since it's part of an </SPAN><EM><SPAN =
class=3Dcom>AssignmentExpression</SPAN></EM><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dkwd>new</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
bar</SPAN><SPAN class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>// =
=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E5=9B=A0=E4=B8=BA=E4=BB=96=E6=98=AFN=
ew=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86=E3=80=82=
expression, since it's part of a </SPAN><EM><SPAN =
class=3Dcom>NewExpression</SPAN></EM><SPAN class=3Dpln><BR><BR>&nbsp; =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
=E5=A3=B0=E6=98=8E=EF=BC=8C=E5=9B=A0=E4=B8=BA=E6=98=AF=E5=87=BD=E6=95=B0=E5=
=9B=BE=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86declaration, since it's part =
of a </SPAN><EM><SPAN class=3Dcom>FunctionBody</SPAN></EM><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>})();</SPAN></PRE>
<P>There=E2=80=99s a subtle difference in behavior of declarations and =
expressions.</P>
<P>=E5=A3=B0=E6=98=8E=E5=92=8C=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=9C=A8=E4=BD=9C=
=E7=94=A8=E4=B8=8A=E6=9C=89=E8=BF=99=E7=BB=86=E5=BE=AE=E7=9A=84=E5=B7=AE=E5=
=88=AB=E3=80=82</P>
<P>First of all, function declarations are parsed and evaluated before =
any other=20
expressions are. Even if declaration is positioned last in a source, it =
will be=20
evaluated <STRONG>foremost any other expressions</STRONG> contained in a =
scope.=20
The following example demonstrates how <CODE>fn</CODE> function is =
already=20
defined by the time <CODE>alert</CODE> is executed, even though =
it=E2=80=99s being=20
declared right after it:</P>
<P>=E9=A6=96=E5=85=88=EF=BC=8C=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E6=98=AF=
=E5=9C=A8=E6=89=80=E6=9C=89=E8=A1=A8=E8=BE=BE=E5=BC=8F=E4=B9=8B=E5=89=8D=E8=
=A2=AB=E8=A7=A3=E6=9E=90=E5=92=8C=E6=B1=82=E5=80=BC=E3=80=82<STRONG>=E5=8D=
=B3=E4=BD=BF=E5=A3=B0=E6=98=8E=E8=A2=AB=E6=94=BE=E5=9C=A8=E4=BB=A3=E7=A0=81=
=E7=9A=84=E6=9C=80=E5=90=8E=EF=BC=8C=E4=BB=96=E4=B9=9F=E4=BC=9A=E5=9C=A8=E5=
=8C=85=E5=90=AB=E5=AE=83=E7=9A=84=E4=BD=9C=E7=94=A8=E5=9F=9F=E5=86=85=E7=9A=
=84=E6=89=80=E6=9C=89=E8=A1=A8=E8=BE=BE=E5=BC=8F=E4=B9=8B=E5=89=8D=E8=A2=AB=
=E6=B1=82=E5=80=BC</STRONG>=E3=80=82=E4=B8=8B=E9=9D=A2=E7=9A=84=E4=BE=8B=E5=
=AD=90=E5=B0=86=E8=AF=B4=E6=98=8E=E5=8D=B3=E4=BD=BFfn=E5=87=BD=E6=95=B0=E5=
=9C=A8alert=E6=89=A7=E8=A1=8C=E4=B9=8B=E5=90=8E=E6=89=8D=E8=A2=AB=E5=A3=B0=
=E6=98=8E=EF=BC=8C=E4=BD=86=E6=98=AF=E5=9C=A8alert=E8=A2=AB=E6=89=A7=E8=A1=
=8C=E7=9A=84=E6=97=B6=E5=80=99fn=E5=87=BD=E6=95=B0=E5=B7=B2=E7=BB=8F=E8=A2=
=AB=E5=AE=9A=E4=B9=89=E4=BA=86=E3=80=82</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; alert</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>fn</SPAN><SPAN =
class=3Dpun>());</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> fn</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'Hello world!'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN></PRE>
<P>Another important trait of function declarations is that declaring =
them=20
conditionally is non-standardized and varies across different =
environments. You=20
should never rely on functions being declared conditionally and use =
function=20
expressions instead.</P>
<P>=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E7=9A=84=E5=8F=A6=E5=A4=96=E4=B8=80=
=E4=B8=AA=E9=87=8D=E8=A6=81=E7=9A=84=E7=89=B9=E7=82=B9=E6=98=AF=EF=BC=8C=E5=
=9C=A8=E6=9D=A1=E4=BB=B6=E8=AF=AD=E5=8F=A5=E4=B8=AD=E5=A3=B0=E6=98=8E=E4=BB=
=96=E4=BB=AC=E7=9A=84=E6=83=85=E5=86=B5=E5=9C=A8ECMA=E6=A0=87=E5=87=86=E4=
=B8=AD=E6=98=AF=E6=B2=A1=E6=9C=89=E8=AF=B4=E6=98=8E=E7=9A=84=EF=BC=8C=E5=B9=
=B6=E4=B8=94=E5=9C=A8=E4=B8=8D=E5=90=8C=E7=9A=84=E7=8E=AF=E5=A2=83=E4=B8=AD=
=EF=BC=88=E4=B9=9F=E5=B0=B1=E6=98=AF=E4=B8=8D=E5=90=8C=E7=9A=84=E6=B5=8F=E8=
=A7=88=E5=99=A8=EF=BC=89=E4=B8=AD=E6=98=AF=E4=B8=8D=E5=90=8C=E7=9A=84=E3=80=
=82=E5=9B=A0=E6=AD=A4=E4=BD=A0=E4=B8=8D=E8=83=BD=E4=BE=9D=E8=B5=96=E5=87=BD=
=E6=95=B0=E7=9A=84=E6=9D=A1=E4=BB=B6=E5=A3=B0=E6=98=8E=EF=BC=8C=E8=80=8C=E6=
=98=AF=E5=BA=94=E8=AF=A5=E4=BD=BF=E7=94=A8=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=
=BE=E5=BC=8F=E6=9D=A5=E4=BB=A3=E6=9B=BF=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dcom>// </SPAN><STRONG><SPAN =
class=3Dcom>=E5=8D=83=E4=B8=87=E4=B8=8D=E8=A6=81=E8=BF=99=E6=A0=B7=E5=81=9A=
Never do this!</SPAN></STRONG><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// =
=E6=9C=89=E4=BA=9B=E6=B5=8F=E8=A7=88=E5=99=A8=E4=BC=9A=E5=A3=B0=E8=BF=94=E5=
=9B=9E=E2=80=9Cfirst=E2=80=9D=E7=9A=84foo=E5=87=BD=E6=95=B0Some browsers =
will declare `foo` as the one returning 'first', </SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dcom>// =
=E6=9C=89=E4=BA=9B=E6=B5=8F=E8=A7=88=E5=99=A8=E5=88=99=E4=BC=9A=E5=A3=B0=E6=
=98=8E=E8=BF=94=E5=9B=9E=E2=80=9Csecond=E2=80=9D=E7=9A=84foo=E5=87=BD=E6=95=
=B0while others - returning 'second'</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dkwd>if</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>true</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
foo</SPAN><SPAN class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'first'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dkwd>else</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'second'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>//=E4=BD=9C=E4=B8=BA=E6=9B=BF=E4=BB=A3=E4=BD=A0=E5=8F=AF=E4=BB=
=A5=E4=BD=BF=E7=94=A8=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F =
Instead, use function expressions:</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>true</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; foo </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>()</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dstr>'first'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dkwd>else</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; foo </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>()</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dstr>'second'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN></PRE>
<P>Function expressions can actually be seen quite often. A common =
pattern in=20
web development is to =E2=80=9Cfork=E2=80=9D function definitions based =
on some kind of a=20
feature test, allowing for the best performance. Since such forking =
usually=20
happens in the same scope, it is almost always necessary to use function =

expressions. After all, as we know by now, function declarations should =
not be=20
executed conditionally:</P>
<P>=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=8F=AF=E8=83=BD=E6=9B=B4=
=E5=B8=B8=E8=A7=81=E4=B8=80=E4=BA=9B=E3=80=82=E5=9C=A8web=E5=BC=80=E5=8F=91=
=E4=B8=AD=E7=9A=84=E4=B8=80=E4=B8=AA=E6=99=AE=E9=80=9A=E7=9A=84=E6=A8=A1=E5=
=BC=8F=E5=B0=B1=E6=98=AF=E6=A0=B9=E6=8D=AE=E4=B8=80=E4=BA=9B=E6=9F=90=E7=A7=
=8D=E5=8A=9F=E8=83=BD=E6=B5=8B=E8=AF=95=E7=9A=84=E6=83=85=E5=86=B5=E6=9D=A5=
fork=E5=87=BD=E6=95=B0=E5=AE=9A=E4=B9=89=EF=BC=8C=E5=85=81=E8=AE=B8=E8=BE=
=BE=E5=88=B0=E6=9C=80=E5=A5=BD=E7=9A=84=E6=80=A7=E8=83=BD=E3=80=82=E6=97=A2=
=E7=84=B6=E8=BF=99=E4=B8=AAfork=E9=80=9A=E5=B8=B8=E5=8F=91=E7=94=9F=E5=9C=
=A8=E5=90=8C=E4=B8=80=E4=B8=AA=E4=BD=9C=E7=94=A8=E5=9F=9F=E5=86=85=EF=BC=8C=
=E6=89=80=E4=BB=A5=E4=BB=96=E9=9C=80=E8=A6=81=E4=BD=BF=E7=94=A8=E5=87=BD=E6=
=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E3=80=82=E6=AF=95=E7=AB=9F=EF=BC=8C=E5=A6=
=82=E6=88=91=E4=BB=AC=E6=89=80=E7=9F=A5=EF=BC=8C=E5=87=BD=E6=95=B0=E5=AE=9A=
=E4=B9=89=E4=B8=8D=E5=BA=94=E8=AF=A5=E8=A2=AB=E6=9D=A1=E4=BB=B6=E6=89=A7=E8=
=A1=8C</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN =
class=3Dpln>&nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> =
contans </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> docEl </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> document</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>documentElement</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> =
docEl</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>compareDocumentPosition </SPAN><SPAN =
class=3Dpun>!=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'undefined'</SPAN><SPAN class=3Dpun>)</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>el</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> =
b</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>el</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN =
class=3Dpln>compareDocumentPosition</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>b</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>&amp;</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>16</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>!=3D=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>0</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> =
docEl</SPAN><SPAN class=3Dpun>.</SPAN><SPAN class=3Dpln>contains =
</SPAN><SPAN class=3Dpun>!=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'undefined'</SPAN><SPAN class=3Dpun>)</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>el</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> =
b</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> el </SPAN><SPAN =
class=3Dpun>!=3D=3D</SPAN><SPAN class=3Dpln> b </SPAN><SPAN =
class=3Dpun>&amp;&amp;</SPAN><SPAN class=3Dpln> el</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>contains</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>b</SPAN><SPAN =
class=3Dpun>);</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>el</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> =
b</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>el </SPAN><SPAN =
class=3Dpun>=3D=3D=3D</SPAN><SPAN class=3Dpln> b</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>false</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>while</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>el </SPAN><SPAN =
class=3Dpun>!=3D</SPAN><SPAN class=3Dpln> b </SPAN><SPAN =
class=3Dpun>&amp;&amp;</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>b </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> b</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>parentNode</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>!=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>null</SPAN><SPAN class=3Dpun>);</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> el </SPAN><SPAN =
class=3Dpun>=3D=3D=3D</SPAN><SPAN class=3Dpln> b</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<H2 =
id=3Dnamed_function_expressions>=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=
=A8=E8=BE=BE=E5=BC=8F <A name=3Dnamed-expr></A></H2>
<P>Quite obviously, when a function expression has a name (technically - =

<EM>Identifier</EM>), it is called a <STRONG>named function =
expression</STRONG>.=20
What you=E2=80=99ve seen in the very first example - <CODE>var bar =3D =
function=20
foo(){};</CODE> - was exactly that - a named function expression with=20
<CODE>foo</CODE> being a function name. An important detail to remember =
is that=20
this name is <STRONG>only available in the scope of a newly-defined=20
function</STRONG>; specs mandate that an identifier should not be =
available to=20
an enclosing scope:</P>
<P>=E9=9D=9E=E5=B8=B8=E6=98=BE=E7=84=B6=E9=82=A3=EF=BC=8C=E5=BD=93=E4=B8=80=
=E4=B8=AA=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=90=AB=E6=9C=89=E5=
=87=BD=E6=95=B0=E5=90=8D=EF=BC=88=E4=BB=8E=E6=8A=80=E6=9C=AF=E4=B8=8A=E8=AE=
=B2=E5=B0=B1=E6=98=AF=E4=B8=80=E4=B8=AA=E6=A0=87=E7=A4=BA=E7=AC=A6=EF=BC=89=
=EF=BC=8C=E4=BB=96=E5=B0=B1=E8=A2=AB=E7=A7=B0=E4=BD=9C=E6=9C=89=E5=90=8D=E5=
=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E3=80=82=E5=9C=A8=E4=BD=A0=E7=9C=
=8B=E5=88=B0=E7=9A=84=E7=AC=AC=E4=B8=80=E4=B8=AA=E4=BE=8B=E5=AD=90=E4=B8=AD=
 var bar=3Dfunction=20
foo(){}=E5=B0=B1=E6=98=AF=E8=BF=99=E6=A0=B7=EF=BC=8C=E4=BB=96=E6=98=AF=E4=
=B8=80=E4=B8=AA=E4=BB=A5foo=E4=BD=9C=E4=B8=BA=E5=87=BD=E6=95=B0=E5=90=8D=E7=
=9A=84=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E3=80=
=82<STRONG>=E6=9C=80=E9=87=8D=E8=A6=81=E7=9A=84=E4=B8=80=E4=B8=AA=E7=BB=86=
=E8=8A=82=E5=B0=B1=E6=98=AF=E8=BF=99=E4=B8=AA=E5=87=BD=E6=95=B0=E5=90=8D=E5=
=8F=AA=E6=9C=89=E5=9C=A8=E6=96=B0=E5=AE=9A=E4=B9=89=E7=9A=84=E5=87=BD=E6=95=
=B0=E7=9A=84=E4=BD=9C=E7=94=A8=E5=9F=9F=E5=86=85=E6=89=8D=E5=8F=AF=E8=AE=BF=
=E9=97=AE=EF=BC=8CECMA=E8=A6=81=E6=B1=82=E4=B8=80=E4=B8=AA=E6=A0=87=E7=A4=
=BA=E7=AC=A6=E4=B8=8D=E5=BA=94=E8=AF=A5=E8=A2=AB=E4=B8=80=E4=B8=AA=E5=B0=81=
=E9=97=AD=E7=9A=84=E4=BD=9C=E7=94=A8=E5=9F=9F=E6=89=80=E8=AE=BF=E9=97=AE<=
/STRONG>=E3=80=82</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN =
class=3Dpln>&nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> =
f </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
=E2=80=9Cfoo=E2=80=9D=E5=9C=A8=E5=86=85=E9=83=A8=E4=BD=9C=E7=94=A8=E5=9F=9F=
=E5=8F=AF=E4=BB=A5=E8=A2=AB=E8=AE=BF=E9=97=AE "foo" is available in this =
inner scope</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>};</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>//=E2=80=98foo=E2=80=99=E5=9C=A8=E5=A4=96=E9=83=A8=E4=B8=8D=E5=
=8F=AF=E8=A7=81 `foo` is never visible "outside"</SPAN><SPAN =
class=3Dpln> <BR>&nbsp; </SPAN><SPAN class=3Dkwd>typeof</SPAN><SPAN =
class=3Dpln> foo</SPAN><SPAN class=3Dpun>;</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dcom>// "undefined"</SPAN><SPAN =
class=3Dpln><BR>&nbsp; f</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dcom>// "function"</SPAN></PRE>
<P>So what=E2=80=99s so special about these named function expressions? =
Why would we=20
want to give them names at all? </P>
<P>It appears that named functions make for a much more pleasant =
debugging=20
experience. When debugging an application, having a call stack with =
descriptive=20
items makes a huge difference.</P>
<P>=E5=9B=A0=E6=AD=A4=EF=BC=8C=E4=B8=BA=E4=BB=80=E4=B9=88=E8=BF=99=E4=BA=9B=
=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=A6=82=E6=
=AD=A4=E7=89=B9=E5=88=AB=EF=BC=9F=E4=B8=BA=E4=BB=80=E4=B9=88=E6=88=91=E4=BB=
=AC=E6=83=B3=E8=A6=81=E7=BB=99=E4=BB=96=E4=BB=AC=E5=90=8D=E5=AD=97=E5=91=A2=
=E3=80=82</P>
<P>=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=88=B0=E6=9C=89=E5=91=BD=E5=90=8D=E7=9A=84=
=E5=87=BD=E6=95=B0=E5=9C=A8=E8=B0=83=E8=AF=95=E8=BF=87=E7=A8=8B=E4=B8=AD=E5=
=8F=AF=E8=83=BD=E6=9B=B4=E5=8A=A0=E6=96=B9=E4=BE=BF=E4=B8=80=E4=BA=9B=E3=80=
=82=E5=BD=93=E8=B0=83=E8=AF=95=E4=B8=80=E4=B8=AA=E5=BA=94=E7=94=A8=E7=A8=8B=
=E5=BA=8F=E7=9A=84=E6=97=B6=E5=80=99=E6=8B=A5=E6=9C=89=E4=B8=80=E4=B8=AA=E5=
=90=AB=E6=9C=89=E6=8F=8F=E8=BF=B0=E9=A1=B9=E7=9A=84=E8=B0=83=E7=94=A8=E6=A0=
=88=E4=BC=9A=E6=9C=89=E5=BE=88=E5=A4=A7=E7=9A=84=E4=B8=8D=E5=90=8C</P>
<H2 =
id=3Dfunction_names_in_debuggers>=E8=B0=83=E8=AF=95=E5=99=A8=E4=B8=AD=E7=9A=
=84=E5=87=BD=E6=95=B0=E5=90=8D <A name=3Dnames-in-debuggers></A></H2>
<P>When a function has a corresponding identifier, debuggers show that=20
identifier as a function name, when inspecting call stack. Some =
debuggers (e.g.=20
Firebug) helpfully show names of even anonymous functions - making them=20
identical to names of variables that functions are assigned to. =
Unfortunately,=20
these debuggers usually rely on simple parsing rules; Such extraction is =
usually=20
quite fragile and often produces false results. </P>
<P>=E5=BD=93=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E6=9C=89=E4=B8=80=E4=B8=AA=
=E7=9B=B8=E5=BA=94=E7=9A=84=E6=A0=87=E7=A4=BA=E7=AC=A6=E7=9A=84=E6=97=B6=E5=
=80=99=EF=BC=8C=E5=BD=93=E6=A3=80=E6=9F=A5=E8=B0=83=E7=94=A8=E5=A0=86=E6=A0=
=88=E7=9A=84=E6=97=B6=E5=80=99=E8=B0=83=E8=AF=95=E5=99=A8=E6=8A=8A=E8=BF=99=
=E4=B8=AA=E6=A0=87=E7=A4=BA=E7=AC=A6=E6=98=BE=E7=A4=BA=E4=B8=BA=E5=87=BD=E6=
=95=B0=E5=90=8D=E3=80=82=E6=9C=89=E4=BA=9B=E8=B0=83=E8=AF=95=E5=99=A8=EF=BC=
=88=E4=BE=8B=E5=A6=82Firebug=EF=BC=89=E5=B0=86=E6=98=BE=E7=A4=BA=E7=94=9A=
=E8=87=B3=E6=98=AF=E5=8C=BF=E5=90=8D=E5=87=BD=E6=95=B0=E7=9A=84=E5=90=8D=E7=
=A7=B0=EF=BC=8C=E4=BD=BF=E4=BB=96=E4=BB=AC=E7=9A=84=E5=90=8D=E5=AD=97=E5=92=
=8C=E5=87=BD=E6=95=B0=E8=A2=AB=E8=B5=8B=E5=80=BC=E7=BB=99=E7=9A=84=E5=8F=98=
=E9=87=8F=E7=9A=84=E5=90=8D=E5=AD=97=E4=B8=80=E8=87=B4=E3=80=82=E4=B8=8D=E5=
=B9=B8=E7=9A=84=E6=98=AF=EF=BC=8C=E8=BF=99=E4=BA=9B=E8=B0=83=E8=AF=95=E5=99=
=A8=E9=80=9A=E5=B8=B8=E4=BE=9D=E8=B5=96=E4=BA=8E=E7=AE=80=E5=8D=95=E7=9A=84=
=E8=A7=A3=E9=87=8A=E8=A7=84=E5=88=99=EF=BC=9B=E8=BF=99=E4=BA=9B=E6=8F=90=E5=
=8F=96=E5=87=BA=E6=9D=A5=E7=9A=84=E5=90=8D=E7=A7=B0=E9=80=9A=E5=B8=B8=E6=98=
=AF=E9=9D=9E=E5=B8=B8=E4=B8=8D=E7=A8=B3=E5=AE=9A=E7=9A=84=EF=BC=8C=E8=80=8C=
=E4=B8=94=E9=80=9A=E5=B8=B8=E4=BA=A7=E7=94=9F=E9=94=99=E8=AF=AF=E7=9A=84=E7=
=BB=93=E6=9E=9C</P>
<P>Let=E2=80=99s look at a simple example:</P>
<P>=E8=AE=A9=E6=88=91=E4=BB=AC=E7=9C=8B=E4=B8=80=E4=B8=AA=E7=AE=80=E5=8D=95=
=E7=9A=84=E4=BE=8B=E5=AD=90</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>debugger</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dcom>// =
=E8=BF=99=E9=87=8C=E6=88=91=E4=BB=AC=E7=94=A8=E5=87=BD=E6=95=B0=E5=A3=B0=E6=
=98=8E=E6=9D=A5=E5=AE=9A=E4=B9=89=E6=89=80=E6=9C=893=E4=B8=AA=E5=87=BD=E6=
=95=B0Here, we used function declarations when defining all of 3 =
functions</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dcom>// =
=E5=BD=93=E8=B0=83=E8=AF=95=E5=99=A8=E5=81=9C=E6=AD=A2=E5=9C=A8`debugger`=
=E8=AF=AD=E5=8F=A5=E7=9A=84=E6=97=B6=E5=80=99When debugger stops at the =
`debugger` statement, </SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>//=E8=B0=83=E7=94=A8=E5=A0=86=E6=A0=88=E7=9C=8B=E4=B8=8A=E5=8E=
=BB=E9=9D=9E=E5=B8=B8=E5=85=B7=E6=9C=89=E6=8F=8F=E8=BF=B0=E6=80=A7=E7=9A=84=
 the call stack (in Firebug) looks quite descriptive:</SPAN><SPAN =
class=3Dpln><BR>&nbsp; baz<BR>&nbsp; bar<BR>&nbsp; foo<BR>&nbsp; =
expr_test</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>html</SPAN><SPAN class=3Dpun>()</SPAN></PRE>
<P>We can see that <CODE>foo</CODE> called <CODE>bar</CODE> which in its =
turn=20
called <CODE>baz</CODE> (and that <CODE>foo</CODE> itself was called =
from the=20
global scope of <CODE>expr_test.html</CODE> document). What=E2=80=99s =
really nice, is=20
that Firebug manages to parse the =E2=80=9Cname=E2=80=9D of a function =
even when an anonymous=20
expression is used:</P>
<P>=E6=88=91=E4=BB=AC=E7=9C=8B=E4=BB=A5=E7=9C=8B=E5=88=B0=EF=BC=8Cfoo=E8=B0=
=83=E7=94=A8bar=EF=BC=8Cbar=E8=B0=83=E7=94=A8baz=EF=BC=8Cfoo=E6=9C=AC=E8=BA=
=AB=E6=98=AF=E4=BB=8Eexpr_test.html=E7=9A=84=E5=85=A8=E5=B1=80=E4=BD=9C=E7=
=94=A8=E5=9F=9F=E4=B8=AD=E8=A2=AB=E8=B0=83=E7=94=A8=E7=9A=84=E3=80=82Fire=
bug=E9=9D=9E=E5=B8=B8=E7=AA=81=E5=87=BA=E7=9A=84=E4=B8=80=E7=82=B9=E6=98=AF=
=E5=8D=B3=E6=98=AF=E4=BD=BF=E7=94=A8=E4=B8=80=E4=B8=AA=E5=8C=BF=E5=90=8D=E7=
=9A=84=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E4=BB=96=E9=83=BD=E8=AF=95=E5=9B=
=BE=E5=8E=BB=E8=A7=A3=E9=87=8A=E5=87=BD=E6=95=B0=E5=90=8D</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
foo</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
bar</SPAN><SPAN class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> bar </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>debugger</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dcom>// =
=E8=B0=83=E7=94=A8=E5=A0=86=E6=A0=88Call stack</SPAN><SPAN =
class=3Dpln><BR>&nbsp; baz<BR>&nbsp; bar</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln><BR>&nbsp; foo<BR>&nbsp; =
expr_test</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>html</SPAN><SPAN class=3Dpun>()</SPAN></PRE>
<P>What=E2=80=99s not very nice, though, is that if a function =
expression gets any more=20
complex (which, in real life, it almost always is) all of the =
debugger=E2=80=99s efforts=20
turn out to be pretty useless; we end up with a shiny question mark in =
place of=20
a function name</P>
<P>=E4=BD=86=E6=98=AF=E8=B0=83=E8=AF=95=E5=99=A8=E8=BF=98=E4=B8=8D=E6=98=AF=
=E5=BE=88=E5=AE=8C=E7=BE=8E=EF=BC=8C=E5=BD=93=E5=87=BD=E6=95=B0=E8=A1=A8=E8=
=BE=BE=E5=BC=8F=E5=8F=98=E5=BE=97=E9=9D=9E=E5=B8=B8=E5=A4=8D=E6=9D=82=E7=9A=
=84=E6=97=B6=E5=80=99=EF=BC=8C=E8=BF=99=E4=BA=9B=E8=B0=83=E8=AF=95=E5=99=A8=
=E5=B0=B1=E5=BE=88=E9=9A=BE=E5=8E=BB=E8=A7=A3=E9=87=8A=E8=BF=99=E4=BA=9B=E5=
=87=BD=E6=95=B0=E5=90=8D=EF=BC=8C=E9=80=9A=E5=B8=B8=E6=98=AF=E4=BB=A5=E4=B8=
=80=E4=B8=AA=E9=97=AE=E5=8F=B7=E6=9D=A5=E4=BB=A3=E6=9B=BF=E5=87=BD=E6=95=B0=
=E5=90=8D</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN =
class=3Dpln>&nbsp; </SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpln> foo</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> bar </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>window</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>addEventListener</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>window</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>attachEvent</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>()</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
baz</SPAN><SPAN class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>})();</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpln> baz</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>debugger</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dcom>// Call =
stack</SPAN><SPAN class=3Dpln><BR>&nbsp; baz<BR>&nbsp; </SPAN><SPAN =
class=3Dpun>(?)()</SPAN><SPAN class=3Dpln><BR>&nbsp; foo<BR>&nbsp; =
expr_test</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>html</SPAN><SPAN class=3Dpun>()</SPAN></PRE>
<P>Another confusion appears when a function is being assigned to more =
than one=20
variable:</P>
<P>=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E4=BB=A4=E4=BA=BA=E8=BF=B7=E6=83=91=
=E7=9A=84=E4=BA=8B=E6=83=85=E6=98=AF=EF=BC=8C=E5=BD=93=E4=B8=80=E4=B8=AA=E5=
=87=BD=E6=95=B0=E8=A2=AB=E8=B5=8B=E5=80=BC=E7=BB=99=E4=B8=8D=E6=AD=A2=E4=B8=
=80=E4=B8=AA=E5=8F=98=E9=87=8F</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> foo</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> bar </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>debugger</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>};</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN =
class=3Dpln> baz </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> =
bar</SPAN><SPAN class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; bar =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>()</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln> <BR>&nbsp; &nbsp; =
alert</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dstr>'spoofed'</SPAN><SPAN class=3Dpun>);</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN =
class=3Dpln><BR>&nbsp; foo</SPAN><SPAN class=3Dpun>();</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dcom>// Call =
stack:</SPAN><SPAN class=3Dpln><BR>&nbsp; bar</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln><BR>&nbsp; foo<BR>&nbsp; =
expr_test</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>html</SPAN><SPAN class=3Dpun>()</SPAN></PRE>
<P>You can see call stack showing that <CODE>foo</CODE> invoked=20
<CODE>bar</CODE>. Clearly, that=E2=80=99s not what has happened. The =
confusion is due to=20
the fact that <CODE>baz</CODE> was =E2=80=9Cexchanged=E2=80=9D =
references with another function=20
- the one alerting =E2=80=9Cspoofed=E2=80=9D. As you can see, such =
parsing - while great in=20
simple cases - is often useless in any non-trivial script. </P>
<P>=E4=BD=A0=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=88=B0=E8=B0=83=E7=94=A8=E6=A0=88=
=E6=98=BE=E7=A4=BAfoo=E8=B0=83=E7=94=A8bar=E3=80=82=E6=98=BE=E7=84=B6=EF=BC=
=8C=E5=88=9A=E6=89=8D=E5=8F=91=E7=94=9F=E5=9C=B0=E4=B8=8D=E6=98=AF=E8=BF=99=
=E6=A0=B7=E3=80=82=E5=BC=95=E8=B5=B7=E8=BF=99=E7=A7=8D=E5=9B=B0=E6=83=91=E6=
=98=AF=E5=9B=A0=E4=B8=BAbaz=E5=BC=95=E7=94=A8=E4=BA=86=E5=8F=A6=E5=A4=96=E4=
=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0---=E6=8F=90=E7=A4=BA=20
=E2=80=9Cspoofed=E2=80=9D=E7=9A=84=E9=82=A3=E4=B8=AA=E5=87=BD=E6=95=B0=E3=
=80=82=E5=B0=B1=E5=A6=82=E4=BD=A0=E6=89=80=E7=9C=8B=E5=88=B0=E7=9A=84=EF=BC=
=8C=E8=BF=99=E4=BA=9B=E8=A7=A3=E9=87=8A=E8=99=BD=E7=84=B6=E5=9C=A8=E7=AE=80=
=E5=8D=95=E7=9A=84=E6=83=85=E5=86=B5=E4=B8=8B=E9=9D=9E=E5=B8=B8=E6=9C=89=E7=
=94=A8=EF=BC=8C=E4=BD=86=E6=98=AF=E5=9C=A8=E5=A4=8D=E6=9D=82=E7=9A=84=E8=84=
=9A=E6=9C=AC=E4=B8=AD=E5=8D=B4=E5=9F=BA=E6=9C=AC=E4=B8=8A=E6=B2=A1=E4=BB=80=
=E4=B9=88=E7=94=A8=E3=80=82</P>
<P>What it all boils down to is the fact that named <STRONG>function =
expressions=20
is the only way to get a truly robust stack inspection</STRONG>. =
Let=E2=80=99s rewrite=20
our previous example with named functions in mind. Notice how both of =
the=20
functions returning from self-executing wrapper, are named as=20
<CODE>bar</CODE>:</P>
<P>=E5=BD=92=E6=A0=B9=E7=BB=93=E5=BA=95=EF=BC=8C=E6=9C=89=E5=90=8D=E5=87=BD=
=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=AE=9E=E9=99=85=E4=B8=8A=E6=98=AF=E5=
=BE=97=E5=88=B0=E7=9C=9F=E6=AD=A3=E7=9A=84=E8=B0=83=E7=94=A8=E6=A0=88=E6=A3=
=80=E6=9F=A5=E7=9A=84=E5=94=AF=E4=B8=80=E6=96=B9=E6=B3=95=E3=80=82=E8=AE=A9=
=E6=88=91=E4=BB=AC=E7=94=A8=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=
=BE=BE=E5=BC=8F=E6=9D=A5=E9=87=8D=E5=86=99=E6=88=91=E4=BB=AC=E5=89=8D=E9=9D=
=A2=E7=9A=84=E4=BE=8B=E5=AD=90=E3=80=82=E8=AF=B7=E6=B3=A8=E6=84=8F=EF=BC=8C=
=E4=B8=A4=E4=B8=AA=E4=BB=8E=E8=87=AA=E6=89=A7=E8=A1=8C=E5=8C=85=E8=A3=B9=E4=
=B8=AD=E8=BF=94=E5=9B=9E=E7=9A=84=E5=87=BD=E6=95=B0=E9=83=BD=E6=9C=89=E5=90=
=8D=E4=B8=BAbar</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN =
class=3Dpln>&nbsp; </SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpln> foo</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> bar </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>window</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>addEventListener</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>window</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>attachEvent</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> bar</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> baz</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
baz</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>debugger</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; foo</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// And, once again, we have a descriptive call =
stack!</SPAN><SPAN class=3Dpln><BR>&nbsp; baz<BR>&nbsp; bar<BR>&nbsp; =
foo<BR>&nbsp; expr_test</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>html</SPAN><SPAN class=3Dpun>()</SPAN></PRE>
<P>Before we start dancing happily celebrating this holy grail finding, =
I=E2=80=99d like=20
to bring a beloved JScript into the picture.</P>
<P>=E5=9C=A8=E6=88=91=E4=BB=AC=E5=BC=80=E5=A7=8B=E8=B7=B3=E8=88=9E=E5=BA=86=
=E7=A5=9D=E6=89=BE=E5=88=B0=E8=BF=99=E4=B8=AA=E6=96=B9=E6=B3=95=E4=B9=8B=E5=
=89=8D=EF=BC=8C=E6=88=91=E4=BB=AC=E8=BF=98=E6=98=AF=E5=85=88=E6=9D=A5=E7=9C=
=8B=E7=9C=8BJScript=E4=B8=AD=E7=9A=84=E6=83=85=E5=86=B5=E6=98=AF=E5=A6=82=
=E4=BD=95=E7=9A=84</P>
<H2 id=3Djscript_bugs>JScript bugs <A name=3Djscript-bugs></A></H2>
<P>Unfortunately, JScript (i.e. Internet Explorer=E2=80=99s ECMAScript =
implementation)=20
seriously messed up named function expressions. JScript is responsible =
for named=20
function expressions <STRONG>being recommended against</STRONG> by many =
people=20
these days.</P>
<P>=E4=B8=8D=E5=B9=B8=E7=9A=84=E6=98=AF=EF=BC=8CJScript=EF=BC=88=E4=B9=9F=
=E5=B0=B1=E6=98=AFEcMAScript=E7=9A=84IE=E5=AE=9E=E7=8E=B0=EF=BC=89=E5=A4=84=
=E7=90=86=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=
=8D=B4=E9=9D=9E=E5=B8=B8=E7=B3=9F=E7=B3=95=E3=80=82JScript=E5=BA=94=E5=AF=
=B9=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E4=B8=8D=
=E8=A2=AB=E5=BE=88=E5=A4=9A=E4=BA=BA=E6=8E=A8=E8=8D=90=E8=B4=9F=E8=B4=A3<=
/P>
<P>Let=E2=80=99s look at what exactly is wrong with its broken =
implementation.=20
Understanding all of its issues will allow us to work around them =
safely. Note=20
that I broke these discrepancies into few examples - for clarity - even =
though=20
all of them are most likely a consequence of one major bug.</P>
<P>=E8=AE=A9=E6=88=91=E4=BB=AC=E6=9D=A5=E7=9C=8B=E7=9C=8B=E8=BF=99=E4=B8=AA=
ECMASCript=E7=9A=84=E4=B8=8D=E5=A5=BD=E7=9A=84=E5=AE=9E=E7=8E=B0=E4=B8=AD=
=E9=83=BD=E6=9C=89=E4=BB=80=E4=B9=88=E9=97=AE=E9=A2=98=E3=80=82=E7=90=86=E8=
=A7=A3=E6=89=80=E6=9C=89=E8=BF=99=E4=BA=9B=E9=97=AE=E9=A2=98=E5=B0=86=E4=BD=
=BF=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E5=AE=89=E5=85=A8=E7=9A=84=E4=BD=BF=
=E7=94=A8=E5=AE=83=E3=80=82=E8=99=BD=E7=84=B6=E4=B8=8B=E9=9D=A2=E7=9A=84=E8=
=BF=99=E4=BA=9B=E4=BE=8B=E5=AD=90=E9=83=BD=E5=BE=88=E5=8F=AF=E8=83=BD=E6=98=
=AF=E4=B8=80=E4=B8=AA=E4=B8=BB=E8=A6=81=E7=9A=84bug=E7=9A=84=E7=BB=93=E6=9E=
=9C=EF=BC=8C=E4=BD=86=E6=98=AF=E4=B8=BA=E4=BA=86=E6=B8=85=E6=99=B0=E8=B5=B7=
=E8=A7=81=EF=BC=8C=E6=88=91=E6=8A=8A=E8=BF=99=E4=BA=9B=E5=B7=AE=E5=BC=82=E5=
=88=86=E4=B8=BA=E4=BA=86=E5=87=A0=E4=B8=AA=E4=BE=8B=E5=AD=90=E3=80=82</P>=

<H3=20
id=3Dexample_1_function_expression_identifier_leaks_into_an_enclosing_sco=
pe>Example=20
#1: Function expression identifier leaks into an enclosing scope</H3>
<P>=E5=AE=9E=E4=BE=8B1=EF=BC=9A=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=
=8F=E6=A0=87=E7=A4=BA=E7=AC=A6=E6=B8=97=E8=BF=9B=E4=BA=86=E5=A4=96=E5=9B=B4=
=E4=BD=9C=E7=94=A8=E5=9F=9F</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
"function"</SPAN></PRE>
<P>Remember how I mentioned that an identifier of named function =
expression is=20
<STRONG>not available in an enclosing scope</STRONG>? Well, JScript =
doesn=E2=80=99t=20
agree with specs on this one - <CODE>g</CODE> in the above example =
resolves to a=20
function object. This is a most widely observed discrepancy. =
It=E2=80=99s dangerous in=20
that it inadvertedly pollutes an enclosing scope - a scope that might as =
well be=20
a global one - with an extra identifier. Such pollution can, of course, =
be a=20
source of hard-to-track bugs.</P>
<P>=E6=88=91=E5=88=9A=E6=89=8D=E6=8F=90=E5=88=B0=E8=BF=87=E4=B8=80=E4=B8=AA=
=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E6=
=A0=87=E7=A4=BA=E7=AC=A6=E4=B8=8D=E8=83=BD=E5=9C=A8=E5=A4=96=E9=83=A8=E4=BD=
=9C=E7=94=A8=E5=9F=9F=E4=B8=AD=E8=A2=AB=E8=AE=BF=E9=97=AE=E3=80=82=E4=BD=86=
=E6=98=AF=EF=BC=8CJScript=E5=9C=A8=E8=BF=99=E7=82=B9=E4=B8=8A=E5=92=8C=E6=
=A0=87=E5=87=86=E5=B9=B6=E4=B8=8D=E7=9B=B8=E7=AC=A6=EF=BC=8C=E5=9C=A8=E4=B8=
=8A=E9=9D=A2=E7=9A=84=E9=A5=BF=E4=BE=8B=E5=AD=90=E4=B8=ADg=E5=8D=B4=E6=98=
=AF=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E3=80=82=E8=BF=99=
=E4=B8=AA=E6=98=AF=E4=B8=80=E4=B8=AA=E5=8F=AF=E4=BB=A5=E5=B9=BF=E6=B3=9B=E8=
=A7=82=E5=AF=9F=E5=88=B0=E7=9A=84=E5=B7=AE=E5=BC=82=E3=80=82=E8=BF=99=E6=A0=
=B7=E5=AE=83=E5=B0=B1=E7=94=A8=E4=B8=80=E4=B8=AA=E5=A4=9A=E4=BD=99=E7=9A=84=
=E6=A0=87=E7=A4=BA=E7=AC=A6=E6=B1=A1=E6=9F=93=E4=BA=86=E5=A4=96=E5=9B=B4=E4=
=BD=9C=E7=94=A8=E5=9F=9F=EF=BC=8C=E8=BF=99=E4=B8=AA=E4=BD=9C=E7=94=A8=E5=9F=
=9F=E5=BE=88=E6=9C=89=E5=8F=AF=E8=83=BD=E6=98=AF=E5=85=A8=E5=B1=80=E4=BD=9C=
=E7=94=A8=E5=9F=9F=EF=BC=8C=E8=BF=99=E6=A0=B7=E6=98=AF=E5=BE=88=E5=8D=B1=E9=
=99=A9=E7=9A=84=E3=80=82=E5=BD=93=E7=84=B6=E8=BF=99=E4=B8=AA=E6=B1=A1=E6=9F=
=93=E5=8F=AF=E8=83=BD=E6=98=AF=E4=B8=80=E4=B8=AA=E5=BE=88=E9=9A=BE=E5=8E=BB=
=E5=A4=84=E7=90=86=E5=92=8C=E8=B7=9F=E8=B8=AA=E7=9A=84bug=E7=9A=84=E6=A0=B9=
=E6=BA=90</P>
<H3=20
id=3Dexample_2_named_function_expression_is_treated_as_both_function_decl=
aration_and_function_expression>Example=20
#2: Named function expression is treated as BOTH - function declaration =
AND=20
function expression</H3>
<P>=E5=AE=9E=E4=BE=8B2=EF=BC=9A=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=
=A8=E8=BE=BE=E5=BC=8F=E8=A2=AB=E8=BF=9B=E8=A1=8C=E4=BA=86=E5=8F=8C=E9=87=8D=
=E5=A4=84=E7=90=86=EF=BC=8C=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=
=92=8C=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
"function"</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN></PRE>
<P>As I explained before, function declarations are parsed foremost any =
other=20
expressions in a particular execution context. The above example =
demonstrates=20
how <STRONG>JScript actually treats named function expressions as =
function=20
declarations</STRONG>. You can see that it parses <CODE>g</CODE> before =
an=20
=E2=80=9Cactual declaration=E2=80=9D takes place. </P>
<P>=E6=AD=A3=E5=A6=82=E6=88=91=E5=89=8D=E9=9D=A2=E8=A7=A3=E9=87=8A=E7=9A=84=
=EF=BC=8C=E5=9C=A8=E4=B8=80=E4=B8=AA=E7=89=B9=E5=AE=9A=E7=9A=84=E6=89=A7=E8=
=A1=8C=E7=8E=AF=E5=A2=83=E4=B8=AD=EF=BC=8C=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=
=8E=E6=98=AF=E5=9C=A8=E6=89=80=E6=9C=89=E7=9A=84=E8=A1=A8=E8=BE=BE=E5=BC=8F=
=E4=B9=8B=E5=89=8D=E8=A2=AB=E8=A7=A3=E9=87=8A=E3=80=82=E4=B8=8A=E9=9D=A2=E7=
=9A=84=E4=BE=8B=E5=AD=90=E8=AF=B4=E6=98=8EJScript=E5=AE=9E=E9=99=85=E4=B8=
=8A=E6=8A=8A=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=
=E4=BD=9C=E4=B8=BA=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E6=
=9D=A5=E5=AF=B9=E5=BE=85=E3=80=82=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E7=9C=
=8B=E5=88=B0=E4=BB=96=E5=9C=A8=E4=B8=80=E4=B8=AA=E5=AE=9E=E9=99=85=E7=9A=84=
=E5=A3=B0=E6=98=8E=E4=B9=8B=E5=89=8D=E5=B0=B1=E8=A2=AB=E8=A7=A3=E9=87=8A=E4=
=BA=86=E3=80=82</P>
<P>This brings us to a next example:</P>
<P>=E5=9C=A8=E6=AD=A4=E5=9F=BA=E7=A1=80=E4=B8=8A=E6=88=91=E4=BB=AC=E5=BC=95=
=E5=85=A5=E4=BA=86=E4=B8=8B=E9=9D=A2=E7=9A=84=E4=B8=80=E4=B8=AA=E4=BE=8B=E5=
=AD=90=E3=80=82</P>
<H3=20
id=3Dexample_3_named_function_expression_creates_two_disctinct_function_o=
bjects>Example=20
#3: Named function expression creates TWO DISCTINCT function =
objects!</H3>
<P>=E5=AE=9E=E4=BE=8B3=EF=BC=9A=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=
=A8=E8=BE=BE=E5=BC=8F=E5=88=9B=E5=BB=BA=E4=B8=A4=E4=B8=AA=E4=B8=8D=E5=90=8C=
=E7=9A=84=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D=3D=3D</SPAN><SPAN class=3Dpln> =
g</SPAN><SPAN class=3Dpun>;</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>// false</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
f</SPAN><SPAN class=3Dpun>.</SPAN><SPAN class=3Dpln>expando </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'foo'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; g</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>expando</SPAN><SPAN class=3Dpun>;</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dcom>// undefined</SPAN></PRE>
<P>This is where things are getting interesting. Or rather - completely =
nuts.=20
Here we are seeing the dangers of having to deal with two distinct =
objects -=20
augmenting one of them obviously does not modify the other one; This =
could be=20
quite troublesome if you decided to employ, say, caching mechanism and =
store=20
something in a property of <CODE>f</CODE>, then tried accessing it as a =
property=20
of <CODE>g</CODE>, thinking that it is the same object you=E2=80=99re =
working with.</P>
<P>=E5=9C=A8=E8=BF=99=E9=87=8C=E4=BA=8B=E6=83=85=E5=8F=98=E5=BE=97=E6=9B=B4=
=E5=8A=A0=E6=9C=89=E8=B6=A3=E4=BA=86=EF=BC=8C=E6=88=96=E8=80=85=E6=98=AF=E5=
=AE=8C=E5=85=A8=E7=96=AF=E6=8E=89=E3=80=82=E8=BF=99=E9=87=8C=E6=88=91=E4=BB=
=AC=E7=9C=8B=E5=88=B0=E5=BF=85=E9=A1=BB=E5=A4=84=E7=90=86=E4=B8=A4=E4=B8=AA=
=E4=B8=8D=E5=90=8C=E7=9A=84=E5=AF=B9=E8=B1=A1=E7=9A=84=E5=8D=B1=E9=99=A9=EF=
=BC=8C=E5=BD=93=E6=89=A9=E5=85=85=E4=BB=96=E4=BB=AC=E5=BD=93=E4=B8=AD=E7=9A=
=84=E4=B8=80=E4=B8=AA=E7=9A=84=E6=97=B6=E5=80=99=EF=BC=8C=E5=8F=A6=E5=A4=96=
=E4=B8=80=E4=B8=AA=E4=B8=8D=E4=BC=9A=E7=9B=B8=E5=BA=94=E7=9A=84=E6=94=B9=E5=
=8F=98=E3=80=82=E5=A6=82=E6=9E=9C=E4=BD=A0=E6=89=93=E7=AE=97=E4=BD=BF=E7=94=
=A8cache=E6=9C=BA=E5=88=B6=E5=B9=B6=E4=B8=94=E5=9C=A8f=E7=9A=84=E5=B1=9E=E6=
=80=A7=E4=B8=AD=E5=AD=98=E6=94=BE=E4=B8=80=E4=BA=9B=E4=B8=9C=E8=A5=BF=EF=BC=
=8C=E5=8F=AA=E6=9C=89=E6=9C=89=E8=AF=95=E5=9B=BE=E5=9C=A8g=E7=9A=84=E5=B1=
=9E=E6=80=A7=E4=B8=AD=E8=AE=BF=E9=97=AE=EF=BC=8C=E4=BD=A0=E6=9C=AC=E4=BB=A5=
=E4=B8=BA=E4=BB=96=E4=BB=AC=E6=8C=87=E5=90=91=E5=90=8C=E4=B8=80=E4=B8=AA=E5=
=AF=B9=E8=B1=A1=EF=BC=8C=E8=BF=99=E6=A0=B7=E5=B0=B1=E4=BC=9A=E5=8F=98=E5=BE=
=97=E9=9D=9E=E5=B8=B8=E9=BA=BB=E7=83=A6</P>
<P>Let=E2=80=99s look at something a bit more complex.</P>
<P>=E8=AE=A9=E6=88=91=E4=BB=AC=E6=9D=A5=E7=9C=8B=E4=B8=80=E4=BA=9B=E6=9B=B4=
=E5=A4=8D=E6=9D=82=E7=9A=84=E4=BE=8B=E5=AD=90=E3=80=82</P>
<H3=20
id=3Dexample_4_function_declarations_are_parsed_sequentially_and_are_not_=
affected_by_conditional_blocks>Example=20
#4: Function declarations are parsed sequentially and are not affected =
by=20
conditional blocks</H3>
<P>=E5=AE=9E=E4=BE=8B4=EF=BC=9A=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E8=A2=
=AB=E9=A1=BA=E5=BA=8F=E7=9A=84=E8=A7=A3=E9=87=8A=EF=BC=8C=E4=B8=8D=E5=8F=97=
=E6=9D=A1=E4=BB=B6=E5=9D=97=E7=9A=84=E5=BD=B1=E5=93=8D</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>()</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>1</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>};</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>if</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>false</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; &nbsp; f </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dlit>2</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; g</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
2</SPAN></PRE>
<P>An example like this could cause even harder to track bugs. What =
happens here=20
is actually quite simple. First, <CODE>g</CODE> is being parsed as a =
function=20
declaration, and since declarations in JScript are independent of =
conditional=20
blocks, <CODE>g</CODE> is being declared as a function from the =
=E2=80=9Cdead=E2=80=9D=20
<CODE>if</CODE> branch - <CODE>function g(){ return 2 }</CODE>. Then all =
of the=20
=E2=80=9Cregular=E2=80=9D expressions are being evaluated and =
<CODE>f</CODE> is being assigned=20
another, newly created function object to. =E2=80=9Cdead=E2=80=9D =
<CODE>if</CODE> branch is=20
never entered when evaluating expressions, so <CODE>f</CODE> keeps =
referencing=20
first function - <CODE>function g(){ return 1 }</CODE>. It should be =
clear by=20
now, that if you=E2=80=99re not careful enough, and call <CODE>g</CODE> =
from within=20
<CODE>f</CODE>, you=E2=80=99ll end up calling a completely unrelated =
<CODE>g</CODE>=20
function object.</P>
<P>=E5=83=8F=E8=BF=99=E6=A0=B7=E7=9A=84=E4=B8=80=E4=B8=AA=E4=BE=8B=E5=AD=90=
=E5=8F=AF=E8=83=BD=E4=BC=9A=E4=BD=BF=E8=B7=9F=E8=B8=AAbug=E9=9D=9E=E5=B8=B8=
=E5=9B=B0=E9=9A=BE=E3=80=82=E8=BF=99=E9=87=8C=E5=8F=91=E7=94=9F=E7=9A=84=E9=
=97=AE=E9=A2=98=E5=8D=B4=E9=9D=9E=E5=B8=B8=E7=AE=80=E5=8D=95=E3=80=82=E9=A6=
=96=E5=85=88g=E8=A2=AB=E8=A7=A3=E9=87=8A=E4=B8=BA=E4=B8=80=E4=B8=AA=E5=87=
=BD=E6=95=B0=E5=A3=B0=E6=98=8E=EF=BC=8C=E5=B9=B6=E4=B8=94=E6=97=A2=E7=84=B6=
JScript=E4=B8=AD=E7=9A=84=E5=A3=B0=E6=98=8E=E6=98=AF=E5=92=8C=E6=9D=A1=E4=
=BB=B6=E5=9D=97=E6=97=A0=E5=85=B3=E7=9A=84=EF=BC=8Cg=E5=B0=B1=E4=BD=9C=E4=
=B8=BA=E6=9D=A5=E8=87=AA=E4=BA=8E=E5=B7=B2=E7=BB=8F=E6=97=A0=E6=95=88=E7=9A=
=84if=E5=88=86=E6=94=AF=E4=B8=AD=E7=9A=84=E5=87=BD=E6=95=B0=E8=A2=AB=E5=A3=
=B0=E6=98=8Efunction=20
g(){ return 2=20
}=E3=80=82=E4=B9=8B=E5=90=8E=E6=99=AE=E9=80=9A=E7=9A=84=E8=A1=A8=E8=BE=BE=
=E5=BC=8F=E8=A2=AB=E6=B1=82=E5=80=BC=E5=B9=B6=E4=B8=94f=E8=A2=AB=E8=B5=8B=
=E5=80=BC=E4=B8=BA=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E6=96=B0=E5=88=9B=E5=
=BB=BA=E7=9A=84=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E3=80=82=E5=BD=93=E6=89=
=A7=E8=A1=8C=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E6=97=B6=E5=80=99=EF=BC=8C=
=E7=94=B1=E4=BA=8Eif=E6=9D=A1=E4=BB=B6=E5=88=86=E6=94=AF=E6=98=AF=E4=B8=8D=
=E4=BC=9A=E8=A2=AB=E8=BF=9B=E5=85=A5=E7=9A=84=EF=BC=8C=E5=9B=A0=E6=AD=A4f=
=E4=BF=9D=E6=8C=81=E4=B8=BA=E7=AC=AC=E4=B8=80=E5=87=BD=E6=95=B0=E7=9A=84=E5=
=BC=95=E7=94=A8=20
function g(){ return 1 =
}=E3=80=82=E7=8E=B0=E5=9C=A8=E6=B8=85=E6=A5=9A=E4=BA=86=E5=A6=82=E6=9E=9C=
=E4=B8=8D=E6=98=AF=E5=BE=88=E5=B0=8F=E5=BF=83=EF=BC=8C=E8=80=8C=E4=B8=94=E5=
=9C=A8f=E5=86=85=E9=83=A8=E8=B0=83=E7=94=A8g=EF=BC=8C=E4=BD=A0=E6=9C=80=E7=
=BB=88=E5=B0=86=E8=B0=83=E7=94=A8=E4=B8=80=E4=B8=AA=E5=AE=8C=E5=85=A8=E6=97=
=A0=E5=85=B3=E7=9A=84g=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E3=80=82</P>
<P>You might be wondering how all this mess with different function =
objects=20
compares to <CODE>arguments.callee</CODE>. Does <CODE>callee</CODE> =
reference=20
<CODE>f</CODE> or <CODE>g</CODE>? Let=E2=80=99s take a look:</P>
<P>=E4=BD=A0=E5=8F=AF=E8=83=BD=E5=9C=A8=E6=83=B3=E4=B8=8D=E4=BB=8E=E7=9A=84=
=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=E5=92=8Carguments.callee=E7=9B=B8=E6=
=AF=94=E8=BE=83=E7=9A=84=E7=BB=93=E6=9E=9C=E4=BC=9A=E6=98=AF=E6=80=8E=E6=A0=
=B7=E5=91=A2=EF=BC=9Fcallee=E6=98=AF=E5=BC=95=E7=94=A8f=E8=BF=98=E6=98=AF=
g=EF=BC=9F=E8=AE=A9=E6=88=91=E4=BB=AC=E6=9D=A5=E7=9C=8B=E4=B8=80=E4=B8=8B=
</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>[</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
arguments</SPAN><SPAN class=3Dpun>.</SPAN><SPAN class=3Dpln>callee =
</SPAN><SPAN class=3Dpun>=3D=3D</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
arguments</SPAN><SPAN class=3Dpun>.</SPAN><SPAN class=3Dpln>callee =
</SPAN><SPAN class=3Dpun>=3D=3D</SPAN><SPAN class=3Dpln> g<BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>];</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dpun>};</SPAN><SPAN class=3Dpln><BR>&nbsp; =
f</SPAN><SPAN class=3Dpun>();</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>// [true, false]</SPAN></PRE>
<P>As you can see, <CODE>arguments.callee</CODE> references same object =
as=20
<CODE>f</CODE> identifier. This is actually good news, as you will see =
later=20
on.</P>
<P>=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=88=B0arguments.callee=
=E5=BC=95=E7=94=A8=E7=9A=84=E6=98=AF=E5=92=8Cf=E6=A0=87=E7=A4=BA=E7=AC=A6=
=E4=B8=80=E6=A0=B7=E7=9A=84=E5=AF=B9=E8=B1=A1=EF=BC=8C=E5=B0=B1=E5=83=8F=E7=
=A8=8D=E5=90=8E=E4=BD=A0=E4=BC=9A=E7=9C=8B=E5=88=B0=E7=9A=84=EF=BC=8C=E8=BF=
=99=E6=98=AF=E4=B8=AA=E5=A5=BD=E6=B6=88=E6=81=AF</P>
<P>Looking at JScript deficiencies, it becomes pretty clear what exactly =
we need=20
to avoid. First, we need <STRONG>to be aware of a leaking =
identifier</STRONG>=20
(so that it doesn=E2=80=99t pollute enclosing scope). Second, we should =
<STRONG>never=20
reference identifier used as a function name</STRONG>; A troublesome =
identifier=20
is <CODE>g</CODE> from the previous examples. Notice how many =
ambiguities could=20
have been avoided if we were to forget about <CODE>g</CODE>=E2=80=99s =
existance. Always=20
referencing function via <CODE>f</CODE> or <CODE>arguments.callee</CODE> =
is the=20
key here. If you use named expression, think of that name as something =
that=E2=80=99s=20
only being used for debugging purposes. And finally, a bonus point is to =

<STRONG>always clean up an extraneous function</STRONG> created =
erroneously=20
during NFE declaration.</P>
<P>=E6=97=A2=E7=84=B6=E7=9C=8B=E5=88=B0=E4=BA=86JScript=E7=9A=84=E7=BC=BA=
=E7=82=B9=EF=BC=8C=E6=88=91=E4=BB=AC=E5=BA=94=E8=AF=A5=E9=81=BF=E5=85=8D=E4=
=BA=9B=E4=BB=80=E4=B9=88=E5=B0=B1=E9=9D=9E=E5=B8=B8=E6=B8=85=E6=A5=9A=E4=BA=
=86=E3=80=82=E9=A6=96=E5=85=88=EF=BC=8C=E6=88=91=E4=BB=AC=E8=A6=81=E6=84=8F=
=E8=AF=86=E5=88=B0=E6=A0=87=E7=A4=BA=E7=AC=A6=E7=9A=84=E6=B8=97=E5=87=BA=EF=
=BC=88=E4=BB=A5=E4=BD=BF=E5=BE=97=E4=BB=96=E4=B8=8D=E4=BC=9A=E6=B1=A1=E6=9F=
=93=E5=A4=96=E5=9B=B4=E4=BD=9C=E7=94=A8=E5=9F=9F=EF=BC=89=E3=80=82=E7=AC=AC=
=E4=BA=8C=E7=82=B9=EF=BC=8C=E6=88=91=E4=BB=AC=E4=B8=8D=E5=BA=94=E8=AF=A5=E5=
=BC=95=E7=94=A8=E4=BD=9C=E4=B8=BA=E5=87=BD=E6=95=B0=E5=90=8D=E7=9A=84=E6=A0=
=87=E7=A4=BA=E7=AC=A6=EF=BC=9B=E4=BB=8E=E5=89=8D=E9=9D=A2=E7=9A=84=E4=BE=8B=
=E5=AD=90=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=87=BAg=E6=98=AF=E4=B8=80=E4=B8=AA=
=E9=97=AE=E9=A2=98=E5=A4=9A=E5=A4=9A=E7=9A=84=E6=A0=87=E7=A4=BA=E7=AC=A6=E3=
=80=82=E8=AF=B7=E6=B3=A8=E6=84=8F=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=88=91=E4=BB=
=AC=E5=BF=98=E8=AE=B0g=E7=9A=84=E5=AD=98=E5=9C=A8=EF=BC=8C=E5=BE=88=E5=A4=
=9A=E6=AD=A7=E4=B9=89=E5=B0=B1=E5=8F=AF=E4=BB=A5=E8=A2=AB=E9=81=BF=E5=85=8D=
=E3=80=82=E9=80=9A=E5=B8=B8=E6=9C=80=E5=85=B3=E9=94=AE=E7=9A=84=E5=B0=B1=E6=
=98=AF=E9=80=9A=E8=BF=87f=E6=88=96=E8=80=85argument.callee=E6=9D=A5=E5=BC=
=95=E7=94=A8=E5=87=BD=E6=95=B0=E3=80=82=E5=A6=82=E6=9E=9C=E4=BD=A0=E4=BD=BF=
=E7=94=A8=E6=9C=89=E5=90=8D=E7=9A=84=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E8=
=AE=B0=E4=BD=8F=E5=90=8D=E5=AD=97=E5=8F=AA=E6=98=AF=E4=B8=BA=E4=BA=86=E8=B0=
=83=E8=AF=95=E7=9A=84=E7=9B=AE=E7=9A=84=E8=80=8C=E5=AD=98=E5=9C=A8=E3=80=82=
=E6=9C=80=E5=90=8E=EF=BC=8C=E9=A2=9D=E5=A4=96=E7=9A=84=E4=B8=80=E7=82=B9=E5=
=B0=B1=E6=98=AF=E8=A6=81=E7=BB=8F=E5=B8=B8=E6=B8=85=E7=90=86=E6=9C=89=E5=90=
=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=A3=B0=E6=98=8E=E9=94=99=
=E8=AF=AF=E5=88=9B=E5=BB=BA=E7=9A=84=E9=99=84=E5=8A=A0=E5=87=BD=E6=95=B0<=
/P>
<P>I think last point needs a bit of an explanation:</P>
<P>=E6=88=91=E6=83=B3=E6=9C=80=E6=9C=89=E4=B8=80=E7=82=B9=E9=9C=80=E8=A6=81=
=E4=B8=80=E4=BA=9B=E6=9B=B4=E5=A4=9A=E8=A7=A3=E9=87=8A</P>
<H2 id=3Djscript_memory_management>JScript =
=E5=86=85=E5=AD=98=E7=AE=A1=E7=90=86 <A=20
name=3Djscript-memory-management></A></H2>
<P>Being familiar with JScript discrepancies, we can now see a potential =
problem=20
with memory consumption when using these buggy constructs. Let=E2=80=99s =
look at a=20
simple example:</P>
<P>=E7=86=9F=E6=82=89=E4=BA=86JScript=E5=92=8C=E8=A7=84=E8=8C=83=E7=9A=84=
=E5=B7=AE=E5=88=AB=EF=BC=8C=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E7=9C=8B=E5=
=88=B0=E5=BD=93=E4=BD=BF=E7=94=A8=E8=BF=99=E4=BA=9B=E6=9C=89=E9=97=AE=E9=A2=
=98=E7=9A=84=E7=BB=93=E6=9E=84=E7=9A=84=E6=97=B6=E5=80=99=EF=BC=8C=E5=92=8C=
=E5=86=85=E5=AD=98=E6=B6=88=E8=80=97=E7=9B=B8=E5=85=B3=E7=9A=84=E6=BD=9C=E5=
=9C=A8=E9=97=AE=E9=A2=98</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>true</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<P>We know that a function returned from within this anonymous =
invocation - the=20
one that has <CODE>g</CODE> identifier - is being assigned to outer=20
<CODE>f</CODE>. We also know that named function expressions produce =
superfluous=20
function object, and that this object is not the same as returned =
function. The=20
memory issue here is caused by this extraneous <CODE>g</CODE> function =
being=20
literally =E2=80=9Ctrapped=E2=80=9D in a closure of returning function. =
This happens because=20
inner function is declared in the same scope as that pesky =
<CODE>g</CODE> one.=20
Unless we <STRONG>explicitly break reference to <CODE>g</CODE> =
function</STRONG>=20
it will keep consuming memory.</P>
<P>=E6=88=91=E4=BB=AC=E5=8F=91=E7=8E=B0=E4=BB=8E=E5=8C=BF=E5=90=8D=E8=B0=83=
=E7=94=A8=E4=B8=AD=E8=BF=94=E5=9B=9E=E7=9A=84=E4=B8=80=E4=B8=AA=E5=87=BD=E6=
=95=B0=EF=BC=8C=E4=B9=9F=E5=B0=B1=E6=98=AF=E4=BB=A5g=E4=BD=9C=E4=B8=BA=E6=
=A0=87=E7=A4=BA=E7=AC=A6=E7=9A=84=E5=87=BD=E6=95=B0=EF=BC=8C=E8=A2=AB=E5=A4=
=8D=E5=88=B6=E7=BB=99=E5=A4=96=E9=83=A8=E7=9A=84f=E3=80=82=E6=88=91=E4=BB=
=AC=E8=BF=98=E7=9F=A5=E9=81=93=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=
=E8=BE=BE=E5=BC=8F=E5=88=9B=E5=BB=BA=E4=BA=86=E4=B8=80=E4=B8=AA=E5=A4=9A=E4=
=BD=99=E7=9A=84=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=EF=BC=8C=E5=B9=B6=E4=B8=
=94=E8=BF=99=E4=B8=AA=E5=AF=B9=E8=B1=A1=E5=92=8C=E8=BF=94=E5=9B=9E=E7=9A=84=
=E5=AF=B9=E8=B1=A1=E5=B9=B6=E4=B8=8D=E6=98=AF=E5=90=8C=E4=B8=80=E4=B8=AA=E5=
=87=BD=E6=95=B0=E3=80=82=E8=BF=99=E9=87=8C=E7=9A=84=E5=86=85=E5=AD=98=E9=97=
=AE=E9=A2=98=E5=B0=B1=E6=98=AF=E7=94=B1=E8=BF=99=E4=B8=AA=E6=B2=A1=E7=94=A8=
=E7=9A=84g=E5=87=BD=E6=95=B0=E5=9C=A8=E4=B8=80=E4=B8=AA=E8=BF=94=E5=9B=9E=
=E5=87=BD=E6=95=B0=E7=9A=84=E9=97=AD=E5=8C=85=E4=B8=AD=E8=A2=AB=E6=8C=89=E7=
=85=A7=E5=AD=97=E9=9D=A2=E4=B8=8A=E7=9A=84=E6=84=8F=E6=80=9D=E6=8D=95=E8=8E=
=B7=E4=BA=86=E3=80=82=E8=BF=99=E6=98=AF=E5=9B=A0=E4=B8=BA=E5=86=85=E9=83=A8=
=E5=87=BD=E6=95=B0=E6=98=AF=E5=92=8C=E5=8F=AF=E6=81=B6=E7=9A=84g=E5=87=BD=
=E6=95=B0=E5=9C=A8=E5=90=8C=E4=B8=80=E4=B8=AA=E4=BD=9C=E7=94=A8=E5=9F=9F=E5=
=86=85=E5=A3=B0=E6=98=8E=E7=9A=84=E3=80=82=E9=99=A4=E9=9D=9E=E6=88=91=E4=BB=
=AC=E6=98=BE=E5=BC=8F=E7=9A=84=E7=A0=B4=E5=9D=8F=E5=88=B0g=E5=87=BD=E6=95=
=B0=E7=9A=84=E5=BC=95=E7=94=A8=EF=BC=8C=E5=90=A6=E5=88=99=E4=BB=96=E5=B0=86=
=E4=B8=80=E7=9B=B4=E5=8D=A0=E7=94=A8=E5=86=85=E5=AD=98=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>true</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>//=E7=BB=99g=E8=B5=8B=E5=80=BCnull=E4=BB=A5=E4=BD=BF=E4=BB=96=
=E4=B8=8D=E5=86=8D=E8=A2=AB=E6=97=A0=E5=85=B3=E7=9A=84=E5=87=BD=E6=95=B0=E5=
=BC=95=E7=94=A8=E3=80=82=20
	//null `g`, so that it doesn't reference extraneous function any =
longer</SPAN><SPAN class=3Dpln>
	<BR>&nbsp; &nbsp; g </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dkwd>null</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<P>Note that we explicitly declare <CODE>g</CODE> as well, so that =
<CODE>g =3D=20
null</CODE> assignment wouldn=E2=80=99t create a global <CODE>g</CODE> =
variable in=20
conforming clients (i.e. non-JScript ones). By <CODE>null</CODE>ing =
reference to=20
<CODE>g</CODE>, we allow garbage collector to wipe off this implicitly =
created=20
function object that <CODE>g</CODE> refers to.</P>
<P>=E6=B3=A8=E6=84=8F=EF=BC=8C=E6=88=91=E4=BB=AC=E5=8F=88=E6=98=BE=E5=BC=8F=
=E7=9A=84=E5=A3=B0=E6=98=8E=E4=BA=86g=EF=BC=8C=E6=89=80=E4=BB=A5g=3Dnull=E8=
=B5=8B=E5=80=BC=E5=B0=86=E4=B8=8D=E4=BC=9A=E7=BB=99=E7=AC=A6=E5=90=88=E8=A7=
=84=E8=8C=83=E7=9A=84=E5=AE=A2=E6=88=B7=E7=AB=AF=EF=BC=88=E4=BE=8B=E5=A6=82=
=E9=9D=9EJScirpt=E5=BC=95=E6=93=8E=EF=BC=89=E5=88=9B=E5=BB=BA=E4=B8=80=E4=
=B8=AA=E5=85=A8=E5=B1=80=E5=8F=98=E9=87=8F=E3=80=82=E9=80=9A=E8=BF=87=E7=BB=
=99g=E4=BB=A5null=E7=9A=84=E5=BC=95=E7=94=A8=EF=BC=8C=E6=88=91=E4=BB=AC=E5=
=85=81=E8=AE=B8=E5=9E=83=E5=9C=BE=E5=9B=9E=E6=94=B6=E6=9D=A5=E6=B8=85=E6=B4=
=97=E8=BF=99=E4=B8=AA=E8=A2=ABg=E6=89=80=E5=BC=95=E7=94=A8=E7=9A=84=EF=BC=
=8C=E9=9A=90=E5=BC=8F=E5=88=9B=E5=BB=BA=E7=9A=84=E5=87=BD=E6=95=B0=E5=AF=B9=
=E8=B1=A1=E3=80=82</P>
<P>When taking care of JScript NFE memory leak, I decided to run a =
simple series=20
of tests to confirm that <CODE>null</CODE>ing <CODE>g</CODE> actually =
does free=20
memory.</P>
<P>=E5=BD=93=E8=80=83=E8=99=91JScript=E7=9A=84=E6=9C=89=E5=90=8D=E5=87=BD=
=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E5=86=85=E5=AD=98=E6=B3=84=E9=
=9C=B2=E9=97=AE=E9=A2=98=E6=97=B6=EF=BC=8C=E6=88=91=E5=86=B3=E5=AE=9A=E8=BF=
=90=E8=A1=8C=E4=B8=80=E7=B3=BB=E5=88=97=E7=AE=80=E5=8D=95=E7=9A=84=E6=B5=8B=
=E8=AF=95=E6=9D=A5=E8=AF=81=E5=AE=9E=E7=BB=99g=E5=87=BD=E6=95=B0null=E7=9A=
=84=E5=BC=95=E7=94=A8=E5=AE=9E=E9=99=85=E4=B8=8A=E5=8F=AF=E4=BB=A5=E9=87=8A=
=E6=94=BE=E5=86=85=E5=AD=98</P>
<H2 id=3Dtests>=E6=B5=8B=E8=AF=95 <A name=3Dtests></A></H2>
<P>The test was simple. It would simply create 10000 functions via named =

function expressions and store them in an array. I would then wait for =
about a=20
minute and check how high the memory consumption is. After that I would =
null-out=20
the reference and repeat the procedure again. Here=E2=80=99s a test case =
I used:</P>
<P>=E8=BF=99=E4=B8=AA=E6=B5=8B=E8=AF=95=E9=9D=9E=E5=B8=B8=E7=AE=80=E5=8D=95=
=E3=80=82=E4=BB=96=E5=B0=86=E9=80=9A=E8=BF=87=E6=9C=89=E5=90=8D=E5=87=BD=E6=
=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=88=9B=E5=BB=BA1000=E4=B8=AA=E5=87=BD=
=E6=95=B0=EF=BC=8C=E5=B9=B6=E5=B0=86=E5=AE=83=E4=BB=AC=E5=82=A8=E5=AD=98=E5=
=9C=A8=E4=B8=80=E4=B8=AA=E6=95=B0=E7=BB=84=E4=B8=AD=E3=80=82=E6=88=91=E7=AD=
=89=E5=BE=85=E4=BA=86=E5=A4=A7=E7=BA=A6=E4=B8=80=E5=88=86=E9=92=9F=EF=BC=8C=
=E5=B9=B6=E6=9F=A5=E7=9C=8B=E5=86=85=E5=AD=98=E4=BD=BF=E7=94=A8=E6=9C=89=E5=
=A4=9A=E9=AB=98=E3=80=82=E5=8F=AA=E6=9C=89=E6=88=91=E4=BB=AC=E5=8A=A0=E4=B8=
=8Anull=E5=BC=95=E7=94=A8=EF=BC=8C=E9=87=8D=E5=A4=8D=E4=B8=8A=E8=BF=B0=E8=
=BF=87=E7=A8=8B=E3=80=82=E4=B8=8B=E9=9D=A2=E5=B0=B1=E6=98=AF=E6=88=91=E4=BD=
=BF=E7=94=A8=E7=9A=84=E4=B8=80=E4=B8=AA=E7=AE=80=E5=8D=95=E7=9A=84=E6=B5=8B=
=E8=AF=95=E7=94=A8=E4=BE=8B</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> createFn</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>true</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dstr>'standard'</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>else</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>false</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dstr>'alternative'</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>else</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; &nbsp; f </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dstr>'fallback'</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// var F =3D null;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> arr </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>[</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>];</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>for</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> =
i</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dlit>0</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln> i</SPAN><SPAN =
class=3Dpun>&lt;</SPAN><SPAN class=3Dlit>10000</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln> i</SPAN><SPAN =
class=3Dpun>++)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; arr</SPAN><SPAN =
class=3Dpun>[</SPAN><SPAN class=3Dpln>i</SPAN><SPAN =
class=3Dpun>]</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> createFn</SPAN><SPAN =
class=3Dpun>();</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN></PRE>
<P>Results as seen in Process Explorer on Windows XP SP2 were:</P>
<P>=E7=BB=93=E6=9E=9C=E6=98=AF=E5=9C=A8Windows XP =
SP2=E8=BF=9B=E8=A1=8C=E7=9A=84=EF=BC=8C=E9=80=9A=E8=BF=87=E8=BF=9B=E7=A8=8B=
=E7=AE=A1=E7=90=86=E5=99=A8=E5=BE=97=E5=88=B0=E7=9A=84</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
IE6</SPAN><SPAN class=3Dpun>:</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; =
&nbsp; without </SPAN><SPAN class=3Dstr>`null`</SPAN><SPAN =
class=3Dpun>:</SPAN><SPAN class=3Dpln> &nbsp; </SPAN><SPAN =
class=3Dlit>7.6K</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>-&gt;</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>20.3K</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>with</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`null`</SPAN><SPAN class=3Dpun>:</SPAN><SPAN class=3Dpln> =
&nbsp; &nbsp; &nbsp;</SPAN><SPAN class=3Dlit>7.6K</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>-&gt;</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dlit>18K</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; =
IE7</SPAN><SPAN class=3Dpun>:</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; =
&nbsp; without </SPAN><SPAN class=3Dstr>`null`</SPAN><SPAN =
class=3Dpun>:</SPAN><SPAN class=3Dpln> &nbsp; </SPAN><SPAN =
class=3Dlit>14K</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>-&gt;</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>29.7K</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>with</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`null`</SPAN><SPAN class=3Dpun>:</SPAN><SPAN class=3Dpln> =
&nbsp; &nbsp; &nbsp;</SPAN><SPAN class=3Dlit>14K</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>-&gt;</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dlit>27K</SPAN></PRE>
<P>The results somewhat confirmed my assumptions - explicitly nulling=20
superfluous reference did free memory, but the difference in consumption =
was=20
relatively insignificant. For 10000 function objects, there would be a =
~3MB=20
difference. This is definitely something that should be kept in mind =
when=20
designing large-scale applications, applications that will run for =
either long=20
time or on devices with limited memory (such as mobile devices). For any =
small=20
script, the difference probably doesn=E2=80=99t matter.</P>
<P>=E7=BB=93=E6=9E=9C=E5=9C=A8=E4=B8=80=E5=AE=9A=E7=A8=8B=E5=BA=A6=E4=B8=8A=
=E8=AF=81=E5=AE=9E=E4=BA=86=E6=88=91=E7=9A=84=E5=81=87=E8=AE=BE=EF=BC=8C=E6=
=98=BE=E7=A4=BA=E7=9A=84=E7=BB=99=E6=97=A0=E7=94=A8=E7=9A=84=E5=8F=82=E8=80=
=83=E4=BB=A5null=E5=80=BC=E7=A1=AE=E5=AE=9E=E4=BC=9A=E9=87=8A=E6=94=BE=E5=
=86=85=E5=AD=98=EF=BC=8C=E4=BD=86=E6=98=AF=E5=9C=A8=E5=86=85=E5=AF=B8=E7=9A=
=84=E6=B6=88=E8=80=97=E7=9A=84=E5=8C=BA=E5=88=AB=E4=B8=8A=E8=B2=8C=E4=BC=BC=
=E4=B8=8D=E6=98=AF=E5=BE=88=E5=A4=A7=E3=80=82=E5=AF=B9=E4=BA=8E1000=E4=B8=
=AA=E5=87=BD=E6=95=B0=E5=AF=B9=E8=B1=A1=EF=BC=8C=E5=A4=A7=E7=BA=A6=E5=BA=94=
=E8=AF=A5=E6=9C=893M=E5=B7=A6=E5=8F=B3=E7=9A=84=E5=B7=AE=E5=88=AB=E3=80=82=
=E4=BD=86=E6=98=AF=E6=9C=89=E4=B8=80=E4=BA=9B=E6=98=AF=E6=98=8E=E7=A1=AE=E7=
=9A=84=EF=BC=8C=E5=9C=A8=E8=AE=BE=E8=AE=A1=E5=A4=A7=E8=A7=84=E6=A8=A1=E7=9A=
=84=E5=BA=94=E7=94=A8=E7=9A=84=E6=97=B6=E5=80=99=EF=BC=8C=E5=BA=94=E7=94=A8=
=E8=A6=81=E4=B8=8D=E5=B0=B1=E6=98=AF=E8=A6=81=E8=BF=90=E8=A1=8C=E5=BE=88=E9=
=95=BF=E6=97=B6=E9=97=B4=E7=9A=84=E6=88=96=E8=80=85=E8=A6=81=E5=9C=A8=E4=B8=
=80=E4=B8=AA=E5=86=85=E5=AD=98=E6=9C=89=E9=99=90=E7=9A=84=E8=AE=BE=E5=A4=87=
=E4=B8=8A=EF=BC=88=E4=BE=8B=E5=A6=82=E7=A7=BB=E5=8A=A8=E8=AE=BE=E5=A4=87=EF=
=BC=89=E3=80=82=E5=AF=B9=E4=BA=8E=E4=BB=BB=E4=BD=95=E5=B0=8F=E7=9A=84=E8=84=
=9A=E6=9C=AC=EF=BC=8C=E5=B7=AE=E5=88=AB=E5=8F=AF=E8=83=BD=E4=B8=8D=E6=98=AF=
=E5=BE=88=E9=87=8D=E8=A6=81=E3=80=82</P>
<P>You might think that it=E2=80=99s all finally over, but we are not =
just quite there=20
yet :) There=E2=80=99s a tiny little detail that I=E2=80=99d like to =
mention and that detail is=20
Safari 2.x</P>
<P>=E4=BD=A0=E5=8F=AF=E4=BB=A5=E8=AE=A4=E4=B8=BA=E8=BF=99=E6=A0=B7=E5=B0=B1=
=E5=8F=AF=E4=BB=A5=E7=BB=93=E6=9D=9F=E4=BA=86=EF=BC=8C=E4=BD=86=E6=98=AF=E8=
=BF=98=E6=B2=A1=E5=88=B0=E7=BB=93=E6=9D=9F=E7=9A=84=E6=97=B6=E5=80=99=E3=80=
=82=E6=88=91=E8=BF=98=E8=A6=81=E8=AE=A8=E8=AE=BA=E4=B8=80=E4=BA=9B=E5=B0=8F=
=E7=9A=84=E7=BB=86=E8=8A=82=EF=BC=8C=E8=80=8C=E4=B8=94=E8=BF=99=E4=BA=9B=E7=
=BB=86=E8=8A=82=E6=98=AF=E5=9C=A8Safari 2.x=E4=B8=8B=E7=9A=84</P>
<H2 id=3Dsafari_bug>Safari bug <A name=3Dsafari-bug></A></H2>
<P>Even less widely known bug with NFE is present in older versions of =
Safari;=20
namely, Safari 2.x series. I=E2=80=99ve seen some <A=20
href=3D"http://meyerweb.com/eric/thoughts/2005/07/11/safari-syntaxerror/"=
=20
linkindex=3D"13">claims on the web</A> that Safari 2.x does not support =
NFE at=20
all. This is not true. Safari does support it, but has bugs in its=20
implementation which you will see shortly.</P>
<P>=E8=99=BD=E7=84=B6=E6=B2=A1=E6=9C=89=E8=A2=AB=E4=BA=BA=E4=BB=AC=E5=8F=91=
=E7=8E=B0=E5=9C=A8=E6=97=A9=E6=9C=9F=E7=9A=84Safari=E7=89=88=E6=9C=AC=EF=BC=
=8C=E4=B9=9F=E5=B0=B1=E6=98=AFSafari =
2.x=E7=89=88=E6=9C=AC=E4=B8=AD=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=
=E8=BE=BE=E5=BC=8F=E7=9A=84bug=E3=80=82=E4=BD=86=E6=98=AF=E6=88=91=E5=9C=A8=
web=E4=B8=8A=E7=9C=8B=E5=88=B0=E4=B8=80=E4=BA=9B=E5=A3=B0=E7=A7=B0Safari =

2.x=E6=A0=B9=E6=9C=AC=E4=B8=8D=E6=94=AF=E6=8C=81=E6=9C=89=E5=90=8D=E5=87=BD=
=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E3=80=82=E8=BF=99=E4=B8=8D=E6=98=AF=E7=
=9C=9F=E7=9A=84=E3=80=82Safari=E7=9A=84=E7=A1=AE=E6=94=AF=E6=8C=81=E6=9C=89=
=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=EF=BC=8C=E4=BD=86=E6=
=98=AF=E7=A8=8D=E5=90=8E=E4=BD=A0=E5=B0=86=E7=9C=8B=E5=88=B0=E5=9C=A8=E5=AE=
=83=E7=9A=84=E5=AE=9E=E7=8E=B0=E4=B8=AD=E6=98=AF=E5=AD=98=E5=9C=A8bug=E7=9A=
=84</P>
<P>When encountering function expression in a certain context, Safari =
2.x fails=20
to parse the program entirely. It doesn=E2=80=99t throw any errors (such =
as=20
<CODE>SyntaxError</CODE> ones). It simply bails out:</P>
<P>=E5=9C=A8=E6=9F=90=E4=BA=9B=E6=89=A7=E8=A1=8C=E7=8E=AF=E5=A2=83=E4=B8=AD=
=E9=81=87=E5=88=B0=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=E6=
=97=B6=E5=80=99=EF=BC=8CSafari 2.x =
=E5=B0=86=E8=A7=A3=E9=87=8A=E7=A8=8B=E5=BA=8F=E6=95=B4=E4=BD=93=E5=A4=B1=E8=
=B4=A5=E3=80=82=E5=AE=83=E4=B8=8D=E6=8A=9B=E5=87=BA=E4=BB=BB=E4=BD=95=E7=9A=
=84=E9=94=99=E8=AF=AF=EF=BC=88=E4=BE=8B=E5=A6=82SyntaxError=EF=BC=89=E3=80=
=82=E5=B1=95=E7=A4=BA=E5=A6=82=E4=B8=8B</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
f</SPAN><SPAN class=3Dpun>(){})();</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>// &lt;=3D=3D =
=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F =
NFE</SPAN><SPAN class=3Dpln><BR>&nbsp; alert</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dlit>1</SPAN><SPAN =
class=3Dpun>);</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dcom>//=E5=9B=A0=E4=B8=BA=E5=89=8D=E9=9D=A2=E7=9A=84=E8=A1=A8=E8=BE=
=BE=E5=BC=8F=E6=98=AF=E7=9A=84=E6=95=B4=E4=B8=AA=E7=A8=8B=E5=BA=8F=E5=A4=B1=
=E8=B4=A5=EF=BC=8C=E6=9C=AC=E8=A1=8C=E5=B0=86=E6=97=A0=E6=B3=95=E8=BE=BE=E5=
=88=B0=EF=BC=8C this line is never reached, since previous expression =
fails the entire program</SPAN></PRE>
<P>After fiddling with various test cases, I came to conclusion that =
Safari 2.x=20
<STRONG>fails to parse named function expressions, if those are not part =
of=20
assignment expressions</STRONG>. Some examples of assignment expressions =

are:</P>
<P>=E5=9C=A8=E7=94=A8=E4=B8=80=E4=BA=9B=E6=B5=8B=E8=AF=95=E7=94=A8=E4=BE=8B=
=E6=B5=8B=E8=AF=95=E4=B9=8B=E5=90=8E=EF=BC=8C=E6=88=91=E6=80=BB=E7=BB=93=E5=
=87=BA=EF=BC=8C=E5=A6=82=E6=9E=9C=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=
=A8=E8=BE=BE=E5=BC=8F=E4=B8=8D=E6=98=AF=E8=B5=8B=E5=80=BC=E8=A1=A8=E8=BE=BE=
=E5=BC=8F=E7=9A=84=E4=B8=80=E9=83=A8=E5=88=86=EF=BC=8CSafari=E8=A7=A3=E9=87=
=8A=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E5=B0=86=
=E5=A4=B1=E8=B4=A5=E3=80=82=E4=B8=80=E4=BA=9B=E8=B5=8B=E5=80=BC=E8=A1=A8=E8=
=BE=BE=E5=BC=8F=E7=9A=84=E4=BE=8B=E5=AD=90=E5=A6=82=E4=B8=8B</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dcom>// =E5=8F=98=E9=87=8F=E5=A3=B0=E6=98=8Epart of =
variable declaration</SPAN><SPAN class=3Dpln> <BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>1</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>//=E7=AE=80=E5=8D=95=E7=9A=84=E8=B5=8B=E5=80=BC part of =
simple assignment</SPAN><SPAN class=3Dpln> <BR>&nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>2</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> g =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>3</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// =
=E8=BF=94=E5=9B=9E=E8=AF=AD=E5=8F=A5part of return statement</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>2</SPAN><SPAN class=3Dpun>);</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<P>This means that putting named function expression into an assignment =
makes=20
Safari =E2=80=9Chappy=E2=80=9D:</P>
<P>=E8=BF=99=E5=B0=B1=E6=84=8F=E5=91=B3=E7=9D=80=E6=8A=8A=E6=9C=89=E5=90=8D=
=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E6=94=BE=E5=88=B0=E8=B5=8B=E5=
=80=BC=E8=A1=A8=E8=BE=BE=E5=BC=8F=E4=B8=AD=E4=BC=9A=E8=AE=A9 =
Safari=E9=9D=9E=E5=B8=B8=E2=80=9C=E5=BC=80=E5=BF=83=E2=80=9D</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpln> f</SPAN><SPAN class=3Dpun>(){});</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dcom>// fails</SPAN><SPAN class=3Dpln> =
=E5=A4=B1=E8=B4=A5<BR><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
works =E6=88=90=E5=8A=9F</SPAN><SPAN class=3Dpln><BR> <BR>&nbsp; =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
fails</SPAN><SPAN class=3Dpln> =E5=A4=B1=E8=B4=A5<BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln> </SPAN><SPAN class=3Dcom>// =
works</SPAN><SPAN class=3Dpln> =E6=88=90=E5=8A=9F<BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; =
setTimeout</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>},</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dlit>100</SPAN><SPAN class=3Dpun>);</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dcom>// fails</SPAN></PRE>
<P>It also means that we can=E2=80=99t use such common pattern as =
returning named=20
function expression without an assignment:</P>
<P>=E8=BF=99=E4=B9=9F=E6=84=8F=E5=91=B3=E7=9D=80=E6=88=91=E4=BB=AC=E4=B8=8D=
=E8=83=BD=E4=BD=BF=E7=94=A8=E8=BF=99=E7=A7=8D=E6=99=AE=E9=80=9A=E7=9A=84=E6=
=A8=A1=E5=BC=8F=E8=80=8C=E6=B2=A1=E6=9C=89=E8=B5=8B=E5=80=BC=E8=A1=A8=E8=BE=
=BE=E5=BC=8F=E4=BD=9C=E4=B8=BA=E8=BF=94=E5=9B=9E=E6=9C=89=E5=90=8D=E5=87=BD=
=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>//=E8=A6=81=E5=8F=96=E4=BB=A3=E8=BF=99=E7=A7=8DSafari2.x=E4=B8=
=8D=E5=85=BC=E5=AE=B9=E7=9A=84=E6=83=85=E5=86=B5 Instead of this =
non-Safari-2x-compatible syntax:</SPAN><SPAN class=3Dpln> <BR>&nbsp; =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>featureTest</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// =
=E6=88=91=E4=BB=AC=E5=BA=94=E8=AF=A5=E4=BD=BF=E7=94=A8=E8=BF=99=E7=A7=8D=E7=
=A8=8D=E5=BE=AE=E5=86=97=E9=95=BF=E7=9A=84=E6=9B=BF=E4=BB=A3=E6=96=B9=E6=B3=
=95we should use this slightly more verbose alternative:</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN =
class=3Dpln> f</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>if</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>featureTest</SPAN><SPAN class=3Dpun>)</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// =
=E6=88=96=E8=80=85=E5=8F=A6=E5=A4=96=E4=B8=80=E7=A7=8D=E5=8F=98=E5=BD=A2o=
r another variation of it:</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>featureTest</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>/* <BR>&nbsp; &nbsp; Unfortunately, by doing so, we =
introduce an extra reference to a function <BR>&nbsp; &nbsp; which gets =
trapped in a closure of returning function. To prevent extra memory =
usage, <BR>&nbsp; &nbsp; we can assign all named function expressions to =
one single variable.
		=E4=B8=8D=E5=B9=B8=E7=9A=84=E6=98=AF =
=E8=BF=99=E6=A0=B7=E5=81=9A=E6=88=91=E4=BB=AC=E5=BC=95=E5=85=A5=E4=BA=86=E5=
=AF=B9=E5=87=BD=E6=95=B0=E7=9A=84=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E5=BC=
=95=E7=94=A8
		=
=E4=BB=96=E5=B0=86=E8=A2=AB=E5=8C=85=E5=90=AB=E5=9C=A8=E8=BF=94=E5=9B=9E=E5=
=87=BD=E6=95=B0=E7=9A=84=E9=97=AD=E5=8C=85=E4=B8=AD
		=
=E4=B8=BA=E4=BA=86=E9=98=B2=E6=AD=A2=E5=A4=9A=E4=BA=8E=E7=9A=84=E5=86=85=E5=
=AD=98=E4=BD=BF=E7=94=A8=EF=BC=8C=E6=88=91=E4=BB=AC=E5=8F=AF=E4=BB=A5=E5=90=
=A7=E6=89=80=E6=9C=89=E7=9A=84=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=
=E8=BE=BE=E5=BC=8F=E8=B5=8B=E5=80=BC=E7=BB=99=E4=B8=80=E4=B8=AA=E5=8D=95=E7=
=8B=AC=E7=9A=84=E5=8F=98=E9=87=8F<BR>&nbsp; */</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN =
class=3Dpln> __temp</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>if</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>featureTest</SPAN><SPAN class=3Dpun>)</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>__temp </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>__temp </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>...</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>featureTest2</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>__temp </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>__temp </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){});</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>/*<BR>&nbsp; &nbsp; Note that subsequent assignments destroy =
previous references, <BR>&nbsp; &nbsp; preventing any excessive memory =
usage.
		=
=E6=B3=A8=E9=87=8A=EF=BC=9A=E5=90=8E=E9=9D=A2=E7=9A=84=E8=B5=8B=E5=80=BC=E9=
=94=80=E6=AF=81=E4=BA=86=E5=89=8D=E9=9D=A2=E7=9A=84=E5=BC=95=E7=94=A8=EF=BC=
=8C=E9=98=B2=E6=AD=A2=E4=BB=BB=E4=BD=95=E8=BF=87=E5=A4=9A=E7=9A=84=E5=86=85=
=E5=AD=98=E4=BD=BF=E7=94=A8<BR>&nbsp; */</SPAN></PRE>
<P>If Safari 2.x compatibility is important, we need to make sure=20
<STRONG>=E2=80=9Cincompatible=E2=80=9D constructs do not even appear in =
the source</STRONG>.=20
This is of course quite irritating, but is definitely possible to =
achieve,=20
especially when knowing the root of the problem.</P>
<P>=E5=A6=82=E6=9E=9CSafari2.x=E7=9A=84=E5=85=BC=E5=AE=B9=E6=80=A7=E9=9D=9E=
=E5=B8=B8=E9=87=8D=E8=A6=81=E3=80=82=E6=88=91=E4=BB=AC=E9=9C=80=E8=A6=81=E4=
=BF=9D=E8=AF=81=E4=B8=8D=E5=85=BC=E5=AE=B9=E7=9A=84=E7=BB=93=E6=9E=84=E4=B8=
=8D=E5=86=8D=E4=BB=A3=E7=A0=81=E4=B8=AD=E5=87=BA=E7=8E=B0=E3=80=82=E8=BF=99=
=E5=BD=93=E7=84=B6=E6=98=AF=E9=9D=9E=E5=B8=B8=E6=B0=94=E4=BA=BA=E7=9A=84=EF=
=BC=8C=E4=BD=86=E6=98=AF=E4=BB=96=E7=A1=AE=E5=AE=9E=E6=98=8E=E7=A1=AE=E7=9A=
=84=E5=8F=AF=E4=BB=A5=E5=81=9A=E5=88=B0=E7=9A=84=EF=BC=8C=E5=B0=A4=E5=85=B6=
=E6=98=AF=E5=BD=93=E6=88=91=E4=BB=AC=E7=9F=A5=E9=81=93=E9=97=AE=E9=A2=98=E7=
=9A=84=E6=A0=B9=E6=BA=90=E3=80=82</P>
<P>It=E2=80=99s also worth mentioning that declaring a function as NFE =
in Safari 2.x=20
exhibits another minor glitch, where function representation does not =
contain=20
function identifier:</P>
<P>=E8=BF=98=E5=80=BC=E5=BE=97=E4=B8=80=E6=8F=90=E7=9A=84=E6=98=AF=E5=9C=A8=
Safari=E4=B8=AD=E5=A3=B0=E6=98=8E=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E6=98=
=AF=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=BE=E5=BC=8F=E7=9A=84=
=E6=97=B6=E5=80=99=E5=AD=98=E5=9C=A8=E5=8F=A6=E5=A4=96=E4=B8=80=E4=B8=AA=E5=
=B0=8F=E7=9A=84=E9=97=AE=E9=A2=98=EF=BC=8C=E8=BF=99=E6=98=AF=E5=87=BD=E6=95=
=B0=E8=A1=A8=E7=A4=BA=E6=B3=95=E4=B8=8D=E5=90=AB=E6=9C=89=E5=87=BD=E6=95=B0=
=E6=A0=87=E7=A4=BA=E7=AC=A6=EF=BC=88=E4=BC=B0=E8=AE=A1=E6=98=AFtoString=E7=
=9A=84=E9=97=AE=E9=A2=98=EF=BC=89</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> f </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> g</SPAN><SPAN =
class=3Dpun>(){};</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// Notice how function representation is lacking `g` =
identifier</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dtyp>String</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>g</SPAN><SPAN class=3Dpun>);</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dcom>// function () { }</SPAN></PRE>
<P>This is not really a big deal. As I have already mentioned before, =
function=20
decompilation is something that <A=20
href=3D"http://thinkweb2.com/projects/prototype/those-tricky-functions/" =

linkindex=3D"14">should not be relied upon</A> anyway. </P>
<P>=E8=BF=99=E4=B8=8D=E6=98=AF=E4=B8=AA=E5=BE=88=E5=A4=A7=E7=9A=84=E9=97=AE=
=E9=A2=98=E3=80=82=E5=9B=A0=E4=B8=BA=E4=B9=8B=E5=89=8D=E6=88=91=E5=B7=B2=E7=
=BB=8F=E8=AF=B4=E8=BF=87=EF=BC=8C=E5=87=BD=E6=95=B0=E5=8F=8D=E7=BC=96=E8=AF=
=91=E5=9C=A8=E4=BB=BB=E4=BD=95=E6=83=85=E5=86=B5=E4=B8=8B=E9=83=BD=E6=98=AF=
=E4=B8=8D=E5=8F=AF=E4=BF=A1=E8=B5=96=E7=9A=84=E3=80=82</P>
<H2 id=3Dsolution>=E8=A7=A3=E5=86=B3=E6=96=B9=E6=A1=88<A =
name=3Dsolution></A> </H2><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> fn </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN =
class=3Dcom>//=E5=A3=B0=E6=98=8E=E4=B8=80=E4=B8=AA=E5=8F=98=E9=87=8F=EF=BC=
=8C=E6=9D=A5=E7=BB=99=E4=BB=96=E8=B5=8B=E5=80=BC=E5=87=BD=E6=95=B0=E5=AF=B9=
=E8=B1=A1 declare a variable to assign function object to</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN =
class=3Dpln> f</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// =
=E6=9D=A1=E4=BB=B6=E7=9A=84=E5=88=9B=E5=BB=BA=E4=B8=80=E4=B8=AA=E6=9C=89=E5=
=90=8D=E5=87=BD=E6=95=B0 conditionally create a named =
function</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>// =
=E5=B9=B6=E6=8A=8A=E5=AE=83=E7=9A=84=E5=BC=95=E7=94=A8=E8=B5=8B=E5=80=BC=E7=
=BB=99f and assign its reference to `f`</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dkwd>if</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dkwd>true</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; f </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>false</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; f =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> F</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>//=E7=BB=99=E4=B8=80=E4=B8=AA=E5=92=8C=E5=87=BD=E6=95=B0=E5=90=
=8D=E7=9B=B8=E5=85=B3=E7=9A=84=E5=8F=98=E9=87=8F=E4=BB=A5null=E5=80=BC =
Assign `null` to a variable corresponding to a function name</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>//=E8=BF=99=E5=8F=AF=E4=BB=A5=E4=BD=BF=E5=BE=97=E5=87=BD=E6=95=
=B0=E5=AF=B9=E8=B1=A1=EF=BC=88=E9=80=9A=E8=BF=87=E6=A0=87=E7=A4=BA=E7=AC=A6=
=E7=9A=84=E5=BC=95=E7=94=A8=EF=BC=89=E5=8F=AF=E4=BB=A5=E8=A2=AB=E5=9E=83=E5=
=9C=BE=E6=94=B6=E9=9B=86=E6=89=80=E5=BE=97=E5=88=B0This marks the =
function object (referred to by that identifier)</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// available for =
garbage collection</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> F </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>null</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>//=E8=BF=94=E5=9B=9E=E4=B8=80=E4=B8=AA=E6=9D=A1=E4=BB=B6=E5=AE=
=9A=E4=B9=89=E7=9A=84=E5=87=BD=E6=95=B0 return a conditionally defined =
function</SPAN><SPAN class=3Dpln> <BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> f</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<P>Finally, here=E2=80=99s how we would apply this =
=E2=80=9Ctechinque=E2=80=9D in real life, when=20
writing something like a cross-browser <CODE>addEvent</CODE> =
function:</P>
<P>=E6=9C=80=E5=90=8E=EF=BC=8C=E5=BD=93=E6=88=91=E4=B9=88=E4=B8=80=E4=B8=AA=
=E7=B1=BB=E4=BC=BC=E4=BA=8E=E8=B7=A8=E6=B5=8F=E8=A7=88=E5=99=A8addEvent=E5=
=87=BD=E6=95=B0=E7=9A=84=E7=B1=BB=E4=BC=BC=E5=87=BD=E6=95=B0=E6=97=B6=EF=BC=
=8C=E4=B8=8B=E9=9D=A2=E5=B0=B1=E6=98=AF=E6=88=91=E4=BB=AC=E5=A6=82=E4=BD=95=
=E5=9C=A8=E7=9C=9F=E5=AE=9E=E7=9A=84=E5=BA=94=E7=94=A8=E4=B8=AD=E4=BD=BF=E7=
=94=A8=E8=BF=99=E4=B8=AA=E6=8A=80=E6=9C=AF</P><PRE class=3Dprettyprint =
lang=3Djavascript><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dcom>// 1) =
=E7=94=A8=E4=B8=80=E4=B8=AA=E5=88=86=E7=A6=BB=E7=9A=84=E4=BD=9C=E7=94=A8=E5=
=9F=9F=E5=B0=81=E8=A3=85=E5=A3=B0=E6=98=8E enclose declaration with a =
separate scope</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> addEvent </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> docEl </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> document</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>documentElement</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>// =
2)=E5=A3=B0=E6=98=8E=E4=B8=80=E4=B8=AA=E5=8F=98=E9=87=8F=EF=BC=8C=E7=94=A8=
=E6=9D=A5=E8=B5=8B=E5=80=BC=E4=B8=BA=E5=87=BD=E6=95=B0  declare a =
variable to assign function to</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> fn</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>docEl</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>addEventListener</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dcom>// 3) =
=E7=A1=AE=E4=BF=9D=E7=BB=99=E5=87=BD=E6=95=B0=E4=B8=80=E4=B8=AA=E6=8F=8F=E8=
=BF=B0=E7=9A=84=E6=A0=87=E7=A4=BA=E7=AC=A6 make sure to give function a =
descriptive identifier</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
fn </SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> addEvent</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>element</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> eventName</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> callback</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
element</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>addEventListener</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>eventName</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> =
callback</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>false</SPAN><SPAN class=3Dpun>);</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>docEl</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>attachEvent</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; fn =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> addEvent</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>element</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> eventName</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> callback</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
element</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>attachEvent</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dstr>'on'</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>+</SPAN><SPAN class=3Dpln> eventName</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> callback</SPAN><SPAN =
class=3Dpun>);</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>else</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; fn =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> addEvent</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>element</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> eventName</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> callback</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; &nbsp; =
element</SPAN><SPAN class=3Dpun>[</SPAN><SPAN =
class=3Dstr>'on'</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>+</SPAN><SPAN class=3Dpln> eventName</SPAN><SPAN =
class=3Dpun>]</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> callback</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dcom>// =
4)=E6=B8=85=E9=99=A4=E9=80=9A=E8=BF=87JScript=E5=88=9B=E5=BB=BA=E7=9A=84a=
ddEvent=E5=87=BD=E6=95=B0  clean up `addEvent` function created by =
JScript</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>// &nbsp; =
&nbsp;=E4=BF=9D=E8=AF=81=E5=9C=A8=E8=B5=8B=E5=80=BC=E4=B9=8B=E5=89=8D=E5=8A=
=A0=E4=B8=8Avarmake sure to either prepend assignment with `var`, =
</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// =
&nbsp; =
&nbsp;=E6=88=96=E8=80=85=E5=9C=A8=E5=87=BD=E6=95=B0=E9=A1=B6=E7=AB=AF=E5=A3=
=B0=E6=98=8E addEvent or declare `addEvent` at the top of the =
function</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> addEvent </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>null</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN class=3Dcom>// =
5)=E6=9C=80=E5=90=8E=E9=80=9A=E8=BF=87fn=E8=BF=94=E5=9B=9E=E5=87=BD=E6=95=
=B0=E7=9A=84=E5=BC=95=E7=94=A8 finally return function referenced by =
`fn`</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> fn</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<H2 =
id=3Dalternative_solution>=E5=8F=AF=E6=9B=BF=E4=BB=A3=E7=9A=84=E8=A7=A3=E5=
=86=B3=E6=96=B9=E6=A1=88 <A name=3Dalt-solution></A></H2>
<P>It=E2=80=99s worth mentioning that there actually exist alternative =
ways of having=20
descriptive names in call stacks. Ways that don=E2=80=99t require one to =
use named=20
function expressions. First of all, it is often possible to define =
function via=20
declaration, rather than via expression. This option is only viable when =
you=20
don=E2=80=99t need to create more than one function:</P>
<P>=E9=9C=80=E8=A6=81=E8=AF=B4=E6=98=8E=EF=BC=8C=E5=AE=9E=E9=99=85=E4=B8=8A=
=E7=BA=AF=E5=9C=A8=E4=B8=80=E4=B8=AA=E7=A7=8D=E4=BD=BF=E5=BE=97=E5=9C=A8=E8=
=B0=83=E7=94=A8=E6=A0=88=E4=B8=8A=E6=98=BE=E7=A4=BA=E6=8F=8F=E8=BF=B0=E5=90=
=8D=E7=A7=B0=EF=BC=88=E5=87=BD=E6=95=B0=E5=90=8D=EF=BC=89=E7=9A=84=E6=9B=BF=
=E4=BB=A3=E6=96=B9=E6=B3=95=E3=80=82=E4=B8=80=E4=B8=AA=E4=B8=8D=E9=9C=80=E8=
=A6=81=E4=BD=BF=E7=94=A8=E6=9C=89=E5=90=8D=E5=87=BD=E6=95=B0=E8=A1=A8=E8=BE=
=BE=E5=BC=8F=E7=9A=84=E6=96=B9=E6=B3=95=E3=80=82=E9=A6=96=E5=85=88=EF=BC=8C=
=E9=80=9A=E5=B8=B8=E5=8F=AF=E4=BB=A5=E4=BD=BF=E7=94=A8=E5=A3=B0=E6=98=8E=E8=
=80=8C=E4=B8=8D=E6=98=AF=E4=BD=BF=E7=94=A8=E8=A1=A8=E8=BE=BE=E5=BC=8F=E6=9D=
=A5=E5=AE=9A=E4=B9=89=E5=87=BD=E6=95=B0=E3=80=82=E8=BF=99=E7=A7=8D=E9=80=89=
=E6=8B=A9=E9=80=9A=E5=B8=B8=E5=8F=AA=E6=98=AF=E9=80=82=E5=BA=94=E4=BA=8E=E4=
=BD=A0=E4=B8=8D=E9=9C=80=E8=A6=81=E5=88=9B=E5=BB=BA=E5=A4=9A=E4=B8=AA=E5=87=
=BD=E6=95=B0=E7=9A=84=E6=83=85=E5=86=B5=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> hasClassName =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dcom>// =
=E5=AE=9A=E4=B9=89=E4=B8=80=E4=BA=9B=E7=A7=81=E6=9C=89=E5=8F=98=E9=87=8Fd=
efine some private variables</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> cache </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>};</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN =
class=3Dcom>//=E4=BD=BF=E7=94=A8=E5=87=BD=E6=95=B0=E5=AE=9A=E4=B9=89 use =
function declaration</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
hasClassName</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>element</SPAN><SPAN class=3Dpun>,</SPAN><SPAN class=3Dpln> =
className</SPAN><SPAN class=3Dpun>)</SPAN><SPAN class=3Dpln> =
</SPAN><SPAN class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> _className =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'(?:^|\\s+)'</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>+</SPAN><SPAN class=3Dpln> className </SPAN><SPAN =
class=3Dpun>+</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'(?:\\s+|$)'</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>var</SPAN><SPAN class=3Dpln> re </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> cache</SPAN><SPAN =
class=3Dpun>[</SPAN><SPAN class=3Dpln>_className</SPAN><SPAN =
class=3Dpun>]</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>||</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>cache</SPAN><SPAN =
class=3Dpun>[</SPAN><SPAN class=3Dpln>_className</SPAN><SPAN =
class=3Dpun>]</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>new</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dtyp>RegExp</SPAN><SPAN class=3Dpun>(</SPAN><SPAN =
class=3Dpln>_className</SPAN><SPAN class=3Dpun>));</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> re</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>test</SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dpln>element</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>className</SPAN><SPAN =
class=3Dpun>);</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dcom>// =E8=BF=94=E5=9B=9E=E5=87=BD=E6=95=B0return =
function</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> hasClassName</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dpun>})();</SPAN></PRE>
<P>This obviously wouldn=E2=80=99t work when forking function =
definitions. Nevertheless,=20
there=E2=80=99s an interesting pattern that I first seen used by <A=20
href=3D"http://tobielangel.com/" linkindex=3D"15">Tobie Langel</A>. The =
way it works=20
is by <STRONG>defining all functions upfront using function =
declarations, but=20
giving them slightly different identifiers</STRONG>:</P>
<P>=E8=BF=99=E7=A7=8D=E6=96=B9=E6=B3=95=E6=98=BE=E7=84=B6=E5=AF=B9=E4=BA=8E=
=E5=A4=9A=E8=B7=AF=E7=9A=84=E5=87=BD=E6=95=B0=E5=AE=9A=E4=B9=89=E4=B8=8D=E9=
=80=82=E7=94=A8=E3=80=82=E4=BD=86=E6=98=AF=EF=BC=8C=E6=9C=89=E4=B8=80=E4=B8=
=AA=E6=9C=89=E8=B6=A3=E7=9A=84=E6=96=B9=E6=B3=95=EF=BC=8C=E8=BF=99=E4=B8=AA=
=E6=96=B9=E6=B3=95=E6=88=91=E7=AC=AC=E4=B8=80=E6=AC=A1=E5=9C=A8=E7=9C=8B=E5=
=88=B0<A href=3D"http://tobielangel.com/"=20
linkindex=3D"15">Tobie =
Langel</A>.=E5=9C=A8=E4=BD=BF=E7=94=A8=E3=80=82=E8=BF=99=E4=B8=AA=E7=94=A8=
=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E5=AE=9A=E4=B9=89=E6=89=80=E6=9C=89=E7=
=9A=84=E5=87=BD=E6=95=B0=EF=BC=8C=E4=BD=86=E6=98=AF=E7=BB=99=E8=BF=99=E4=B8=
=AA=E5=87=BD=E6=95=B0=E5=A3=B0=E6=98=8E=E4=BB=A5=E7=A8=8D=E5=BE=AE=E4=B8=8D=
=E5=90=8C=E7=9A=84=E6=A0=87=E7=A4=BA=E7=AC=A6=E3=80=82</P><PRE =
class=3Dprettyprint lang=3Djavascript><SPAN class=3Dpln>&nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> addEvent =
</SPAN><SPAN class=3Dpun>=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>function</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>var</SPAN><SPAN class=3Dpln> docEl </SPAN><SPAN =
class=3Dpun>=3D</SPAN><SPAN class=3Dpln> document</SPAN><SPAN =
class=3Dpun>.</SPAN><SPAN class=3Dpln>documentElement</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
addEventListener</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN class=3Dcom>/* ... =
*/</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>function</SPAN><SPAN class=3Dpln> attachEvent</SPAN><SPAN =
class=3Dpun>(){</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dcom>/* ... */</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>function</SPAN><SPAN class=3Dpln> =
addEventAsProperty</SPAN><SPAN class=3Dpun>(){</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN class=3Dcom>/* ... =
*/</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>if</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>(</SPAN><SPAN class=3Dkwd>typeof</SPAN><SPAN class=3Dpln> =
docEl</SPAN><SPAN class=3Dpun>.</SPAN><SPAN class=3Dpln>addEventListener =
</SPAN><SPAN class=3Dpun>!=3D</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>'undefined'</SPAN><SPAN class=3Dpun>)</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dpun>{</SPAN><SPAN =
class=3Dpln><BR>&nbsp; &nbsp; &nbsp; </SPAN><SPAN =
class=3Dkwd>return</SPAN><SPAN class=3Dpln> addEventListener</SPAN><SPAN =
class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; </SPAN><SPAN =
class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; elseif =
</SPAN><SPAN class=3Dpun>(</SPAN><SPAN class=3Dkwd>typeof</SPAN><SPAN =
class=3Dpln> docEl</SPAN><SPAN class=3Dpun>.</SPAN><SPAN =
class=3Dpln>attachEvent </SPAN><SPAN class=3Dpun>!=3D</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dstr>'undefined'</SPAN><SPAN =
class=3Dpun>)</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dpun>{</SPAN><SPAN class=3Dpln><BR>&nbsp; &nbsp; &nbsp; =
</SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
attachEvent</SPAN><SPAN class=3Dpun>;</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dpun>}</SPAN><SPAN class=3Dpln><BR>&nbsp; =
&nbsp; </SPAN><SPAN class=3Dkwd>return</SPAN><SPAN class=3Dpln> =
addEventAsProperty</SPAN><SPAN class=3Dpun>;</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dpun>})();</SPAN></PRE>
<P>While it=E2=80=99s an elegant approach, it has its own drawbacks. =
First, by using=20
different identifiers, you loose naming consistency. Whether =
it=E2=80=99s good or bad=20
thing is not very clear. Some might prefer to have identical names, =
while others=20
wouldn=E2=80=99t mind varying ones; after all, different names can often =
=E2=80=9Cspeak=E2=80=9D about=20
implementation used. For example, seeing =E2=80=9CattachEvent=E2=80=9D =
in debugger, would let=20
you know that it is an <CODE>attachEvent</CODE>-based implementation of=20
<CODE>addEvent</CODE>. On the other hand, implementation-related name =
might not=20
be meaningful at all. If you=E2=80=99re providing an API and name =
=E2=80=9Cinner=E2=80=9D functions in=20
such way, the user of API could easily get lost in all of these =
implementation=20
details. </P>
<P>=E8=99=BD=E7=84=B6=E8=BF=99=E6=98=AF=E4=B8=80=E4=B8=AA=E6=AF=94=E8=BE=83=
=E4=BC=98=E9=9B=85=E7=9A=84=E6=96=B9=E6=B3=95=EF=BC=8C=E4=BD=86=E6=98=AF=E4=
=BB=96=E4=B9=9F=E6=9C=89=E8=87=AA=E5=B7=B1=E7=9A=84=E7=BC=BA=E9=99=B7=E3=80=
=82=E9=A6=96=E5=85=88=EF=BC=8C=E9=80=9A=E8=BF=87=E4=BD=BF=E7=94=A8=E4=B8=8D=
=E5=90=8C=E7=9A=84=E6=A0=87=E7=A4=BA=E7=AC=A6=EF=BC=8C=E4=BD=A0=E5=A4=B1=E5=
=8E=BB=E7=9A=84=E5=91=BD=E5=90=8D=E7=9A=84=E4=B8=80=E8=87=B4=E6=80=A7=E3=80=
=82=E8=BF=99=E6=98=AF=E4=BB=B6=E5=A5=BD=E7=9A=84=E4=BA=8B=E6=83=85=E8=BF=98=
=E6=98=AF=E4=BB=B6=E5=9D=8F=E7=9A=84=E4=BA=8B=E6=83=85=E8=BF=98=E4=B8=8D=E5=
=A5=BD=E8=AF=B4=E3=80=82=E6=9C=89=E4=BA=9B=E4=BA=BA=E5=B8=8C=E6=9C=9B=E4=BD=
=BF=E7=94=A8=E4=B8=80=E6=94=AF=E7=9A=84=E5=91=BD=E5=90=8D=EF=BC=8C=E6=9C=89=
=E4=BA=9B=E4=BA=BA=E5=88=99=E4=B8=8D=E4=BC=9A=E4=BB=8B=E6=84=8F=E6=94=B9=E5=
=8F=98=E5=90=8D=E5=AD=97=EF=BC=9B=E6=AF=95=E7=AB=9F=EF=BC=8C=E4=B8=8D=E5=90=
=8C=E7=9A=84=E5=90=8D=E5=AD=97=E9=80=9A=E5=B8=B8=E4=BB=A3=E8=A1=A8=E4=B8=8D=
=E5=90=8C=E7=9A=84=E5=AE=9E=E7=8E=B0=E3=80=82=E4=BE=8B=E5=A6=82=EF=BC=8C=E5=
=9C=A8=E8=B0=83=E8=AF=95=E5=99=A8=E4=B8=AD=E7=9C=8B=E5=88=B0=E2=80=9Catta=
chEvent=E2=80=9D=EF=BC=8C=E4=BD=A0=E5=B0=B1=E5=8F=AF=E4=BB=A5=E7=9F=A5=E9=
=81=93=E6=98=AFaddEvent=E5=9F=BA=E4=BA=8EattentEvent=E7=9A=84=E4=B8=80=E4=
=B8=AA=E5=AE=9E=E7=8E=B0=E3=80=82=E5=8F=A6=E5=A4=96=E4=B8=80=E6=96=B9=E9=9D=
=A2=EF=BC=8C=E5=92=8C=E5=AE=9E=E7=8E=B0=E7=9B=B8=E5=85=B3=E7=9A=84=E5=90=8D=
=E5=AD=97=E5=8F=AF=E8=83=BD=E6=A0=B9=E6=9C=AC=E6=B2=A1=E6=9C=89=E4=BB=80=E6=
=84=8F=E4=B9=89=E3=80=82=E5=A6=82=E6=9E=9C=E4=BD=A0=E6=8F=90=E4=BE=9B=E4=B8=
=80=E4=B8=AAapi=E5=B9=B6=E7=94=A8=E5=A6=82=E6=AD=A4=E6=96=B9=E6=B3=95=E5=91=
=BD=E5=90=8D=E5=86=85=E9=83=A8=E7=9A=84=E5=87=BD=E6=95=B0=EF=BC=8Capi=E7=9A=
=84=E4=BD=BF=E7=94=A8=E8=80=85=E5=8F=AF=E8=83=BD=E4=BC=9A=E8=A2=AB=E8=BF=99=
=E4=BA=9B=E5=AE=9E=E7=8E=B0=E7=BB=86=E8=8A=82=E6=90=9E=E7=B3=8A=E6=B6=82=E3=
=80=82</P>
<P>A solution to this problem might be to employ different naming =
convention.=20
Just be careful not to introduce extra verbosity. Some alternatives that =
come to=20
mind are:</P>
<P>=E8=A7=A3=E5=86=B3=E8=BF=99=E4=B8=AA=E9=97=AE=E9=A2=98=E7=9A=84=E4=B8=80=
=E4=B8=AA=E6=96=B9=E6=B3=95=E6=98=AF=E4=BD=BF=E7=94=A8=E4=B8=8D=E5=90=8C=E7=
=9A=84=E5=91=BD=E5=90=8D=E8=A7=84=E5=88=99=E3=80=82=E4=BD=86=E6=98=AF=E6=B3=
=A8=E6=84=8F=E4=B8=8D=E8=A6=81=E9=A5=AE=E7=94=A8=E8=BF=87=E5=A4=9A=E7=9A=84=
=E5=86=97=E4=BD=99=E3=80=82=E4=B8=8B=E9=9D=A2=E5=88=97=E5=87=BA=E4=BA=86=E4=
=B8=80=E4=BA=9B=E6=9B=BF=E4=BB=A3=E7=9A=84=E5=91=BD=E5=90=8D=E6=96=B9=E6=B3=
=95</P><PRE class=3Dprettyprint lang=3Djavascript><SPAN =
class=3Dpln>&nbsp; </SPAN><SPAN class=3Dstr>`addEvent`</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`altAddEvent`</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dkwd>and</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`fallbackAddEvent`</SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dcom>// or </SPAN><SPAN class=3Dpln><BR>&nbsp; =
</SPAN><SPAN class=3Dstr>`addEvent`</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`addEvent2`</SPAN><SPAN class=3Dpun>,</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dstr>`addEvent3`</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN class=3Dcom>// or</SPAN><SPAN =
class=3Dpln><BR>&nbsp; </SPAN><SPAN =
class=3Dstr>`addEvent_addEventListener`</SPAN><SPAN =
class=3Dpun>,</SPAN><SPAN class=3Dpln> </SPAN><SPAN =
class=3Dstr>`addEvent_attachEvent`</SPAN><SPAN class=3Dpun>,</SPAN><SPAN =
class=3Dpln> </SPAN><SPAN class=3Dstr>`addEvent_asProperty`</SPAN></PRE>
<P>Another minor issue with this pattern is increased memory =
consumption. By=20
defining all of the function variations upfront, you implicitly create =
N-1=20
unused functions. As you can see, if <CODE>attachEvent</CODE> is found =
in=20
<CODE>document.documentElement</CODE>, then neither=20
<CODE>addEventListener</CODE> nor <CODE>addEventAsProperty</CODE> are =
ever=20
really used. Yet, they already consume memory; memory which is never =
deallocated=20
for the same reason as with JScript=E2=80=99s buggy named expressions - =
both functions=20
are =E2=80=9Ctrapped=E2=80=9D in a closure of returning one. </P>
<P>=E8=BF=99=E7=A7=8D=E6=A8=A1=E5=BC=8F=E7=9A=84=E5=8F=A6=E5=A4=96=E4=B8=80=
=E4=B8=AA=E9=97=AE=E9=A2=98=E5=B0=B1=E6=98=AF=E5=A2=9E=E5=8A=A0=E4=BA=86=E5=
=86=85=E5=AD=98=E7=9A=84=E5=BC=80=E9=94=80=E3=80=82=E9=80=9A=E8=BF=87=E5=AE=
=9A=E4=B9=89=E6=89=80=E6=9C=89=E4=B8=8A=E9=9D=A2=E7=9A=84=E5=87=BD=E6=95=B0=
=E5=8F=98=E7=A7=8D=EF=BC=8C=E4=BD=A0=E9=9A=90=E5=90=AB=E7=9A=84=E5=88=9B=E5=
=BB=BA=E4=BA=86N-1=E4=B8=AA=E5=87=BD=E6=95=B0=E3=80=82=E4=BD=A0=E5=8F=AF=E4=
=BB=A5=E5=8F=91=E7=8E=B0=EF=BC=8C=E5=A6=82=E6=9E=9CattachEvent=E5=9C=A8do=
cument.documentElement=E4=B8=AD=E5=8F=91=E7=8E=B0=EF=BC=8C=E9=82=A3=E4=B9=
=88addEventListener=E5=92=8CaddEventAsProperty=E9=83=BD=E6=B2=A1=E6=9C=89=
=E8=A2=AB=E5=AE=9E=E9=99=85=E7=94=A8=E5=88=B0=E3=80=82=E4=BD=86=E6=98=AF=E4=
=BB=96=E4=BB=AC=E5=B7=B2=E7=BB=8F=E6=B6=88=E8=80=97=E7=9A=84=E5=86=85=E5=AD=
=98=EF=BC=9B=E5=92=8CJscript=E6=9C=89=E5=90=8D=E8=A1=A8=E8=BE=BE=E5=BC=8F=
bug=E7=9A=84=E5=8E=9F=E5=9B=A0=E4=B8=80=E6=A0=B7=E7=9A=84=E5=86=85=E5=AD=98=
=E6=B2=A1=E6=9C=89=E8=A2=AB=E9=87=8A=E6=94=BE=EF=BC=8C=E5=9C=A8=E8=BF=94=E5=
=9B=9E=E4=B8=80=E4=B8=AA=E5=87=BD=E6=95=B0=E7=9A=84=E5=90=8C=E6=97=B6=EF=BC=
=8C=E4=B8=A4=E4=B8=AA=E5=87=BD=E6=95=B0=E8=A2=AB=E2=80=98trapped=E2=80=98=
=E5=9C=A8=E9=97=AD=E5=8C=85=E4=B8=AD=E3=80=82</P>
<P>This increased consumption is of course hardly an issue. If a library =
such as=20
Prototype.js was to use this pattern, there would be not more than =
100-200 extra=20
function objects created. As long as functions are not created in such =
way=20
repeatedly (at runtime) but only once (at load time), you probably =
shouldn=E2=80=99t=20
worry about it.</P>
<P>=E8=BF=99=E4=B8=AA=E9=80=92=E5=A2=9E=E7=9A=84=E5=86=85=E5=AD=98=E4=BD=BF=
=E7=94=A8=E6=98=BE=E7=84=B6=E6=98=AF=E4=B8=AA=E4=B8=A5=E9=87=8D=E7=9A=84=E9=
=97=AE=E9=A2=98=E3=80=82=E5=A6=82=E6=9E=9C=E5=92=8CPrototype.js=E7=B1=BB=E4=
=BC=BC=E7=9A=84=E5=BA=93=E9=9C=80=E8=A6=81=E4=BD=BF=E7=94=A8=E8=BF=99=E7=A7=
=8D=E6=A8=A1=E5=BC=8F=EF=BC=8C=E5=B0=86=E6=9C=89=E5=8F=A6=E5=A4=96=E7=9A=84=
100-200=E4=B8=AA=E5=A4=9A=E4=BA=8E=E7=9A=84=E5=87=BD=E6=95=B0=E5=AF=B9=E8=
=B1=A1=E8=A2=AB=E5=88=9B=E5=BB=BA=E3=80=82=E5=A6=82=E6=9E=9C=E5=87=BD=E6=95=
=B0=E6=B2=A1=E6=9C=89=E8=A2=AB=E9=87=8D=E5=A4=8D=E5=9C=B0=EF=BC=88=E8=BF=90=
=E8=A1=8C=E6=97=B6=EF=BC=89=E7=94=A8=E8=BF=99=E7=A7=8D=E6=96=B9=E5=BC=8F=E5=
=88=9B=E5=BB=BA=EF=BC=8C=E5=8F=AA=E6=98=AF=E5=9C=A8=E5=8A=A0=E8=BD=BD=E6=97=
=B6=E8=A2=AB=E5=88=9B=E5=BB=BA=E4=B8=80=E6=AC=A1=EF=BC=8C=E4=BD=A0=E5=8F=AF=
=E8=83=BD=E5=B0=B1=E4=B8=8D=E7=94=A8=E6=8B=85=E5=BF=83=E8=BF=99=E4=B8=AA=E9=
=97=AE=E9=A2=98=E3=80=82</P>
<H2 id=3Dcredits>=E8=B4=A1=E7=8C=AE=E8=80=85=E5=90=8D=E5=8D=95 <A =
name=3Dcredits></A></H2>
<P><STRONG><EM>Richard Cornford</EM></STRONG>, for being one of the =
first people=20
<A=20
href=3D"http://groups.google.com/group/comp.lang.javascript/msg/5b508b03b=
004bce8"=20
linkindex=3D"16">to explain JScript bug with named function =
expressions</A>.=20
Richard talks and explains most of the bugs mentioned in this article. I =
highly=20
recommend reading his explanation.</P>
<P><STRONG><EM>John-David Dalton</EM></STRONG>, for giving useful =
suggestions=20
about =E2=80=9Cfinal solution=E2=80=9D.</P>
<P><STRONG><EM>Tobie Langel</EM></STRONG>, for ideas presented in =
=E2=80=9Calternative=20
solution=E2=80=9D.</P>
<P=20
style=3D"PADDING-RIGHT: 0.5em; MARGIN-TOP: 2em; PADDING-LEFT: 0.5em; =
BACKGROUND: rgb(255,255,204); FLOAT: left; PADDING-BOTTOM: 0.5em; =
PADDING-TOP: 0.5em; -moz-background-clip: -moz-initial; =
-moz-background-origin: -moz-initial; -moz-background-inline-policy: =
-moz-initial">Have=20
suggestions or corrections? Feel free to <A title=3D""=20
href=3D"http://thinkweb2.com/projects/prototype/named-function-expression=
s-demystified/"=20
linkindex=3D"17">comment on a blog post</A> or <A title=3D" "=20
href=3D"mailto:kangax@gmail.com">drop me an =
email</A></P></DIV></BODY></HTML>

------=_NextPart_000_0000_01CB6714.93401B50
Content-Type: text/css;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.cssrain.cn/demo/named%20function%20expression/Named%20function%20expressions%20demystified_files/screen.css

HTML {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
BODY {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DIV {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
SPAN {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
OBJECT {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
IFRAME {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H1 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H2 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H3 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H4 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H5 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
H6 {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
P {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
BLOCKQUOTE {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
PRE {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
A {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
ABBR {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
ACRONYM {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
ADDRESS {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
CODE {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DEL {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DFN {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
EM {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
IMG {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
Q {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DL {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DT {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
DD {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
OL {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
UL {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
LI {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
FIELDSET {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
FORM {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
LABEL {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
LEGEND {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TABLE {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
CAPTION {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TBODY {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TFOOT {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
THEAD {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TR {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TH {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
TD {
	BORDER-TOP-WIDTH: 0px; PADDING-RIGHT: 0px; PADDING-LEFT: 0px; =
BORDER-LEFT-WIDTH: 0px; FONT-SIZE: 100%; BORDER-BOTTOM-WIDTH: 0px; =
PADDING-BOTTOM: 0px; MARGIN: 0px; VERTICAL-ALIGN: baseline; PADDING-TOP: =
0px; FONT-FAMILY: inherit; BORDER-RIGHT-WIDTH: 0px
}
BODY {
	LINE-HEIGHT: 1.5
}
TABLE {
	BORDER-COLLAPSE: separate; border-spacing: 0
}
CAPTION {
	FONT-WEIGHT: normal; TEXT-ALIGN: left
}
TH {
	FONT-WEIGHT: normal; TEXT-ALIGN: left
}
TD {
	FONT-WEIGHT: normal; TEXT-ALIGN: left
}
TABLE {
	VERTICAL-ALIGN: middle
}
TD {
	VERTICAL-ALIGN: middle
}
TH {
	VERTICAL-ALIGN: middle
}
BLOCKQUOTE:unknown {
	content: ""
}
BLOCKQUOTE:unknown {
	content: ""
}
Q:unknown {
	content: ""
}
Q:unknown {
	content: ""
}
BLOCKQUOTE {
	quotes: "" ""
}
Q {
	quotes: "" ""
}
A IMG {
	BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: =
none; BORDER-BOTTOM-STYLE: none
}
BODY {
	FONT-SIZE: 75%; BACKGROUND: #fff; COLOR: #222; FONT-FAMILY: "Helvetica =
Neue", Arial, Helvetica, sans-serif
}
H1 {
	FONT-WEIGHT: normal; COLOR: #111
}
H2 {
	FONT-WEIGHT: normal; COLOR: #111
}
H3 {
	FONT-WEIGHT: normal; COLOR: #111
}
H4 {
	FONT-WEIGHT: normal; COLOR: #111
}
H5 {
	FONT-WEIGHT: normal; COLOR: #111
}
H6 {
	FONT-WEIGHT: normal; COLOR: #111
}
H1 {
	FONT-SIZE: 3em; MARGIN-BOTTOM: 0.5em; LINE-HEIGHT: 1
}
H2 {
	FONT-SIZE: 2em; MARGIN-BOTTOM: 0.75em
}
H3 {
	FONT-SIZE: 1.5em; MARGIN-BOTTOM: 1em; LINE-HEIGHT: 1
}
H4 {
	FONT-SIZE: 1.2em; MARGIN-BOTTOM: 1.25em; LINE-HEIGHT: 1.25
}
H5 {
	FONT-WEIGHT: bold; FONT-SIZE: 1em; MARGIN-BOTTOM: 1.5em
}
H6 {
	FONT-WEIGHT: bold; FONT-SIZE: 1em
}
H1 IMG {
	MARGIN: 0px
}
H2 IMG {
	MARGIN: 0px
}
H3 IMG {
	MARGIN: 0px
}
H4 IMG {
	MARGIN: 0px
}
H5 IMG {
	MARGIN: 0px
}
H6 IMG {
	MARGIN: 0px
}
P {
	MARGIN: 0px 0px 1.5em
}
P IMG.left {
	PADDING-RIGHT: 0px; PADDING-LEFT: 0px; FLOAT: left; PADDING-BOTTOM: =
0px; MARGIN: 1.5em 1.5em 1.5em 0px; PADDING-TOP: 0px
}
P IMG.right {
	FLOAT: right; MARGIN: 1.5em 0px 1.5em 1.5em
}
A:focus {
	COLOR: #000
}
A:hover {
	COLOR: #000
}
A {
	COLOR: #009; TEXT-DECORATION: underline
}
BLOCKQUOTE {
	MARGIN: 1.5em; COLOR: #666; FONT-STYLE: italic
}
STRONG {
	FONT-WEIGHT: bold
}
EM {
	FONT-STYLE: italic
}
DFN {
	FONT-STYLE: italic
}
DFN {
	FONT-WEIGHT: bold
}
SUP {
	LINE-HEIGHT: 0
}
SUB {
	LINE-HEIGHT: 0
}
ABBR {
	BORDER-BOTTOM: #666 1px dotted
}
ACRONYM {
	BORDER-BOTTOM: #666 1px dotted
}
ADDRESS {
	MARGIN: 0px 0px 1.5em; FONT-STYLE: italic
}
DEL {
	COLOR: #666
}
PRE {
	MARGIN: 1.5em 0px; WHITE-SPACE: pre
}
PRE {
	FONT: 1em/1.5 'andale mono', 'lucida console', monospace
}
CODE {
	FONT: 1em/1.5 'andale mono', 'lucida console', monospace
}
TT {
	FONT: 1em/1.5 'andale mono', 'lucida console', monospace
}
LI UL {
	MARGIN: 0px 1.5em
}
LI OL {
	MARGIN: 0px 1.5em
}
UL {
	MARGIN: 0px 1.5em 1.5em
}
OL {
	MARGIN: 0px 1.5em 1.5em
}
UL {
	LIST-STYLE-TYPE: disc
}
OL {
	LIST-STYLE-TYPE: decimal
}
DL {
	MARGIN: 0px 0px 1.5em
}
DL DT {
	FONT-WEIGHT: bold
}
DD {
	MARGIN-LEFT: 1.5em
}
TABLE {
	MARGIN-BOTTOM: 1.4em; WIDTH: 100%
}
TH {
	FONT-WEIGHT: bold
}
THEAD TH {
	BACKGROUND: #c3d9ff
}
TH {
	PADDING-RIGHT: 10px; PADDING-LEFT: 5px; PADDING-BOTTOM: 4px; =
PADDING-TOP: 4px
}
TD {
	PADDING-RIGHT: 10px; PADDING-LEFT: 5px; PADDING-BOTTOM: 4px; =
PADDING-TOP: 4px
}
CAPTION {
	PADDING-RIGHT: 10px; PADDING-LEFT: 5px; PADDING-BOTTOM: 4px; =
PADDING-TOP: 4px
}
TR.even TD {
	BACKGROUND: #e5ecf9
}
TFOOT {
	FONT-STYLE: italic
}
CAPTION {
	BACKGROUND: #eee
}
.small {
	FONT-SIZE: 0.8em; MARGIN-BOTTOM: 1.87em; LINE-HEIGHT: 1.87em
}
.large {
	FONT-SIZE: 1.2em; MARGIN-BOTTOM: 1.25em; LINE-HEIGHT: 2.5em
}
.hide {
	DISPLAY: none
}
.quiet {
	COLOR: #666
}
.loud {
	COLOR: #000
}
.highlight {
	BACKGROUND: #ff0
}
.added {
	BACKGROUND: #060; COLOR: #fff
}
.removed {
	BACKGROUND: #900; COLOR: #fff
}
.first {
	PADDING-LEFT: 0px; MARGIN-LEFT: 0px
}
.last {
	PADDING-RIGHT: 0px; MARGIN-RIGHT: 0px
}
.top {
	MARGIN-TOP: 0px; PADDING-TOP: 0px
}
.bottom {
	MARGIN-BOTTOM: 0px; PADDING-BOTTOM: 0px
}
LABEL {
	FONT-WEIGHT: bold
}
FIELDSET {
	BORDER-RIGHT: #ccc 1px solid; PADDING-RIGHT: 1.4em; BORDER-TOP: #ccc =
1px solid; PADDING-LEFT: 1.4em; PADDING-BOTTOM: 1.4em; MARGIN: 0px 0px =
1.5em; BORDER-LEFT: #ccc 1px solid; PADDING-TOP: 1.4em; BORDER-BOTTOM: =
#ccc 1px solid
}
LEGEND {
	FONT-WEIGHT: bold; FONT-SIZE: 1.2em
}
INPUT[type=3Dtext] {
	BORDER-RIGHT: #bbb 1px solid; BORDER-TOP: #bbb 1px solid; BORDER-LEFT: =
#bbb 1px solid; BORDER-BOTTOM: #bbb 1px solid; BACKGROUND-COLOR: #fff
}
INPUT.text {
	BORDER-RIGHT: #bbb 1px solid; BORDER-TOP: #bbb 1px solid; BORDER-LEFT: =
#bbb 1px solid; BORDER-BOTTOM: #bbb 1px solid; BACKGROUND-COLOR: #fff
}
INPUT.title {
	BORDER-RIGHT: #bbb 1px solid; BORDER-TOP: #bbb 1px solid; BORDER-LEFT: =
#bbb 1px solid; BORDER-BOTTOM: #bbb 1px solid; BACKGROUND-COLOR: #fff
}
TEXTAREA {
	BORDER-RIGHT: #bbb 1px solid; BORDER-TOP: #bbb 1px solid; BORDER-LEFT: =
#bbb 1px solid; BORDER-BOTTOM: #bbb 1px solid; BACKGROUND-COLOR: #fff
}
SELECT {
	BORDER-RIGHT: #bbb 1px solid; BORDER-TOP: #bbb 1px solid; BORDER-LEFT: =
#bbb 1px solid; BORDER-BOTTOM: #bbb 1px solid; BACKGROUND-COLOR: #fff
}
INPUT[type=3Dtext]:focus {
	BORDER-LEFT-COLOR: #666; BORDER-BOTTOM-COLOR: #666; BORDER-TOP-COLOR: =
#666; BORDER-RIGHT-COLOR: #666
}
INPUT.text:focus {
	BORDER-LEFT-COLOR: #666; BORDER-BOTTOM-COLOR: #666; BORDER-TOP-COLOR: =
#666; BORDER-RIGHT-COLOR: #666
}
INPUT.title:focus {
	BORDER-LEFT-COLOR: #666; BORDER-BOTTOM-COLOR: #666; BORDER-TOP-COLOR: =
#666; BORDER-RIGHT-COLOR: #666
}
TEXTAREA:focus {
	BORDER-LEFT-COLOR: #666; BORDER-BOTTOM-COLOR: #666; BORDER-TOP-COLOR: =
#666; BORDER-RIGHT-COLOR: #666
}
SELECT:focus {
	BORDER-LEFT-COLOR: #666; BORDER-BOTTOM-COLOR: #666; BORDER-TOP-COLOR: =
#666; BORDER-RIGHT-COLOR: #666
}
INPUT[type=3Dtext] {
	MARGIN: 0.5em 0px
}
INPUT.text {
	MARGIN: 0.5em 0px
}
INPUT.title {
	MARGIN: 0.5em 0px
}
TEXTAREA {
	MARGIN: 0.5em 0px
}
SELECT {
	MARGIN: 0.5em 0px
}
INPUT.text {
	PADDING-RIGHT: 5px; PADDING-LEFT: 5px; PADDING-BOTTOM: 5px; WIDTH: =
300px; PADDING-TOP: 5px
}
INPUT.title {
	PADDING-RIGHT: 5px; PADDING-LEFT: 5px; PADDING-BOTTOM: 5px; WIDTH: =
300px; PADDING-TOP: 5px
}
INPUT.title {
	FONT-SIZE: 1.5em
}
TEXTAREA {
	PADDING-RIGHT: 5px; PADDING-LEFT: 5px; PADDING-BOTTOM: 5px; WIDTH: =
390px; PADDING-TOP: 5px; HEIGHT: 250px
}
INPUT[type=3Dcheckbox] {
	POSITION: relative; TOP: 0.25em
}
INPUT[type=3Dradio] {
	POSITION: relative; TOP: 0.25em
}
INPUT.checkbox {
	POSITION: relative; TOP: 0.25em
}
INPUT.radio {
	POSITION: relative; TOP: 0.25em
}
FORM.inline {
	LINE-HEIGHT: 3
}
FORM.inline P {
	MARGIN-BOTTOM: 0px
}
.error {
	BORDER-RIGHT: #ddd 2px solid; PADDING-RIGHT: 0.8em; BORDER-TOP: #ddd =
2px solid; PADDING-LEFT: 0.8em; MARGIN-BOTTOM: 1em; PADDING-BOTTOM: =
0.8em; BORDER-LEFT: #ddd 2px solid; PADDING-TOP: 0.8em; BORDER-BOTTOM: =
#ddd 2px solid
}
.notice {
	BORDER-RIGHT: #ddd 2px solid; PADDING-RIGHT: 0.8em; BORDER-TOP: #ddd =
2px solid; PADDING-LEFT: 0.8em; MARGIN-BOTTOM: 1em; PADDING-BOTTOM: =
0.8em; BORDER-LEFT: #ddd 2px solid; PADDING-TOP: 0.8em; BORDER-BOTTOM: =
#ddd 2px solid
}
.success {
	BORDER-RIGHT: #ddd 2px solid; PADDING-RIGHT: 0.8em; BORDER-TOP: #ddd =
2px solid; PADDING-LEFT: 0.8em; MARGIN-BOTTOM: 1em; PADDING-BOTTOM: =
0.8em; BORDER-LEFT: #ddd 2px solid; PADDING-TOP: 0.8em; BORDER-BOTTOM: =
#ddd 2px solid
}
.error {
	BORDER-LEFT-COLOR: #fbc2c4; BACKGROUND: #fbe3e4; BORDER-BOTTOM-COLOR: =
#fbc2c4; COLOR: #8a1f11; BORDER-TOP-COLOR: #fbc2c4; BORDER-RIGHT-COLOR: =
#fbc2c4
}
.notice {
	BORDER-LEFT-COLOR: #ffd324; BACKGROUND: #fff6bf; BORDER-BOTTOM-COLOR: =
#ffd324; COLOR: #514721; BORDER-TOP-COLOR: #ffd324; BORDER-RIGHT-COLOR: =
#ffd324
}
.success {
	BORDER-LEFT-COLOR: #c6d880; BACKGROUND: #e6efc2; BORDER-BOTTOM-COLOR: =
#c6d880; COLOR: #264409; BORDER-TOP-COLOR: #c6d880; BORDER-RIGHT-COLOR: =
#c6d880
}
.error A {
	COLOR: #8a1f11
}
.notice A {
	COLOR: #514721
}
.success A {
	COLOR: #264409
}
.container {
	MARGIN: 0px auto; WIDTH: 950px
}
.showgrid {
	BACKGROUND: url(src/grid.png)
}
.column {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-1 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-2 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-3 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-4 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-5 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-6 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-7 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-8 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-9 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-10 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-11 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-12 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-13 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-14 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-15 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-16 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-17 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-18 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-19 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-20 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-21 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-22 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-23 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
DIV.span-24 {
	FLOAT: left; MARGIN-RIGHT: 10px
}
.last {
	MARGIN-RIGHT: 0px
}
DIV.last {
	MARGIN-RIGHT: 0px
}
.span-1 {
	WIDTH: 30px
}
.span-2 {
	WIDTH: 70px
}
.span-3 {
	WIDTH: 110px
}
.span-4 {
	WIDTH: 150px
}
.span-5 {
	WIDTH: 190px
}
.span-6 {
	WIDTH: 230px
}
.span-7 {
	WIDTH: 270px
}
.span-8 {
	WIDTH: 310px
}
.span-9 {
	WIDTH: 350px
}
.span-10 {
	WIDTH: 390px
}
.span-11 {
	WIDTH: 430px
}
.span-12 {
	WIDTH: 470px
}
.span-13 {
	WIDTH: 510px
}
.span-14 {
	WIDTH: 550px
}
.span-15 {
	WIDTH: 590px
}
.span-16 {
	WIDTH: 630px
}
.span-17 {
	WIDTH: 670px
}
.span-18 {
	WIDTH: 710px
}
.span-19 {
	WIDTH: 750px
}
.span-20 {
	WIDTH: 790px
}
.span-21 {
	WIDTH: 830px
}
.span-22 {
	WIDTH: 870px
}
.span-23 {
	WIDTH: 910px
}
.span-24 {
	MARGIN: 0px; WIDTH: 950px
}
DIV.span-24 {
	MARGIN: 0px; WIDTH: 950px
}
INPUT.span-1 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-1 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-2 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-2 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-3 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-3 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-4 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-4 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-5 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-5 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-6 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-6 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-7 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-7 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-8 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-8 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-9 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-9 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-10 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-10 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-11 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-11 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-12 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-12 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-13 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-13 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-14 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-14 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-15 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-15 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-16 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-16 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-17 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-17 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-18 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-18 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-19 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-19 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-20 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-20 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-21 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-21 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-22 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-22 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-23 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-23 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-24 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
TEXTAREA.span-24 {
	PADDING-RIGHT: 5px! important; PADDING-LEFT: 5px! important; =
BORDER-LEFT-WIDTH: 1px! important; BORDER-RIGHT-WIDTH: 1px! important
}
INPUT.span-1 {
	WIDTH: 18px! important
}
TEXTAREA.span-1 {
	WIDTH: 18px! important
}
INPUT.span-2 {
	WIDTH: 58px! important
}
TEXTAREA.span-2 {
	WIDTH: 58px! important
}
INPUT.span-3 {
	WIDTH: 98px! important
}
TEXTAREA.span-3 {
	WIDTH: 98px! important
}
INPUT.span-4 {
	WIDTH: 138px! important
}
TEXTAREA.span-4 {
	WIDTH: 138px! important
}
INPUT.span-5 {
	WIDTH: 178px! important
}
TEXTAREA.span-5 {
	WIDTH: 178px! important
}
INPUT.span-6 {
	WIDTH: 218px! important
}
TEXTAREA.span-6 {
	WIDTH: 218px! important
}
INPUT.span-7 {
	WIDTH: 258px! important
}
TEXTAREA.span-7 {
	WIDTH: 258px! important
}
INPUT.span-8 {
	WIDTH: 298px! important
}
TEXTAREA.span-8 {
	WIDTH: 298px! important
}
INPUT.span-9 {
	WIDTH: 338px! important
}
TEXTAREA.span-9 {
	WIDTH: 338px! important
}
INPUT.span-10 {
	WIDTH: 378px! important
}
TEXTAREA.span-10 {
	WIDTH: 378px! important
}
INPUT.span-11 {
	WIDTH: 418px! important
}
TEXTAREA.span-11 {
	WIDTH: 418px! important
}
INPUT.span-12 {
	WIDTH: 458px! important
}
TEXTAREA.span-12 {
	WIDTH: 458px! important
}
INPUT.span-13 {
	WIDTH: 498px! important
}
TEXTAREA.span-13 {
	WIDTH: 498px! important
}
INPUT.span-14 {
	WIDTH: 538px! important
}
TEXTAREA.span-14 {
	WIDTH: 538px! important
}
INPUT.span-15 {
	WIDTH: 578px! important
}
TEXTAREA.span-15 {
	WIDTH: 578px! important
}
INPUT.span-16 {
	WIDTH: 618px! important
}
TEXTAREA.span-16 {
	WIDTH: 618px! important
}
INPUT.span-17 {
	WIDTH: 658px! important
}
TEXTAREA.span-17 {
	WIDTH: 658px! important
}
INPUT.span-18 {
	WIDTH: 698px! important
}
TEXTAREA.span-18 {
	WIDTH: 698px! important
}
INPUT.span-19 {
	WIDTH: 738px! important
}
TEXTAREA.span-19 {
	WIDTH: 738px! important
}
INPUT.span-20 {
	WIDTH: 778px! important
}
TEXTAREA.span-20 {
	WIDTH: 778px! important
}
INPUT.span-21 {
	WIDTH: 818px! important
}
TEXTAREA.span-21 {
	WIDTH: 818px! important
}
INPUT.span-22 {
	WIDTH: 858px! important
}
TEXTAREA.span-22 {
	WIDTH: 858px! important
}
INPUT.span-23 {
	WIDTH: 898px! important
}
TEXTAREA.span-23 {
	WIDTH: 898px! important
}
INPUT.span-24 {
	WIDTH: 938px! important
}
TEXTAREA.span-24 {
	WIDTH: 938px! important
}
.append-1 {
	PADDING-RIGHT: 40px
}
.append-2 {
	PADDING-RIGHT: 80px
}
.append-3 {
	PADDING-RIGHT: 120px
}
.append-4 {
	PADDING-RIGHT: 160px
}
.append-5 {
	PADDING-RIGHT: 200px
}
.append-6 {
	PADDING-RIGHT: 240px
}
.append-7 {
	PADDING-RIGHT: 280px
}
.append-8 {
	PADDING-RIGHT: 320px
}
.append-9 {
	PADDING-RIGHT: 360px
}
.append-10 {
	PADDING-RIGHT: 400px
}
.append-11 {
	PADDING-RIGHT: 440px
}
.append-12 {
	PADDING-RIGHT: 480px
}
.append-13 {
	PADDING-RIGHT: 520px
}
.append-14 {
	PADDING-RIGHT: 560px
}
.append-15 {
	PADDING-RIGHT: 600px
}
.append-16 {
	PADDING-RIGHT: 640px
}
.append-17 {
	PADDING-RIGHT: 680px
}
.append-18 {
	PADDING-RIGHT: 720px
}
.append-19 {
	PADDING-RIGHT: 760px
}
.append-20 {
	PADDING-RIGHT: 800px
}
.append-21 {
	PADDING-RIGHT: 840px
}
.append-22 {
	PADDING-RIGHT: 880px
}
.append-23 {
	PADDING-RIGHT: 920px
}
.prepend-1 {
	PADDING-LEFT: 40px
}
.prepend-2 {
	PADDING-LEFT: 80px
}
.prepend-3 {
	PADDING-LEFT: 120px
}
.prepend-4 {
	PADDING-LEFT: 160px
}
.prepend-5 {
	PADDING-LEFT: 200px
}
.prepend-6 {
	PADDING-LEFT: 240px
}
.prepend-7 {
	PADDING-LEFT: 280px
}
.prepend-8 {
	PADDING-LEFT: 320px
}
.prepend-9 {
	PADDING-LEFT: 360px
}
.prepend-10 {
	PADDING-LEFT: 400px
}
.prepend-11 {
	PADDING-LEFT: 440px
}
.prepend-12 {
	PADDING-LEFT: 480px
}
.prepend-13 {
	PADDING-LEFT: 520px
}
.prepend-14 {
	PADDING-LEFT: 560px
}
.prepend-15 {
	PADDING-LEFT: 600px
}
.prepend-16 {
	PADDING-LEFT: 640px
}
.prepend-17 {
	PADDING-LEFT: 680px
}
.prepend-18 {
	PADDING-LEFT: 720px
}
.prepend-19 {
	PADDING-LEFT: 760px
}
.prepend-20 {
	PADDING-LEFT: 800px
}
.prepend-21 {
	PADDING-LEFT: 840px
}
.prepend-22 {
	PADDING-LEFT: 880px
}
.prepend-23 {
	PADDING-LEFT: 920px
}
DIV.border {
	BORDER-RIGHT: #eee 1px solid; PADDING-RIGHT: 4px; MARGIN-RIGHT: 5px
}
DIV.colborder {
	BORDER-RIGHT: #eee 1px solid; PADDING-RIGHT: 24px; MARGIN-RIGHT: 25px
}
.pull-1 {
	MARGIN-LEFT: -40px
}
.pull-2 {
	MARGIN-LEFT: -80px
}
.pull-3 {
	MARGIN-LEFT: -120px
}
.pull-4 {
	MARGIN-LEFT: -160px
}
.pull-5 {
	MARGIN-LEFT: -200px
}
.pull-6 {
	MARGIN-LEFT: -240px
}
.pull-7 {
	MARGIN-LEFT: -280px
}
.pull-8 {
	MARGIN-LEFT: -320px
}
.pull-9 {
	MARGIN-LEFT: -360px
}
.pull-10 {
	MARGIN-LEFT: -400px
}
.pull-11 {
	MARGIN-LEFT: -440px
}
.pull-12 {
	MARGIN-LEFT: -480px
}
.pull-13 {
	MARGIN-LEFT: -520px
}
.pull-14 {
	MARGIN-LEFT: -560px
}
.pull-15 {
	MARGIN-LEFT: -600px
}
.pull-16 {
	MARGIN-LEFT: -640px
}
.pull-17 {
	MARGIN-LEFT: -680px
}
.pull-18 {
	MARGIN-LEFT: -720px
}
.pull-19 {
	MARGIN-LEFT: -760px
}
.pull-20 {
	MARGIN-LEFT: -800px
}
.pull-21 {
	MARGIN-LEFT: -840px
}
.pull-22 {
	MARGIN-LEFT: -880px
}
.pull-23 {
	MARGIN-LEFT: -920px
}
.pull-24 {
	MARGIN-LEFT: -960px
}
.pull-1 {
	FLOAT: left; POSITION: relative
}
.pull-2 {
	FLOAT: left; POSITION: relative
}
.pull-3 {
	FLOAT: left; POSITION: relative
}
.pull-4 {
	FLOAT: left; POSITION: relative
}
.pull-5 {
	FLOAT: left; POSITION: relative
}
.pull-6 {
	FLOAT: left; POSITION: relative
}
.pull-7 {
	FLOAT: left; POSITION: relative
}
.pull-8 {
	FLOAT: left; POSITION: relative
}
.pull-9 {
	FLOAT: left; POSITION: relative
}
.pull-10 {
	FLOAT: left; POSITION: relative
}
.pull-11 {
	FLOAT: left; POSITION: relative
}
.pull-12 {
	FLOAT: left; POSITION: relative
}
.pull-13 {
	FLOAT: left; POSITION: relative
}
.pull-14 {
	FLOAT: left; POSITION: relative
}
.pull-15 {
	FLOAT: left; POSITION: relative
}
.pull-16 {
	FLOAT: left; POSITION: relative
}
.pull-17 {
	FLOAT: left; POSITION: relative
}
.pull-18 {
	FLOAT: left; POSITION: relative
}
.pull-19 {
	FLOAT: left; POSITION: relative
}
.pull-20 {
	FLOAT: left; POSITION: relative
}
.pull-21 {
	FLOAT: left; POSITION: relative
}
.pull-22 {
	FLOAT: left; POSITION: relative
}
.pull-23 {
	FLOAT: left; POSITION: relative
}
.pull-24 {
	FLOAT: left; POSITION: relative
}
.push-1 {
	MARGIN: 0px -40px 1.5em 40px
}
.push-2 {
	MARGIN: 0px -80px 1.5em 80px
}
.push-3 {
	MARGIN: 0px -120px 1.5em 120px
}
.push-4 {
	MARGIN: 0px -160px 1.5em 160px
}
.push-5 {
	MARGIN: 0px -200px 1.5em 200px
}
.push-6 {
	MARGIN: 0px -240px 1.5em 240px
}
.push-7 {
	MARGIN: 0px -280px 1.5em 280px
}
.push-8 {
	MARGIN: 0px -320px 1.5em 320px
}
.push-9 {
	MARGIN: 0px -360px 1.5em 360px
}
.push-10 {
	MARGIN: 0px -400px 1.5em 400px
}
.push-11 {
	MARGIN: 0px -440px 1.5em 440px
}
.push-12 {
	MARGIN: 0px -480px 1.5em 480px
}
.push-13 {
	MARGIN: 0px -520px 1.5em 520px
}
.push-14 {
	MARGIN: 0px -560px 1.5em 560px
}
.push-15 {
	MARGIN: 0px -600px 1.5em 600px
}
.push-16 {
	MARGIN: 0px -640px 1.5em 640px
}
.push-17 {
	MARGIN: 0px -680px 1.5em 680px
}
.push-18 {
	MARGIN: 0px -720px 1.5em 720px
}
.push-19 {
	MARGIN: 0px -760px 1.5em 760px
}
.push-20 {
	MARGIN: 0px -800px 1.5em 800px
}
.push-21 {
	MARGIN: 0px -840px 1.5em 840px
}
.push-22 {
	MARGIN: 0px -880px 1.5em 880px
}
.push-23 {
	MARGIN: 0px -920px 1.5em 920px
}
.push-24 {
	MARGIN: 0px -960px 1.5em 960px
}
.push-1 {
	FLOAT: right; POSITION: relative
}
.push-2 {
	FLOAT: right; POSITION: relative
}
.push-3 {
	FLOAT: right; POSITION: relative
}
.push-4 {
	FLOAT: right; POSITION: relative
}
.push-5 {
	FLOAT: right; POSITION: relative
}
.push-6 {
	FLOAT: right; POSITION: relative
}
.push-7 {
	FLOAT: right; POSITION: relative
}
.push-8 {
	FLOAT: right; POSITION: relative
}
.push-9 {
	FLOAT: right; POSITION: relative
}
.push-10 {
	FLOAT: right; POSITION: relative
}
.push-11 {
	FLOAT: right; POSITION: relative
}
.push-12 {
	FLOAT: right; POSITION: relative
}
.push-13 {
	FLOAT: right; POSITION: relative
}
.push-14 {
	FLOAT: right; POSITION: relative
}
.push-15 {
	FLOAT: right; POSITION: relative
}
.push-16 {
	FLOAT: right; POSITION: relative
}
.push-17 {
	FLOAT: right; POSITION: relative
}
.push-18 {
	FLOAT: right; POSITION: relative
}
.push-19 {
	FLOAT: right; POSITION: relative
}
.push-20 {
	FLOAT: right; POSITION: relative
}
.push-21 {
	FLOAT: right; POSITION: relative
}
.push-22 {
	FLOAT: right; POSITION: relative
}
.push-23 {
	FLOAT: right; POSITION: relative
}
.push-24 {
	FLOAT: right; POSITION: relative
}
.prepend-top {
	MARGIN-TOP: 1.5em
}
.append-bottom {
	MARGIN-BOTTOM: 1.5em
}
.box {
	PADDING-RIGHT: 1.5em; PADDING-LEFT: 1.5em; BACKGROUND: #e5ecf9; =
MARGIN-BOTTOM: 1.5em; PADDING-BOTTOM: 1.5em; PADDING-TOP: 1.5em
}
HR {
	CLEAR: both; BACKGROUND: #ddd; FLOAT: none; MARGIN: 0px 0px 1.45em; =
WIDTH: 100%; COLOR: #ddd; BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: =
none; BORDER-LEFT-STYLE: none; HEIGHT: 0.1em; BORDER-BOTTOM-STYLE: none
}
HR.space {
	BACKGROUND: #fff; COLOR: #fff
}
.clearfix:unknown {
	CLEAR: both; DISPLAY: block; VISIBILITY: hidden; OVERFLOW: hidden; =
HEIGHT: 0px; content: " "
}
.container:unknown {
	CLEAR: both; DISPLAY: block; VISIBILITY: hidden; OVERFLOW: hidden; =
HEIGHT: 0px; content: " "
}
.clearfix {
	DISPLAY: block
}
.container {
	DISPLAY: block
}
.clear {
	CLEAR: both
}

------=_NextPart_000_0000_01CB6714.93401B50
Content-Type: text/css;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.cssrain.cn/demo/named%20function%20expression/Named%20function%20expressions%20demystified_files/prettify.css

.str {
	COLOR: #080
}
.kwd {
	COLOR: #008
}
.com {
	COLOR: #800
}
.typ {
	COLOR: #606
}
.lit {
	COLOR: #066
}
.pun {
	COLOR: #660
}
.pln {
	COLOR: #000
}
.tag {
	COLOR: #008
}
.atn {
	COLOR: #606
}
.atv {
	COLOR: #080
}
.dec {
	COLOR: #606
}
PRE.prettyprint {
	BORDER-RIGHT: #888 1px solid; PADDING-RIGHT: 2px; BORDER-TOP: #888 1px =
solid; PADDING-LEFT: 2px; PADDING-BOTTOM: 2px; BORDER-LEFT: #888 1px =
solid; PADDING-TOP: 2px; BORDER-BOTTOM: #888 1px solid
}

@media Print   =20
{
.str {
	COLOR: #060
}
.kwd {
	FONT-WEIGHT: bold; COLOR: #006
}
.com {
	COLOR: #600; FONT-STYLE: italic
}
.typ {
	FONT-WEIGHT: bold; COLOR: #404
}
.lit {
	COLOR: #044
}
.pun {
	COLOR: #440
}
.pln {
	COLOR: #000
}
.tag {
	FONT-WEIGHT: bold; COLOR: #006
}
.atn {
	COLOR: #404
}
.atv {
	COLOR: #060
}
    }
PRE.prettyprint {
	BORDER-TOP-STYLE: none; BORDER-RIGHT-STYLE: none; BORDER-LEFT-STYLE: =
none; BACKGROUND-COLOR: #f4f2e5; BORDER-BOTTOM-STYLE: none
}

------=_NextPart_000_0000_01CB6714.93401B50
Content-Type: application/octet-stream
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.cssrain.cn/demo/named%20function%20expression/Named%20function%20expressions%20demystified_files/prettify.js

(function(){=0A=
var =
o=3Dtrue,r=3Dnull,z=3Dfalse;window.PR_SHOULD_USE_CONTINUATION=3Do;window.=
PR_TAB_WIDTH=3D8;window.PR_normalizedHtml=3Dwindow.PR=3Dwindow.prettyPrin=
tOne=3Dwindow.prettyPrint=3Dvoid 0;window._pr_isIE6=3Dfunction(){var =
N=3Dnavigator&&navigator.userAgent&&/\bMSIE =
6\./.test(navigator.userAgent);window._pr_isIE6=3Dfunction(){return =
N};return N};=0A=
var =
aa=3D"!",ba=3D"!=3D",ca=3D"!=3D=3D",F=3D"#",da=3D"%",ea=3D"%=3D",G=3D"&",=
fa=3D"&&",ja=3D"&&=3D",ka=3D"&=3D",H=3D"(",la=3D"*",ma=3D"*=3D",na=3D"+=3D=
",oa=3D",",pa=3D"-=3D",qa=3D"->",ra=3D"/",sa=3D"/=3D",ta=3D":",ua=3D"::",=
va=3D";",I=3D"<",wa=3D"<<",xa=3D"<<=3D",ya=3D"<=3D",za=3D"=3D",Aa=3D"=3D=3D=
",Ba=3D"=3D=3D=3D",J=3D">",Ca=3D">=3D",Da=3D">>",Ea=3D">>=3D",Fa=3D">>>",=
Ga=3D">>>=3D",Ha=3D"?",Ia=3D"@",L=3D"[",M=3D"^",Ta=3D"^=3D",Ua=3D"^^",Va=3D=
"^^=3D",Wa=3D"{",O=3D"|",Xa=3D"|=3D",Ya=3D"||",Za=3D"||=3D",$a=3D"~",ab=3D=
"break",bb=3D"case",cb=3D"continue",db=3D"delete",eb=3D"do",fb=3D"else",g=
b=3D"finally",hb=3D"instanceof",ib=3D"return",jb=3D"throw",kb=3D"try",lb=3D=
"typeof",=0A=
mb=3D"(?:^^|[+-]",nb=3D"\\$1",ob=3D")\\s*",pb=3D"&amp;",qb=3D"&lt;",rb=3D=
"&gt;",sb=3D"&quot;",tb=3D"&#",ub=3D"x",vb=3D"'",wb=3D'"',xb=3D" =
",yb=3D"XMP",zb=3D"</",Ab=3D'=3D"',P=3D"",Q=3D"\\",Bb=3D"b",Cb=3D"t",Db=3D=
"n",Eb=3D"v",Fb=3D"f",Gb=3D"r",Hb=3D"u",Ib=3D"0",Jb=3D"1",Kb=3D"2",Lb=3D"=
3",Mb=3D"4",Nb=3D"5",Ob=3D"6",Pb=3D"7",Qb=3D"\\x0",Rb=3D"\\x",Sb=3D"-",Tb=
=3D"]",Ub=3D"\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|=
\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]",R=3D"g",Vb=3D"\\B",Wb=3D"\\b",Xb=3D=
"\\D",Yb=3D"\\d",Zb=3D"\\S",$b=3D"\\s",ac=3D"\\W",bc=3D"\\w",cc=3D"(?:\\[=
(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2=
}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=3D]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^=
]+)",=0A=
dc=3D"(?:",ec=3D")",fc=3D"gi",gc=3D"PRE",hc=3D'<!DOCTYPE foo PUBLIC "foo =
bar">\n<foo =
/>',ic=3D"\t",jc=3D"\n",kc=3D"[^<]+|<!--[\\s\\S]*?--\>|<!\\[CDATA\\[[\\s\=
\S]*?\\]\\]>|</?[a-zA-Z][^>]*>|<",lc=3D"nocode",mc=3D' =
$1=3D"$2$3$4"',S=3D"pln",nc=3D"string",T=3D"lang-",oc=3D"src",U=3D"str",p=
c=3D"'\"",qc=3D"'\"`",rc=3D"\"'",V=3D"com",sc=3D"lang-regex",tc=3D"(/(?=3D=
[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S]=
)*(?:\\x5D|$))+/)",uc=3D"kwd",vc=3D"^(?:",wc=3D")\\b",xc=3D" =
\r\n\t\u00a0",yc=3D"lit",zc=3D"typ",Ac=3D"0123456789",Y=3D"pun",Bc=3D"bre=
ak continue do else for if return while auto case char const default =
double enum extern float goto int long register short signed sizeof =
static struct switch typedef union unsigned void volatile catch class =
delete false import new operator private protected public this throw =
true try alignof align_union asm axiom bool concept concept_map =
const_cast constexpr decltype dynamic_cast explicit export friend inline =
late_check mutable namespace nullptr reinterpret_cast static_assert =
static_cast template typeid typename typeof using virtual wchar_t where =
break continue do else for if return while auto case char const default =
double enum extern float goto int long register short signed sizeof =
static struct switch typedef union unsigned void volatile catch class =
delete false import new operator private protected public this throw =
true try boolean byte extends final finally implements import instanceof =
null native package strictfp super synchronized throws transient as base =
by checked decimal delegate descending event fixed foreach from group =
implicit in interface internal into is lock object out override orderby =
params partial readonly ref sbyte sealed stackalloc string select uint =
ulong unchecked unsafe ushort var break continue do else for if return =
while auto case char const default double enum extern float goto int =
long register short signed sizeof static struct switch typedef union =
unsigned void volatile catch class delete false import new operator =
private protected public this throw true try debugger eval export =
function get null set undefined var with Infinity NaN caller delete die =
do dump elsif eval exit foreach for goto if import last local my next no =
our print package redo require sub undef unless until use wantarray =
while BEGIN END break continue do else for if return while and as assert =
class def del elif except exec finally from global import in is lambda =
nonlocal not or pass print raise try with yield False True None break =
continue do else for if return while alias and begin case class def =
defined elsif end ensure false in module next nil not or redo rescue =
retry self super then true undef unless until when yield BEGIN END break =
continue do else for if return while case done elif esac eval fi =
function in local set then until ",=0A=
Cc=3D"</span>",Dc=3D'<span =
class=3D"',Ec=3D'">',Fc=3D"$1&nbsp;",Gc=3D"&nbsp;<br />",Hc=3D"<br =
/>",Ic=3D"console",Jc=3D"cannot override language handler =
%s",Kc=3D"default-markup",Lc=3D"default-code",Mc=3D"dec",Z=3D"lang-js",$=3D=
"lang-css",Nc=3D"lang-in.tag",Oc=3D"htm",Pc=3D"html",Qc=3D"mxml",Rc=3D"xh=
tml",Sc=3D"xml",Tc=3D"xsl",Uc=3D" =
\t\r\n",Vc=3D"atv",Wc=3D"tag",Xc=3D"atn",Yc=3D"lang-uq.val",Zc=3D"in.tag"=
,$c=3D"uq.val",ad=3D"break continue do else for if return while auto =
case char const default double enum extern float goto int long register =
short signed sizeof static struct switch typedef union unsigned void =
volatile catch class delete false import new operator private protected =
public this throw true try alignof align_union asm axiom bool concept =
concept_map const_cast constexpr decltype dynamic_cast explicit export =
friend inline late_check mutable namespace nullptr reinterpret_cast =
static_assert static_cast template typeid typename typeof using virtual =
wchar_t where ",=0A=
bd=3D"c",cd=3D"cc",dd=3D"cpp",ed=3D"cxx",fd=3D"cyc",gd=3D"m",hd=3D"null =
true false",id=3D"json",jd=3D"break continue do else for if return while =
auto case char const default double enum extern float goto int long =
register short signed sizeof static struct switch typedef union unsigned =
void volatile catch class delete false import new operator private =
protected public this throw true try boolean byte extends final finally =
implements import instanceof null native package strictfp super =
synchronized throws transient as base by checked decimal delegate =
descending event fixed foreach from group implicit in interface internal =
into is lock object out override orderby params partial readonly ref =
sbyte sealed stackalloc string select uint ulong unchecked unsafe ushort =
var ",=0A=
kd=3D"cs",ld=3D"break continue do else for if return while auto case =
char const default double enum extern float goto int long register short =
signed sizeof static struct switch typedef union unsigned void volatile =
catch class delete false import new operator private protected public =
this throw true try boolean byte extends final finally implements import =
instanceof null native package strictfp super synchronized throws =
transient ",md=3D"java",nd=3D"break continue do else for if return while =
case done elif esac eval fi function in local set then until ",=0A=
od=3D"bsh",pd=3D"csh",qd=3D"sh",rd=3D"break continue do else for if =
return while and as assert class def del elif except exec finally from =
global import in is lambda nonlocal not or pass print raise try with =
yield False True None ",sd=3D"cv",td=3D"py",ud=3D"caller delete die do =
dump elsif eval exit foreach for goto if import last local my next no =
our print package redo require sub undef unless until use wantarray =
while BEGIN END ",vd=3D"perl",wd=3D"pl",xd=3D"pm",yd=3D"break continue =
do else for if return while alias and begin case class def defined elsif =
end ensure false in module next nil not or redo rescue retry self super =
then true undef unless until when yield BEGIN END ",=0A=
zd=3D"rb",Ad=3D"break continue do else for if return while auto case =
char const default double enum extern float goto int long register short =
signed sizeof static struct switch typedef union unsigned void volatile =
catch class delete false import new operator private protected public =
this throw true try debugger eval export function get null set undefined =
var with Infinity NaN =
",Bd=3D"js",Cd=3D"regex",Dd=3D"pre",Ed=3D"code",Fd=3D"xmp",Gd=3D"prettypr=
int",Hd=3D"class",Id=3D"br",Jd=3D"\r";=0A=
(function(){var N=3Dfunction(){for(var =
a=3D[aa,ba,ca,F,da,ea,G,fa,ja,ka,H,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,I,wa,=
xa,ya,za,Aa,Ba,J,Ca,Da,Ea,Fa,Ga,Ha,Ia,L,M,Ta,Ua,Va,Wa,O,Xa,Ya,Za,$a,ab,bb=
,cb,db,eb,fb,gb,hb,ib,jb,kb,lb],b=3Dmb,c=3D0;c<a.length;++c)b+=3DO+a[c].r=
eplace(/([^=3D<>:&a-z])/g,nb);b+=3Dob;return =
b}(),Ja=3D/&/g,Ka=3D/</g,La=3D/>/g,Kd=3D/\"/g;function Ld(a){return =
a.replace(Ja,pb).replace(Ka,qb).replace(La,rb).replace(Kd,sb)}function =
ga(a){return a.replace(Ja,pb).replace(Ka,qb).replace(La,rb)}var =
Md=3D/&lt;/g,Nd=3D/&gt;/g,=0A=
Od=3D/&apos;/g,Pd=3D/&quot;/g,Qd=3D/&amp;/g,Rd=3D/&nbsp;/g;function =
Sd(a){var b=3Da.indexOf(G);if(b<0)return =
a;for(--b;(b=3Da.indexOf(tb,b+1))>=3D0;){var =
c=3Da.indexOf(va,b);if(c>=3D0){var =
d=3Da.substring(b+3,c),g=3D10;if(d&&d.charAt(0)=3D=3D=3Dub){d=3Dd.substri=
ng(1);g=3D16}var =
i=3DparseInt(d,g);isNaN(i)||(a=3Da.substring(0,b)+String.fromCharCode(i)+=
a.substring(c+1))}}return =
a.replace(Md,I).replace(Nd,J).replace(Od,vb).replace(Pd,wb).replace(Qd,G)=
.replace(Rd,xb)}function Ma(a){return yb=3D=3D=3Da.tagName}function =
W(a,b){switch(a.nodeType){case 1:var c=3D=0A=
a.tagName.toLowerCase();b.push(I,c);for(var =
d=3D0;d<a.attributes.length;++d){var =
g=3Da.attributes[d];if(g.specified){b.push(xb);W(g,b)}}b.push(J);for(var =
i=3Da.firstChild;i;i=3Di.nextSibling)W(i,b);if(a.firstChild||!/^(?:br|lin=
k|img)$/.test(c))b.push(zb,c,J);break;case =
2:b.push(a.name.toLowerCase(),Ab,Ld(a.value),wb);break;case 3:case =
4:b.push(ga(a.nodeValue));break}}function Na(a){for(var =
b=3D0,c=3Dz,d=3Dz,g=3D0,i=3Da.length;g<i;++g){var =
m=3Da[g];if(m.ignoreCase)d=3Do;else =
if(/[a-z]/i.test(m.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/=
gi,=0A=
P))){c=3Do;d=3Dz;break}}function l(j){if(j.charAt(0)!=3D=3DQ)return =
j.charCodeAt(0);switch(j.charAt(1)){case Bb:return 8;case Cb:return =
9;case Db:return 10;case Eb:return 11;case Fb:return 12;case Gb:return =
13;case Hb:case ub:return =
parseInt(j.substring(2),16)||j.charCodeAt(1);case Ib:case Jb:case =
Kb:case Lb:case Mb:case Nb:case Ob:case Pb:return =
parseInt(j.substring(1),8);default:return j.charCodeAt(1)}}function =
n(j){if(j<32)return(j<16?Qb:Rb)+j.toString(16);var =
f=3DString.fromCharCode(j);if(f=3D=3D=3DQ||f=3D=3D=3DSb||=0A=
f=3D=3D=3DL||f=3D=3D=3DTb)f=3DQ+f;return f}function q(j){for(var =
f=3Dj.substring(1,j.length-1).match(new =
RegExp(Ub,R)),s=3D[],k=3D[],h=3Df[0]=3D=3D=3DM,e=3Dh?1:0,p=3Df.length;e<p=
;++e){var t=3Df[e];switch(t){case Vb:case Wb:case Xb:case Yb:case =
Zb:case $b:case ac:case bc:s.push(t);continue}var =
u=3Dl(t),x;if(e+2<p&&Sb=3D=3D=3Df[e+1]){x=3Dl(f[e+2]);e+=3D2}else =
x=3Du;k.push([u,x]);if(!(x<65||u>122)){x<65||u>90||k.push([Math.max(65,u)=
|32,Math.min(x,90)|32]);x<97||u>122||k.push([Math.max(97,u)&-33,Math.min(=
x,122)&-33])}}k.sort(function(Oa,Pa){return Oa[0]-=0A=
Pa[0]||Pa[1]-Oa[1]});var =
B=3D[],E=3D[NaN,NaN];for(e=3D0;e<k.length;++e){var =
A=3Dk[e];if(A[0]<=3DE[1]+1)E[1]=3DMath.max(E[1],A[1]);else =
B.push(E=3DA)}var =
D=3D[L];h&&D.push(M);D.push.apply(D,s);for(e=3D0;e<B.length;++e){A=3DB[e]=
;D.push(n(A[0]));if(A[1]>A[0]){A[1]+1>A[0]&&D.push(Sb);D.push(n(A[1]))}}D=
.push(Tb);return D.join(P)}function v(j){var f=3Dj.source.match(new =
RegExp(cc,R)),s=3Df.length,k=3D[],h,e=3D0;for(h=3D0;e<s;++e){var =
p=3Df[e];if(p=3D=3D=3DH)++h;else if(Q=3D=3D=3Dp.charAt(0)){var =
t=3D+p.substring(1);if(t&&t<=3Dh)k[t]=3D-1}}for(e=3D1;e<k.length;++e)if(-=
1=3D=3D=3D=0A=
k[e])k[e]=3D++b;for(h=3De=3D0;e<s;++e){p=3Df[e];if(p=3D=3D=3DH){++h;if(k[=
h]=3D=3D=3Dundefined)f[e]=3Ddc}else =
if(Q=3D=3D=3Dp.charAt(0))if((t=3D+p.substring(1))&&t<=3Dh)f[e]=3DQ+k[h]}f=
or(h=3De=3D0;e<s;++e)if(M=3D=3D=3Df[e]&&M!=3D=3Df[e+1])f[e]=3DP;if(j.igno=
reCase&&c)for(e=3D0;e<s;++e){p=3Df[e];var =
u=3Dp.charAt(0);if(p.length>=3D2&&u=3D=3D=3DL)f[e]=3Dq(p);else =
if(u!=3D=3DQ)f[e]=3Dp.replace(/[a-zA-Z]/g,function(x){var =
B=3Dx.charCodeAt(0);return L+String.fromCharCode(B&-33,B|32)+Tb})}return =
f.join(P)}var =
w=3D[];g=3D0;for(i=3Da.length;g<i;++g){m=3Da[g];if(m.global||m.multiline)=
throw new Error(P+=0A=
m);w.push(dc+v(m)+ec)}return new RegExp(w.join(O),d?fc:R)}var =
ha=3Dr;function Td(a){if(r=3D=3D=3Dha){var =
b=3Ddocument.createElement(gc);b.appendChild(document.createTextNode(hc))=
;ha=3D!/</.test(b.innerHTML)}if(ha){var =
c=3Da.innerHTML;if(Ma(a))c=3Dga(c);return c}for(var =
d=3D[],g=3Da.firstChild;g;g=3Dg.nextSibling)W(g,d);return =
d.join(P)}function Ud(a){var b=3D0;return function(c){for(var =
d=3Dr,g=3D0,i=3D0,m=3Dc.length;i<m;++i){var =
l=3Dc.charAt(i);switch(l){case =
ic:d||(d=3D[]);d.push(c.substring(g,i));var =
n=3Da-b%a;for(b+=3Dn;n>=3D0;n-=3D"                ".length)d.push("      =
          ".substring(0,=0A=
n));g=3Di+1;break;case jc:b=3D0;break;default:++b}}if(!d)return =
c;d.push(c.substring(g));return d.join(P)}}var Vd=3Dnew =
RegExp(kc,R),Wd=3D/^<\!--/,Xd=3D/^<\[CDATA\[/,Yd=3D/^<br\b/i,Qa=3D/^<(\/?=
)([a-zA-Z]+)/;function Zd(a){var =
b=3Da.match(Vd),c=3D[],d=3D0,g=3D[];if(b)for(var =
i=3D0,m=3Db.length;i<m;++i){var =
l=3Db[i];if(l.length>1&&l.charAt(0)=3D=3D=3DI){if(!Wd.test(l))if(Xd.test(=
l)){c.push(l.substring(9,l.length-3));d+=3Dl.length-12}else =
if(Yd.test(l)){c.push(jc);++d}else if(l.indexOf(lc)>=3D0&&$d(l)){var =
n=3Dl.match(Qa)[2],q=3D1,v;v=3Di+1;a:for(;v<=0A=
m;++v){var =
w=3Db[v].match(Qa);if(w&&w[2]=3D=3D=3Dn)if(w[1]=3D=3D=3Dra){if(--q=3D=3D=3D=
0)break a}else++q}if(v<m){g.push(d,b.slice(i,v+1).join(P));i=3Dv}else =
g.push(d,l)}else g.push(d,l)}else{var =
j=3DSd(l);c.push(j);d+=3Dj.length}}return{source:c.join(P),tags:g}}functi=
on =
$d(a){return!!a.replace(/\s(\w+)\s*=3D\s*(?:\"([^\"]*)\"|'([^\']*)'|(\S+)=
)/g,mc).match(/[cC][lL][aA][sS][sS]=3D\"[^\"]*\bnocode\b/)}function =
ia(a,b,c,d){if(b){var =
g=3D{source:b,b:a};c(g);d.push.apply(d,g.c)}}function K(a,b){var =
c=3D{},d;(function(){for(var m=3Da.concat(b),=0A=
l=3D[],n=3D{},q=3D0,v=3Dm.length;q<v;++q){var =
w=3Dm[q],j=3Dw[3];if(j)for(var =
f=3Dj.length;--f>=3D0;)c[j.charAt(f)]=3Dw;var =
s=3Dw[1],k=3DP+s;if(!n.hasOwnProperty(k)){l.push(s);n[k]=3Dr}}l.push(/[\0=
-\uffff]/);d=3DNa(l)})();var g=3Db.length,i=3Dfunction(m){for(var =
l=3Dm.source,n=3Dm.b,q=3D[n,S],v=3D0,w=3Dl.match(d)||[],j=3D{},f=3D0,s=3D=
w.length;f<s;++f){var k=3Dw[f],h=3Dj[k],e,p;if(typeof =
h=3D=3D=3Dnc)p=3Dz;else{var =
t=3Dc[k.charAt(0)];if(t){e=3Dk.match(t[1]);h=3Dt[0]}else{for(var =
u=3D0;u<g;++u){t=3Db[u];if(e=3Dk.match(t[1])){h=3Dt[0];break}}e||(h=3DS)}=
if((p=3Dh.length>=3D5&&T=3D=3D=3D=0A=
h.substring(0,5))&&!(e&&e[1])){p=3Dz;h=3Doc}p||(j[k]=3Dh)}var =
x=3Dv;v+=3Dk.length;if(p){var =
B=3De[1],E=3Dk.indexOf(B),A=3DE+B.length,D=3Dh.substring(5);ia(n+x,k.subs=
tring(0,E),i,q);ia(n+x+E,B,Ra(D,B),q);ia(n+x+A,k.substring(A),i,q)}else =
q.push(n+x,h)}m.c=3Dq};return i}function C(a){var =
b=3D[],c=3D[];if(a.tripleQuotedStrings)b.push([U,/^(?:\'\'\'(?:[^\'\\]|\\=
[\s\S]|\'{1,2}(?=3D[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}=
(?=3D[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\=
[\s\S])*(?:\"|$))/,r,pc]);=0A=
else =
a.multiLineStrings?b.push([U,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^=
\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,r,qc]):b.push(=
[U,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,r=
,rc]);if(a.hashComments)a.cStyleComments?b.push([V,/^#(?:[^\r\n\/]|\/(?!\=
*)|\/\*[^\r\n]*?\*\/)*/,r,F]):b.push([V,/^#[^\r\n]*/,r,F]);if(a.cStyleCom=
ments){c.push([V,/^\/\/[^\r\n]*/,r]);c.push([V,/^\/\*[\s\S]*?(?:\*\/|$)/,=
r])}a.regexLiterals&&c.push([sc,new RegExp(M+N+tc)]);var d=3D=0A=
a.keywords.replace(/^\s+|\s+$/g,P);d.length&&c.push([uc,new =
RegExp(vc+d.replace(/\s+/g,O)+wc),r]);b.push([S,/^\s+/,r,xc]);c.push([yc,=
/^@[a-z_$][a-z_$@0-9]*/i,r,Ia],[zc,/^@?[A-Z]+[a-z][A-Za-z_$@0-9]*/,r],[S,=
/^[a-z_$][a-z_$@0-9]*/i,r],[yc,/^(?:0x[a-f0-9]+|(?:\d(?:_\d+)*\d*(?:\.\d*=
)?|\.\d\+)(?:e[+\-]?\d+)?)[a-z]*/i,r,Ac],[Y,/^.[^\s\w\.$@\'\"\`\/\#]*/,r]=
);return K(b,c)}var =
ae=3DC({keywords:Bc,hashComments:o,cStyleComments:o,multiLineStrings:o,re=
gexLiterals:o});function be(a){var b=3Da.source,c=3Da.f,d=3Da.c,=0A=
g=3D[],i=3D0,m=3Dr,l=3Dr,n=3D0,q=3D0,v=3DUd(window.PR_TAB_WIDTH),w=3D/([\=
r\n ]) /g,j=3D/(^| ) /gm,f=3D/\r\n?|\n/g,s=3D/[ \r\n]$/,k=3Do;function =
h(p){if(p>i){if(m&&m!=3D=3Dl){g.push(Cc);m=3Dr}if(!m&&l){m=3Dl;g.push(Dc,=
m,Ec)}var =
t=3Dga(v(b.substring(i,p))).replace(k?j:w,Fc);k=3Ds.test(t);var =
u=3Dwindow._pr_isIE6()?Gc:Hc;g.push(t.replace(f,u));i=3Dp}}for(;1;){var =
e;if(e=3Dn<c.length?q<d.length?c[n]<=3Dd[q]:o:z){h(c[n]);if(m){g.push(Cc)=
;m=3Dr}g.push(c[n+1]);n+=3D2}else =
if(q<d.length){h(d[q]);l=3Dd[q+1];q+=3D2}else =
break}h(b.length);m&&g.push(Cc);a.a=3Dg.join(P)}=0A=
var X=3D{};function y(a,b){for(var c=3Db.length;--c>=3D0;){var =
d=3Db[c];if(X.hasOwnProperty(d))Ic in window&&console.i(Jc,d);else =
X[d]=3Da}}function =
Ra(a,b){a&&X.hasOwnProperty(a)||(a=3D/^\s*</.test(b)?Kc:Lc);return =
X[a]}y(ae,[Lc]);y(K([],[[S,/^[^<?]+/],[Mc,/^<!\w[^>]*(?:>|$)/],[V,/^<\!--=
[\s\S]*?(?:-\->|$)/],[T,/^<\?([\s\S]+?)(?:\?>|$)/],[T,/^<%([\s\S]+?)(?:%>=
|$)/],[Y,/^(?:<[%?]|[%?]>)/],[T,/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i]=
,[Z,/^<script\b[^>]*>([\s\S]+?)<\/script\b[^>]*>/i],[$,/^<style\b[^>]*>([=
\s\S]+?)<\/style\b[^>]*>/i],=0A=
[Nc,/^(<\/?[a-z][^<>]*>)/i]]),[Kc,Oc,Pc,Qc,Rc,Sc,Tc]);y(K([[S,/^[\s]+/,r,=
Uc],[Vc,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,r,rc]],[[Wc,/^^<\/?[a-z](?:[\w:-]*=
\w)?|\/?>$/],[Xc,/^(?!style\b|on)[a-z](?:[\w:-]*\w)?/],[Yc,/^=3D\s*([^>\'=
\"\s]*(?:[^>\'\"\s\/]|\/(?=3D\s)))/],[Y,/^[=3D<>\/]+/],[Z,/^on\w+\s*=3D\s=
*\"([^\"]+)\"/i],[Z,/^on\w+\s*=3D\s*\'([^\']+)\'/i],[Z,/^on\w+\s*=3D\s*([=
^\"\'>\s]+)/i],[$,/^sty\w+\s*=3D\s*\"([^\"]+)\"/i],[$,/^sty\w+\s*=3D\s*\'=
([^\']+)\'/i],[$,/^sty\w+\s*=3D\s*([^\"\'>\s]+)/i]]),[Zc]);y(K([],[[Vc,/^=
[\s\S]+/]]),=0A=
[$c]);y(C({keywords:ad,hashComments:o,cStyleComments:o}),[bd,cd,dd,ed,fd,=
gd]);y(C({keywords:hd}),[id]);y(C({keywords:jd,hashComments:o,cStyleComme=
nts:o}),[kd]);y(C({keywords:ld,cStyleComments:o}),[md]);y(C({keywords:nd,=
hashComments:o,multiLineStrings:o}),[od,pd,qd]);y(C({keywords:rd,hashComm=
ents:o,multiLineStrings:o,tripleQuotedStrings:o}),[sd,td]);y(C({keywords:=
ud,hashComments:o,multiLineStrings:o,regexLiterals:o}),[vd,wd,xd]);y(C({k=
eywords:yd,hashComments:o,multiLineStrings:o,regexLiterals:o}),=0A=
[zd]);y(C({keywords:Ad,cStyleComments:o,regexLiterals:o}),[Bd]);y(K([],[[=
U,/^[\s\S]+/]]),[Cd]);function Sa(a){var b=3Da.e,c=3Da.d;a.a=3Db;try{var =
d=3DZd(b),g=3Dd.source;a.source=3Dg;a.b=3D0;a.f=3Dd.tags;Ra(c,g)(a);be(a)=
}catch(i){if(Ic in window){console.log(i);console.h()}}}function =
ce(a,b){var c=3D{e:a,d:b};Sa(c);return c.a}function de(a){for(var =
b=3Dwindow._pr_isIE6(),c=3D[document.getElementsByTagName(Dd),document.ge=
tElementsByTagName(Ed),document.getElementsByTagName(Fd)],d=3D[],g=3D0;g<=
c.length;++g)for(var i=3D0,m=3Dc[g].length;i<=0A=
m;++i)d.push(c[g][i]);c=3Dr;var =
l=3DDate;l.now||(l=3D{now:function(){return(new Date).getTime()}});var =
n=3D0,q;function v(){for(var =
j=3Dwindow.PR_SHOULD_USE_CONTINUATION?l.now()+250:Infinity;n<d.length&&l.=
now()<j;n++){var =
f=3Dd[n];if(f.className&&f.className.indexOf(Gd)>=3D0){var =
s=3Df.className.match(/\blang-(\w+)\b/);if(s)s=3Ds[1];for(var =
k=3Dz,h=3Df.parentNode;h;h=3Dh.parentNode)if((h.tagName=3D=3D=3DDd||h.tag=
Name=3D=3D=3DEd||h.tagName=3D=3D=3DFd)&&h.className&&h.className.indexOf(=
Gd)>=3D0){k=3Do;break}if(!k){var e=3DTd(f);e=3De.replace(/(?:\r\n?|\n)$/,=0A=
P);q=3D{e:e,d:s,g:f};Sa(q);w()}}}if(n<d.length)setTimeout(v,250);else =
a&&a()}function w(){var j=3Dq.a;if(j){var f=3Dq.g;if(Ma(f)){for(var =
s=3Ddocument.createElement(gc),k=3D0;k<f.attributes.length;++k){var =
h=3Df.attributes[k];if(h.specified){var =
e=3Dh.name.toLowerCase();if(e=3D=3D=3DHd)s.className=3Dh.value;else =
s.setAttribute(h.name,h.value)}}s.innerHTML=3Dj;f.parentNode.replaceChild=
(s,f);f=3Ds}else f.innerHTML=3Dj;if(b&&f.tagName=3D=3D=3Dgc)for(var =
p=3Df.getElementsByTagName(Id),t=3Dp.length;--t>=3D0;){var =
u=3Dp[t];u.parentNode.replaceChild(document.createTextNode(Jd),=0A=
u)}}}v()}window.PR_normalizedHtml=3DW;window.prettyPrintOne=3Dce;window.p=
rettyPrint=3Dde;window.PR=3D{combinePrefixPatterns:Na,createSimpleLexer:K=
,registerLangHandler:y,sourceDecorator:C,PR_ATTRIB_NAME:Xc,PR_ATTRIB_VALU=
E:Vc,PR_COMMENT:V,PR_DECLARATION:Mc,PR_KEYWORD:uc,PR_LITERAL:yc,PR_NOCODE=
:lc,PR_PLAIN:S,PR_PUNCTUATION:Y,PR_SOURCE:oc,PR_STRING:U,PR_TAG:Wc,PR_TYP=
E:zc}})();=0A=
})()=0A=

------=_NextPart_000_0000_01CB6714.93401B50--
